{"addedFiles":{},"deletedFiles":{},"modifiedFiles":{"before":{"packages/@uppy/core/src/Restricter.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"match"}}],"source":{"type":"StringLiteral","value":"mime-match"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"I18n"},"importKind":"value","local":{"type":"Identifier","name":"I18n"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"NonNullableUppyOptions"},"importKind":"value","local":{"type":"Identifier","name":"NonNullableUppyOptions"}}],"source":{"type":"StringLiteral","value":"./Uppy"}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Restrictions"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"type"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"extension"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"size"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"name"}}]}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isGhost"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"Error"},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"file"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}},"right":{"type":"LogicalExpression","left":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"},"optional":true},"operator":"??","right":{"type":"BooleanLiteral","value":true}}}},{"type":"IfStatement","test":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"},"optional":true},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"file"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"}}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isRestriction"},"computed":false,"value":{"type":"BooleanLiteral","value":true}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Restricter"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":null,"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"getI18n"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"getOpts"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"getOpts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}},{"type":"Identifier","name":"getI18n","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"right":{"type":"Identifier","name":"getI18n"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"right":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"opts"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getOpts"},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"},"optional":true},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Array"},"computed":false,"property":{"type":"Identifier","name":"isArray"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"TypeError"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"opts"}}],"directives":[]}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateAggregateRestrictions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxTotalFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"maxNumberOfFiles"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nonGhostFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"f"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonGhostFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"+","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"operator":">","right":{"type":"Identifier","name":"maxNumberOfFiles"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"Identifier","name":"maxTotalFileSize"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalFilesSize"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"total"},{"type":"Identifier","name":"f"}],"body":{"type":"TSAsExpression","expression":{"type":"BinaryExpression","left":{"type":"Identifier","name":"total"},"operator":"+","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"??","right":{"type":"NumericLiteral","value":0}}},"typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"NumericLiteral","value":0}]}}],"kind":"let"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"addingFile"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"addingFiles"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"totalFilesSize"},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"size"}}}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalFilesSize"},"operator":">","right":{"type":"Identifier","name":"maxTotalFileSize"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxTotalFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null}],"directives":[]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateSingleFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowedFileTypes"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"allowedFileTypes"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isCorrectFileType"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"some"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"type"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"includes"}},"arguments":[{"type":"StringLiteral","value":"/"}]},"consequent":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"consequent":{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"match"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":";.*?$","flags":""},{"type":"StringLiteral","value":""}]},{"type":"Identifier","name":"type"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":true,"property":{"type":"NumericLiteral","value":0}},"operator":"===","right":{"type":"StringLiteral","value":"."}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]},"operator":"===","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]}}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"isCorrectFileType"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"allowedFileTypesString"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadFileTypes"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"types"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"allowedFileTypesString"}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"maxFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":">","right":{"type":"Identifier","name":"maxFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"<","right":{"type":"Identifier","name":"minFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"inferiorSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"minFileSize"}]}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validate"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"addingFile"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateSingleFile"}},"arguments":[{"type":"Identifier","name":"addingFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateAggregateRestrictions"}},"arguments":[{"type":"Identifier","name":"existingFiles"},{"type":"Identifier","name":"addingFiles"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateMinNumberOfFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minNumberOfFiles"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"<","right":{"type":"Identifier","name":"minNumberOfFiles"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youHaveToAtLeastSelectX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getMissingRequiredMetaFields"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}}]}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"missingFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"missingRequiredMetaFieldOnFile"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileName"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"requiredMetaFields"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"missingFields","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"field"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"requiredMetaFields"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"hasOwn"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},{"type":"Identifier","name":"field"}]}},"operator":"||","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"computed":true,"property":{"type":"Identifier","name":"field"}},"operator":"===","right":{"type":"StringLiteral","value":""}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"missingFields"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"field"}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingFields"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"missingFields"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]}}],"directives":[]}}]}},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[{"type":"ExportSpecifier","local":{"type":"Identifier","name":"Restricter"},"exportKind":"value","exported":{"type":"Identifier","name":"Restricter"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"defaultOptions"},"exportKind":"value","exported":{"type":"Identifier","name":"defaultOptions"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"RestrictionError"},"exportKind":"value","exported":{"type":"Identifier","name":"RestrictionError"}}],"source":null,"declaration":null}],"directives":[]}},"packages/@uppy/core/src/Uppy.test.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"afterEach"},"importKind":"value","local":{"type":"Identifier","name":"afterEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"beforeEach"},"importKind":"value","local":{"type":"Identifier","name":"beforeEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"describe"},"importKind":"value","local":{"type":"Identifier","name":"describe"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"expect"},"importKind":"value","local":{"type":"Identifier","name":"expect"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"it"},"importKind":"value","local":{"type":"Identifier","name":"it"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"vi"},"importKind":"value","local":{"type":"Identifier","name":"vi"}}],"source":{"type":"StringLiteral","value":"vitest"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"assert"}}],"source":{"type":"StringLiteral","value":"node:assert"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"fs"}}],"source":{"type":"StringLiteral","value":"node:fs"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"path"}}],"source":{"type":"StringLiteral","value":"node:path"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Locale"},"importKind":"value","local":{"type":"Identifier","name":"Locale"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Core"}}],"source":{"type":"StringLiteral","value":"./index.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"UIPlugin"}}],"source":{"type":"StringLiteral","value":"./UIPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"DefinePluginOpts"},"local":{"type":"Identifier","name":"DefinePluginOpts"},"importKind":"type"},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PluginOpts"},"local":{"type":"Identifier","name":"PluginOpts"},"importKind":"type"}],"source":{"type":"StringLiteral","value":"./BasePlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"debugLogger"},"importKind":"value","local":{"type":"Identifier","name":"debugLogger"}}],"source":{"type":"StringLiteral","value":"./loggers.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin1"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin1.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin2"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin2.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPlugin"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutId"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutId.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutType"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutType.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"DeepFrozenStore"}}],"source":{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/DeepFrozenStore.mjs"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}}],"source":{"type":"StringLiteral","value":"./Uppy.ts"}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sampleImage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fs"},"computed":false,"property":{"type":"Identifier","name":"readFileSync"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"path"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"Identifier","name":"__dirname"},{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/images/image.jpg"}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"testImage"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"src/Core"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealCreateObjectUrl"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"beforeEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"mockReturnValue"}},"arguments":[{"type":"StringLiteral","value":"newUrl"}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"Identifier","name":"RealCreateObjectUrl"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should expose a class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Uppy"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should have a string `id` option that defaults to \"uppy\""},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"uppy"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"profile"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"profile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a plugin to the plugin stack"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to .use() without passing generics again"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"Identifier","name":"opts"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"StringLiteral","value":"Test"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"foo"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"foo"}},"operator":"??","right":{"type":"StringLiteral","value":"defaultFoo"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"bar"}},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"bar"}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}}],"directives":[]},{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"defaultFoo"}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefinePluginOpts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"defaultOptions"}}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"??","right":{"type":"StringLiteral","value":"Test"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"directives":[]}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should prevent the same plugin from being added more than once"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add an invalid plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPlugin"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutId"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no type"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutType"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return the plugin that matches the specified name"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"foo"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"BinaryExpression","left":{"type":"Identifier","name":"plugin"},"operator":"instanceof","right":{"type":"Identifier","name":"UIPlugin"}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call the specified method on all the plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"run"}},"arguments":[{"type":"StringLiteral","value":"hello"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should uninstall and the remove the specified plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePlugin"}},"arguments":[{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update all the plugins with the new state when the updateAll method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateAll"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"stateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newState"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should cancel all when the `cancelAll` method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":30}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should clear all uploads and files on cancelAll()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove all uploads when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should disallow remove one upload when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"throws"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"RegExpLiteral","pattern":"individualCancellation is disabled","flags":""}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove one upload when individualCancellation is enabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should close, reset and uninstall when the close method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pluginIteration"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"Identifier","name":"pluginIteration"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginIteration"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"upload hooks"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add data returned from upload hooks to the .upload() result"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pre"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"post"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"result"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"Identifier","name":"result"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"pre"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"upload"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"post"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"preprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove preprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the preprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not pass removed file IDs to next step"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"rmd.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"kept.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"kept.jpg"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileID"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"postprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove postprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the postprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should report an error if post-processing a file fails"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]},{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploaders"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove uploader"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"adding a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call onBeforeFileAdded if it was specified in the options when initialising the class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeFileAdded"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"files"}],"body":{"type":"CallExpression","callee":{"type":"Identifier","name":"onBeforeFileAdded"},"arguments":[{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"files"}}]}]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow uploading duplicate file if explicitly allowed in onBeforeFileAdded"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BooleanLiteral","value":true}}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileAddedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"fileAddedEventMock"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isRemote"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preview"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"undefined"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileAddedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file from a File object"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"fileData"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file that does not meet the restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"video/webm"}]}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, video/webm"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.webm"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a dupicate file, a file with the same id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"notARelativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the duplicate file 'foo.jpg', it already exists"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow a duplicate file if its relativePath is different, thus the id is different"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"relativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file if onBeforeFileAdded returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"source"}},"operator":"===","right":{"type":"StringLiteral","value":"vi"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the file because onBeforeFileAdded returned false."}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"with allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload with legacy allowMultipleUploads option"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not allow new files after the removeFile() if some file is still present"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files after the last removeFile()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId2"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not dedupe different files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"data"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"lastModified"}},"right":{"type":"NumericLiteral","value":1562770350937}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo푸.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo//jpg-1l3o-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return a { successful, failed } pair containing file objects"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return files with errors in the { failed } key"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"RegExpLiteral","pattern":"bar","flags":""},"computed":false,"property":{"type":"Identifier","name":"test"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This is bar and I do not like bar"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is bar and I do not like bar"}}]}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only upload files that are not already assigned to another upload id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"state"}},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload1"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file1/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file2/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file3/jpg-1e-image/jpeg"}]}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload2"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file4/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file5/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file6/jpg-1e-image/jpeg"}]}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"r"}],"body":{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":21}}},"consequent":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"r"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadID"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"cjd09qwxb000dlql4tp4doz8h"}}]},"alternate":{"type":"Identifier","name":"r"}}}]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not upload if onBeforeUpload returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"ForInStatement","left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"files"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileId"}},"computed":false,"property":{"type":"Identifier","name":"name"}},"operator":"===","right":{"type":"StringLiteral","value":"123.foo"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"files"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Not starting the upload because onBeforeUpload returned false"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"only allows a single upload() batch when allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"rejects"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot create a new upload: already uploading\\.","flags":""}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files again with allowMultipleUploadBatches: false after cancelAll() was called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"removing a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should remove the file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileRemovedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-removed"},{"type":"Identifier","name":"fileRemovedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":50}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileRemovedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"retries"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should start a new upload with failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onRetryAll"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"retry-all"},{"type":"Identifier","name":"onRetryAll"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"id"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something went wrong"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onRetryAll"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not start a new upload if there are no failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"restoring a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should restore a file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should fail to restore a file if it doesn't exist"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"get a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the specified file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"non existent file"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"getFiles"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return an empty array if there are no files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return all files as an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"empty.dat"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"NumericLiteral","value":1000}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}}]}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]},"computed":false,"property":{"type":"Identifier","name":"sort"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"empty.dat"},{"type":"StringLiteral","value":"foo.jpg"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"setOptions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change options on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lolUppy"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"autoProceed"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"lolUppy"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"autoProceed"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploadBatches"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change locale on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Cancel"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cancel"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Отмена"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Отмена"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"logOut"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Log out"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change meta on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"beep"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"only"}},"arguments":[{"type":"StringLiteral","value":"should change restrictions on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fr_FR","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":0}},{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":1}}]}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youCanOnlyUploadFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Vous pouvez seulement téléverser: %{types}"}}]}},{"type":"ObjectMethod","method":true,"key":{"type":"Identifier","name":"pluralize"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"n"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"n"},"operator":"<=","right":{"type":"NumericLiteral","value":1}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"NumericLiteral","value":0}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"NumericLiteral","value":1}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/jpeg"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":2}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/jpeg"}]}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fr_FR"}}]}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Vous pouvez seulement téléverser: image/jpeg"}]}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fr_FR"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"meta data"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set meta data by calling setMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"boo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo2"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bur"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update meta data for a file by calling updateMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should merge meta data when add file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the progress of a file upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":72}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should work with unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"proceedUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"promise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"proceedUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishPromise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"finishUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"id"}]}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadURL"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lol"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadPromise"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"all"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"Identifier","name":"resolve"}]}}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-started"},{"type":"Identifier","name":"resolve"}]}}]}]}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"proceedUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":36}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":36}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"finishUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3456}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"uploadPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should estimate progress for unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":18}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the total progress of all file uploads"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"resetProgressEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"reset-progress"},{"type":"Identifier","name":"resetProgressEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"resetProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"allowNewUpload"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"recoveredState"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"resetProgressEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"checkRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxNumberOfFiles rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not enforce the maxNumberOfFiles rule for ghost files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileId1"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should enforce the minNumberOfFiles rule"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should throw if allowedFileTypes is not an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/gif"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"hi"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule with file extensions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":".gif"},{"type":"StringLiteral","value":".jpg"},{"type":"StringLiteral","value":".jpeg"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.JPG"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the minFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1073741824}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxTotalFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":34000}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foo1.jpg exceeds maximum allowed size of 33 KB"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should check if a file validateRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":300000}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isFolder"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mimeType"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"modifiedDate"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2016-04-13T15:11:31.204Z"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":270733}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions1"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 293 KB"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions2"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/png"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit `restriction-failed` event when some rule is violated"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"maxFileSize"},"init":{"type":"NumericLiteral","value":100}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"test.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"BinaryExpression","left":{"type":"NumericLiteral","value":2},"operator":"*","right":{"type":"Identifier","name":"maxFileSize"}}]}]}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorMessage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"Identifier","name":"restrictionsViolatedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"file"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":null,"body":{"type":"BlockStatement","body":[],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"errorMessage"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"actions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the upload-error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileId"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"filename"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"fileId"}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"this is the error"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to upload filename"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"this is the error"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"error"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the error state when receiving the upload event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"updateOnlineStatus"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealNavigatorOnline"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"mockNavigatorOnline"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"status","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"defineProperty"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},{"type":"StringLiteral","value":"onLine"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"status"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"writable"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}},"right":{"type":"Identifier","name":"RealNavigatorOnline"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit the correct event based on whether there is a network connection"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"offlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"backOnlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-offline"},{"type":"Identifier","name":"offlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-online"},{"type":"Identifier","name":"onlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"back-online"},{"type":"Identifier","name":"backOnlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"info"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a string based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a object based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]},{"type":"StringLiteral","value":"warning"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"warning"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set an info message to be displayed for a period of time before hiding"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"done"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":100}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"done"},"arguments":[]}}],"directives":[]}},{"type":"NumericLiteral","value":110}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should hide an info message"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should support multiple messages"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"But this is another one"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"createUpload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should assign the specified files to a new upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUploadsState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentUploads"}}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploadsState"},"computed":true,"property":{"type":"Identifier","name":"uploadId"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"currentUploadsState"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"i18n"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"merges in custom locale strings"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"test"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"beep boop"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pluralize"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"NumericLiteral","value":0}}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"%{file} exceeds maximum allowed size of %{size}"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"test"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"default restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be merged with supplied restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"minNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"log"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function, even if debug: true"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log to console when logger: Uppy.debugLogger or debug: true is set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"debugLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only log errors to console when logger is not set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}},"packages/@uppy/core/src/Uppy.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Translator"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"ee"}}],"source":{"type":"StringLiteral","value":"namespace-emitter"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"nanoid"},"importKind":"value","local":{"type":"Identifier","name":"nanoid"}}],"source":{"type":"StringLiteral","value":"nanoid/non-secure"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"throttle"}}],"source":{"type":"StringLiteral","value":"lodash/throttle.js"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"DefaultStore"}}],"source":{"type":"StringLiteral","value":"@uppy/store-default"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"getFileType"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/getFileType"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"getFileNameAndExtension"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/getFileNameAndExtension"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"getSafeFileId"},"importKind":"value","local":{"type":"Identifier","name":"getSafeFileId"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/generateFileID"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"MinimalRequiredUppyFile"},"importKind":"value","local":{"type":"Identifier","name":"MinimalRequiredUppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"CompanionFile"},"importKind":"value","local":{"type":"Identifier","name":"CompanionFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/CompanionFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"CompanionClientProvider"},"importKind":"value","local":{"type":"Identifier","name":"CompanionClientProvider"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"CompanionClientSearchProvider"},"importKind":"value","local":{"type":"Identifier","name":"CompanionClientSearchProvider"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/CompanionClientProvider"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"FileProgressNotStarted"},"importKind":"value","local":{"type":"Identifier","name":"FileProgressNotStarted"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"FileProgressStarted"},"importKind":"value","local":{"type":"Identifier","name":"FileProgressStarted"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/FileProgress"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Locale"},"importKind":"value","local":{"type":"Identifier","name":"Locale"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"I18n"},"importKind":"value","local":{"type":"Identifier","name":"I18n"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"OptionalPluralizeLocale"},"importKind":"value","local":{"type":"Identifier","name":"OptionalPluralizeLocale"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"supportsUploadProgress"}}],"source":{"type":"StringLiteral","value":"./supportsUploadProgress.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"getFileName"}}],"source":{"type":"StringLiteral","value":"./getFileName.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"justErrorsLogger"},"importKind":"value","local":{"type":"Identifier","name":"justErrorsLogger"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"debugLogger"},"importKind":"value","local":{"type":"Identifier","name":"debugLogger"}}],"source":{"type":"StringLiteral","value":"./loggers.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Restricter"},"importKind":"value","local":{"type":"Identifier","name":"Restricter"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"defaultOptions"},"importKind":"value","local":{"type":"Identifier","name":"defaultRestrictionOptions"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"RestrictionError"},"importKind":"value","local":{"type":"Identifier","name":"RestrictionError"}}],"source":{"type":"StringLiteral","value":"./Restricter.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"packageJson"}}],"source":{"type":"StringLiteral","value":"../package.json"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"locale"}}],"source":{"type":"StringLiteral","value":"./locale.ts"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}}],"source":{"type":"StringLiteral","value":"./BasePlugin.ts"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Restrictions"},"importKind":"value","local":{"type":"Identifier","name":"Restrictions"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"ValidateableFile"},"importKind":"value","local":{"type":"Identifier","name":"ValidateableFile"}}],"source":{"type":"StringLiteral","value":"./Restricter.ts"}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Processor"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnknownKeyword"}]}},{"type":"TSVoidKeyword"}]}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FileRemoveReason"},"typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"user"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"cancel-all"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"unmount"}}]}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"LogLevel"},"typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"info"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"warning"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"error"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"success"}}]}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}},{"type":"TSTypeParameter","name":"PluginState","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}},"default":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"BasePlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PluginState"}}]}}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownProviderPluginState"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"authenticated"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSBooleanKeyword"},{"type":"TSUndefinedKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"breadcrumbs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"requestPath"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"didFirstRender"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"currentSelection"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"filterInput"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"loading"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSBooleanKeyword"},{"type":"TSStringKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"folders"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isSearchVisible"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownProviderPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownProviderPluginState"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onFirstRender"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"title"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"icon"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"TSQualifiedName","left":{"type":"Identifier","name":"JSX"},"right":{"type":"Identifier","name":"Element"}}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"provider"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionClientProvider"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"storage"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"getItem"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}]}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"setItem"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"value","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"removeItem"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}}}}}}]}}}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownSearchProviderPluginState"},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isInputMode"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"searchTerm"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownProviderPluginState"}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"loading"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"folders"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentSelection"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"filterInput"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"didFirstRender"}}]}]}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownSearchProviderPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownSearchProviderPluginState"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onFirstRender"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"title"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"icon"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"TSQualifiedName","left":{"type":"Identifier","name":"JSX"},"right":{"type":"Identifier","name":"Element"}}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"provider"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionClientSearchProvider"}}}}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"successful"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"failed"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadID"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnknownKeyword"}}}]}}},{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fileIDs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"step"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}},{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"Plugins"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}},{"type":"TSUndefinedKeyword"}]}]}}],"body":{"type":"TSInterfaceBody","body":[]}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"capabilities"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isMobileDevice"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"darkMode"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"recoveredState"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNullKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Required"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentUploads"}}]}]}}]}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"info"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Array"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isHidden"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"type"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"LogLevel"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}},{"type":"TSNullKeyword"}]}}}]}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"plugins"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Plugins"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"totalProgress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"companion"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"autoProceed"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowMultipleUploads"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"logger"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"debugLogger"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"debug"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restrictions"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"currentFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSBooleanKeyword"},{"type":"TSUndefinedKeyword"}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},{"type":"TSBooleanKeyword"}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"locale"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"store"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefaultStore"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"infoTimeout"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyOptionsWithOptionalRestrictions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"restrictions"}}]}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restrictions"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}]}}}}]}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"MinimalRequiredOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"locale"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"meta"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"restrictions"}}]}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"locale"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"OptionalPluralizeLocale"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restrictions"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}]}}}}]}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Required"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"GenericEventCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FileAddedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FilesAddedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FileRemovedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"reason","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fileIDs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ProgressCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PreProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"preprocess"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PostProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"postprocess"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ProcessCompleteCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"preprocess"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadPauseCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"id"}}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"isPaused","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadStartCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadStartedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadProgressCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadSuccessCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"response","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"response"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadCompleteCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ErrorCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"Identifier","name":"file","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"response","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"response"}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadErrorCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"Identifier","name":"response","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"response"}}}]}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"uploadURL"}}]}},{"type":"TSUndefinedKeyword"}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadStalledCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadRetryCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"RetryAllCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"RestrictionFailedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"StateUpdateCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"prevState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"nextState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"patch","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"CancelAllCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"reason","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PluginCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"_UppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"back-online"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"cancel-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CancelAllCallback"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadCompleteCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ErrorCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"file-added"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileAddedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"file-removed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemovedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"files-added"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FilesAddedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"info-hidden"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"info-visible"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"is-offline"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"is-online"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"pause-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"plugin-added"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PluginCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"plugin-remove"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PluginCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"postprocess-complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ProcessCompleteCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"postprocess-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PostProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"preprocess-complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ProcessCompleteCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"preprocess-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PreProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ProgressCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"reset-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"pluginData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restore-confirmed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restore-canceled"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restriction-failed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionFailedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"resume-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"retry-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RetryAllCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"state-update"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"StateUpdateCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"upload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadErrorCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-pause"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadPauseCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadProgressCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-retry"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadRetryCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-stalled"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadStalledCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-success"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadSuccessCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"DeprecatedUppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-start"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadStartCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-started"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadStartedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"_UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"DeprecatedUppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}],"body":{"type":"TSInterfaceBody","body":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultUploadState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[],"source":null,"declaration":{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Uppy"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":null,"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":true,"key":{"type":"Identifier","name":"VERSION"},"computed":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"packageJson"},"computed":false,"property":{"type":"Identifier","name":"version"}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}}},"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"create"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}},"value":null},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"storeUnsubscribe"}},"value":null},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}},"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"ee"},"arguments":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Set"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}]}}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Set"},"arguments":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Set"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}]}}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Set"},"arguments":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Set"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}]}}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Set"},"arguments":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"defaultLocale"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"opts"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"store"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"store"}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"i18n"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"i18nArray"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Translator"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"translateArray"}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"scheduledAutoProceed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ReturnType"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"setTimeout"}}]}},{"type":"TSNullKeyword"}]}},"value":{"type":"NullLiteral"}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"wasOffline"},"computed":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptionsWithOptionalRestrictions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"defaultLocale"}},"right":{"type":"TSAsExpression","expression":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"locale"},"typeAnnotation":{"type":"TSAnyKeyword"}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"uppy"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"autoProceed"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"defaultRestrictionOptions"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"files"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"hasOwn"}},"arguments":[{"type":"Identifier","name":"files"},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"Identifier","name":"files"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"DefaultStore"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"justErrorsLogger"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"infoTimeout"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"merged"},"init":{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"restrictions"}}]}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"merged"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"TSAsExpression","expression":{"type":"MemberExpression","object":{"type":"Identifier","name":"defaultOptions"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}}},{"type":"SpreadElement","argument":{"type":"LogicalExpression","left":{"type":"Identifier","name":"opts"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}}]}}]}}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"opts"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"logger"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"debug"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`."},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]},"alternate":{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"opts"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"debug"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"right":{"type":"Identifier","name":"debugLogger"}}}],"directives":[]},"alternate":null}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"Uppy"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Using Core v","cooked":"Using Core v"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nInit"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"store"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultUploadState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"supportsUploadProgress"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"meta"}}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"Restricter"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}}},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}}}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"storeUnsubscribe"}}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"subscribe"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"prevState"},{"type":"Identifier","name":"nextState"},{"type":"Identifier","name":"patch"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"prevState"},{"type":"Identifier","name":"nextState"},{"type":"Identifier","name":"patch"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"updateAll"}},"arguments":[{"type":"Identifier","name":"nextState"}]}}],"directives":[]}}]}}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"window"}},"operator":"!==","right":{"type":"StringLiteral","value":"undefined"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ThisExpression"}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"addListeners"}}},"arguments":[]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"emit"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"T","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}}},{"type":"RestElement","argument":{"type":"Identifier","name":"args"},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Parameters"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"SpreadElement","argument":{"type":"Identifier","name":"args"}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"on"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"K","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}},{"type":"Identifier","name":"callback","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"Identifier","name":"callback"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"once"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"K","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}},{"type":"Identifier","name":"callback","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"Identifier","name":"callback"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"off"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"K","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}},{"type":"Identifier","name":"callback","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"off"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"Identifier","name":"callback"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"updateAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"state","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"update"}},"arguments":[{"type":"Identifier","name":"state"}]}}],"directives":[]}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"patch","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"patch"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"patchFilesState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"filesWithNewState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"existingFilesState"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"existingFilesState"}},{"type":"SpreadElement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"fromEntries"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"entries"}},"arguments":[{"type":"Identifier","name":"filesWithNewState"}]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"fileID"},{"type":"Identifier","name":"newFileState"}]}],"body":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"fileID"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFilesState"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"newFileState"}}]}]}}]}]}}]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setFileState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"state","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"fileID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Can’t set state for ","cooked":"Can’t set state for "},"tail":false},{"type":"TemplateElement","value":{"raw":" (the file could have been removed)","cooked":" (the file could have been removed)"},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"patchFilesState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"fileID"},"shorthand":false,"value":{"type":"Identifier","name":"state"}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"i18nInit"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onMissingKey"},"init":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"key"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Missing i18n string: ","cooked":"Missing i18n string: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"StringLiteral","value":"error"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"translator"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Translator"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"defaultLocale"}},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"locale"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onMissingKey"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"onMissingKey"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"translator"},"computed":false,"property":{"type":"Identifier","name":"translate"}},"computed":false,"property":{"type":"Identifier","name":"bind"}},"arguments":[{"type":"Identifier","name":"translator"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nArray"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"translator"},"computed":false,"property":{"type":"Identifier","name":"translateArray"}},"computed":false,"property":{"type":"Identifier","name":"bind"}},"arguments":[{"type":"Identifier","name":"translator"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"locale"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"translator"},"computed":false,"property":{"type":"Identifier","name":"locale"}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setOptions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"newOpts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"MinimalRequiredOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}}},{"type":"SpreadElement","argument":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"newOpts"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}},{"type":"SpreadElement","argument":{"type":"TSAsExpression","expression":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"},"optional":true},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}}}]}}]}}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"meta"}}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nInit"}},"arguments":[]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"locale"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"Identifier","name":"newOpts"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"undefined"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"resetProgress"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultProgress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressNotStarted"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"bytesTotal"}}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultProgress"}}]}}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultUploadState"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"reset-progress"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"clearUploadedFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultUploadState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addPreProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"add"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removePreProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"delete"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addPostProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"add"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removePostProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"delete"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addUploader"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}}},"computed":false,"property":{"type":"Identifier","name":"add"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removeUploader"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}}},"computed":false,"property":{"type":"Identifier","name":"delete"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setMeta"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedMeta"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"Adding metadata:"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"data"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedMeta"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setFileMeta"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"meta"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"Was trying to set metadata for a file that has been removed: "},{"type":"Identifier","name":"fileID"}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newMeta"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"newMeta"}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"Identifier","name":"fileID"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"files"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getFilesByIds"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"ids","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ids"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getObjectOfFilesPerState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"newFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"startedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadStartedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"pausedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"completeFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"erroredFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"inProgressNotPausedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"processingFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUploadStarted"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isAllComplete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isAllErrored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isAllPaused"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUploadInProgress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isSomeGhost"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"filesObject"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"totalProgress"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"totalProgress"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"error"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"filesObject"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"progress"}}]}],"body":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"progress"},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"progress"},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"startedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadStartedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pausedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isPaused"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"completeFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"erroredFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressNotPausedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isPaused"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"processingFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"newFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"newFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"startedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"startedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStartedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadStartedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pausedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"pausedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"completeFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"completeFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"erroredFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"erroredFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"inProgressFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"inProgressNotPausedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"inProgressNotPausedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"processingFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"processingFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isUploadStarted"},"computed":false,"shorthand":false,"value":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadStartedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isAllComplete"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalProgress"},"operator":"===","right":{"type":"NumericLiteral","value":100}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"completeFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"processingFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isAllErrored"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"error"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"erroredFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isAllPaused"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"!==","right":{"type":"NumericLiteral","value":0}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"pausedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isUploadInProgress"},"computed":false,"shorthand":false,"value":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isSomeGhost"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"some"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"errors","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isRestriction"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"errors"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"file"}},{"type":"TSAsExpression","expression":{"type":"Identifier","name":"error"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"error"},{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"file"}}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"error"},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"userFacingErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"maxNumToShow"},"init":{"type":"NumericLiteral","value":4}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"firstErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"userFacingErrors"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"Identifier","name":"maxNumToShow"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"additionalErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"userFacingErrors"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"Identifier","name":"maxNumToShow"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"firstErrors"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"details"},"right":{"type":"StringLiteral","value":""}}}]}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"details"}}]},{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"additionalErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"additionalRestrictionsFailed"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"count"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"additionalErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}}}]}]}}]}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateRestrictions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSNullKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validate"}},"arguments":[{"type":"Identifier","name":"files"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSAnyKeyword"}}}],"directives":[]}},"finalizer":null},{"type":"ReturnStatement","argument":{"type":"NullLiteral"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFieldsOnFile"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"missingFields"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"missingFields"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"error"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"getMissingRequiredMetaFields"}},"arguments":[{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"missingFields"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingRequiredMetaFields"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"missingFields"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"error"}]}},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":true}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFields"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"success"},"init":{"type":"BooleanLiteral","value":true}}],"kind":"let"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":null}],"kind":"const"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"files"}]},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFieldsOnFile"}}},"arguments":[{"type":"Identifier","name":"file"}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"success"},"right":{"type":"BooleanLiteral","value":false}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"success"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"assertNewUploadAllowed"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowNewUpload"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"allowNewUpload"},"operator":"===","right":{"type":"BooleanLiteral","value":false}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"noMoreFilesAllowed"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"error"}]}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"error"}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"checkIfFileAlreadyExists"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":true}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"transformFile"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileDescriptorOrFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"File"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"TSAsExpression","expression":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"fileDescriptorOrFile"},"operator":"instanceof","right":{"type":"Identifier","name":"File"}},"consequent":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileDescriptorOrFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileDescriptorOrFile"},"computed":false,"property":{"type":"Identifier","name":"type"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileDescriptorOrFile"},"computed":false,"property":{"type":"Identifier","name":"size"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileDescriptorOrFile"}}]},"alternate":{"type":"Identifier","name":"fileDescriptorOrFile"}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileType"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getFileType"},"arguments":[{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileName"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getFileName"},"arguments":[{"type":"Identifier","name":"fileType"},{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileExtension"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"getFileNameAndExtension"},"arguments":[{"type":"Identifier","name":"fileName"}]},"computed":false,"property":{"type":"Identifier","name":"extension"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSafeFileId"},"arguments":[{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"meta"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"operator":"||","right":{"type":"ObjectExpression","properties":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"meta"},"computed":false,"property":{"type":"Identifier","name":"name"}},"right":{"type":"Identifier","name":"fileName"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"meta"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"Identifier","name":"fileType"}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"size"},"init":{"type":"ConditionalExpression","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Number"},"computed":false,"property":{"type":"Identifier","name":"isFinite"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"data"}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"consequent":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"data"}},"computed":false,"property":{"type":"Identifier","name":"size"}},"alternate":{"type":"NullLiteral"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"source"}},"operator":"||","right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"id"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"Identifier","name":"fileExtension"},"operator":"||","right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"meta"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileType"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"data"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"TSSatisfiesExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"size"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressNotStarted"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"size"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isRemote"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isRemote"}},"operator":"||","right":{"type":"BooleanLiteral","value":false}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"operator":"||","right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preview"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"preview"}}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"startIfAutoProceed"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"autoProceed"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"scheduledAutoProceed"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"scheduledAutoProceed"}},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"scheduledAutoProceed"}},"right":{"type":"NullLiteral"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"stack"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"message"}}},"operator":"||","right":{"type":"Identifier","name":"err"}}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}}],"directives":[]}},{"type":"NumericLiteral","value":4}]}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"checkAndUpdateFileState"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"filesToAdd","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"errors"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"existingFiles"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nextFilesState"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"existingFiles"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validFilesToAdd","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errors","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileToAdd"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"filesToAdd"},"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"transformFile"}}},"arguments":[{"type":"Identifier","name":"fileToAdd"}]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isGhost"},"init":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"isGhost"},"optional":true}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"isGhost"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"existingFileState"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"newFile"},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"existingFileState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileToAdd"},"computed":false,"property":{"type":"Identifier","name":"data"}}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"name"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Replaced the blob in the restored ghost file: ","cooked":"Replaced the blob in the restored ghost file: "},"tail":false},{"type":"TemplateElement","value":{"raw":", ","cooked":", "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeFileAddedResult"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"onBeforeFileAdded"}},"arguments":[{"type":"Identifier","name":"newFile"},{"type":"Identifier","name":"nextFilesState"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"onBeforeFileAddedResult"}},"operator":"&&","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"checkIfFileAlreadyExists"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"noDuplicates"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileName"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileToAdd"}}]}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"onBeforeFileAddedResult"},"operator":"===","right":{"type":"BooleanLiteral","value":false}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"isGhost"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"StringLiteral","value":"Cannot add the file because onBeforeFileAdded returned false."},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileToAdd"}}]}]}}],"directives":[]},"alternate":{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"onBeforeFileAddedResult"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"Identifier","name":"onBeforeFileAddedResult"},"operator":"!==","right":{"type":"NullLiteral"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"newFile"},"right":{"type":"Identifier","name":"onBeforeFileAddedResult"}}}],"directives":[]},"alternate":null}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validateSingleFile"}},"arguments":[{"type":"Identifier","name":"newFile"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nextFilesState"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"Identifier","name":"newFile"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSAnyKeyword"}}]}}],"directives":[]}},"finalizer":null}],"directives":[]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validateAggregateRestrictions"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"existingFiles"}]},{"type":"Identifier","name":"validFilesToAdd"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSAnyKeyword"}}]}},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"existingFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errors"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]}}],"directives":[]}},"finalizer":null},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"nextFilesState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"validFilesToAdd"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errors"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"File"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"MinimalRequiredUppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"id"}}}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"assertNewUploadAllowed"}}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"file"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"nextFilesState"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"validFilesToAdd"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"errors"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkAndUpdateFileState"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"file"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"Identifier","name":"restrictionErrors"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"ThrowStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":true,"property":{"type":"NumericLiteral","value":0}}},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"nextFilesState"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"firstValidFileToAdd"}]},"init":{"type":"Identifier","name":"validFilesToAdd"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"firstValidFileToAdd"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"files-added"},{"type":"Identifier","name":"validFilesToAdd"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"name"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"type"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Added file: ","cooked":"Added file: "},"tail":false},{"type":"TemplateElement","value":{"raw":", ","cooked":", "},"tail":false},{"type":"TemplateElement","value":{"raw":", mime type: ","cooked":", mime type: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"startIfAutoProceed"}}},"arguments":[]}},{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"id"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileDescriptors","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"MinimalRequiredUppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"assertNewUploadAllowed"}}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"nextFilesState"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"validFilesToAdd"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"errors"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkAndUpdateFileState"}}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"fileDescriptors"},"typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"Identifier","name":"restrictionErrors"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nonRestrictionErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonRestrictionErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"message"},"init":{"type":"StringLiteral","value":"Multiple errors occurred while adding files:\n"}}],"kind":"let"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonRestrictionErrors"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"subError"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"message"},"right":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"subError"},"computed":false,"property":{"type":"Identifier","name":"message"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"\\n * ","cooked":"\n * "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"addBulkFilesFailed"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonRestrictionErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"message"}}]},{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"AggregateError"}},"operator":"===","right":{"type":"StringLiteral","value":"function"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"AggregateError"},"arguments":[{"type":"Identifier","name":"nonRestrictionErrors"},{"type":"Identifier","name":"message"}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"err"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"Identifier","name":"message"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"errors"}},"right":{"type":"Identifier","name":"nonRestrictionErrors"}}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"nextFilesState"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"files-added"},{"type":"Identifier","name":"validFilesToAdd"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":5}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"length"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Added batch of ","cooked":"Added batch of "},"tail":false},{"type":"TemplateElement","value":{"raw":" files","cooked":" files"},"tail":true}]}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"validFilesToAdd"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Added file: ","cooked":"Added file: "},"tail":false},{"type":"TemplateElement","value":{"raw":"\\n id: ","cooked":"\n id: "},"tail":false},{"type":"TemplateElement","value":{"raw":"\\n type: ","cooked":"\n type: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]}}]}}],"directives":[]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"startIfAutoProceed"}}},"arguments":[]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removeFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"reason","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedUploads"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUploads"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"removedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"create"}},"arguments":[{"type":"NullLiteral"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}}},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"fileIsNotRemoved"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadFileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFiles"},"computed":true,"property":{"type":"Identifier","name":"uploadFileID"}},"operator":"===","right":{"type":"Identifier","name":"undefined"}}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedUploads"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"Identifier","name":"fileIsNotRemoved"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"!==","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"length"}}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"capabilities"},"computed":false,"property":{"type":"Identifier","name":"individualCancellation"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"individualCancellation is disabled"}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"newFileIDs"}}]}}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stateUpdate","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedUploads"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdate"},"computed":false,"property":{"type":"Identifier","name":"allowNewUpload"}},"right":{"type":"BooleanLiteral","value":true}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdate"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"NullLiteral"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdate"},"computed":false,"property":{"type":"Identifier","name":"recoveredState"}},"right":{"type":"NullLiteral"}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"stateUpdate"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"removedFileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"removedFiles"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"file-removed"},{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},{"type":"Identifier","name":"reason"}]}}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":5}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Removed ","cooked":"Removed "},"tail":false},{"type":"TemplateElement","value":{"raw":" files","cooked":" files"},"tail":true}]}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"Removed files: ","cooked":"Removed files: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removeFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"reason","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"fileID"}]},{"type":"Identifier","name":"reason"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"pauseResume"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSBooleanKeyword"},{"type":"TSUndefinedKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"capabilities"}},"computed":false,"property":{"type":"Identifier","name":"resumableUploads"}}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"wasPaused"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"isPaused"}},"operator":"||","right":{"type":"BooleanLiteral","value":false}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isPaused"},"init":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"wasPaused"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"isPaused"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-pause"},{"type":"Identifier","name":"fileID"},{"type":"Identifier","name":"isPaused"}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"isPaused"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"pauseAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressUpdatedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressUpdatedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"right":{"type":"Identifier","name":"updatedFile"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"pause-all"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"resumeAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressUpdatedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressUpdatedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"right":{"type":"Identifier","name":"updatedFile"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"resume-all"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"retryAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesToRetry"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"error"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesToRetry"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"right":{"type":"Identifier","name":"updatedFile"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"retry-all"},{"type":"Identifier","name":"filesToRetry"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesToRetry"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"Identifier","name":"filesToRetry"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"cancelAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"AssignmentPattern","left":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"reason"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"reason"},"right":{"type":"StringLiteral","value":"user"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}]}}},"right":{"type":"ObjectExpression","properties":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"reason"}}]}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"reason"},"operator":"===","right":{"type":"StringLiteral","value":"user"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"Identifier","name":"fileIDs"},{"type":"StringLiteral","value":"cancel-all"}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"defaultUploadState"}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"retryUpload"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-retry"},{"type":"Identifier","name":"fileID"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"fileID"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"logout"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"EmptyStatement"},{"type":"ExpressionStatement","expression":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"plugin"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownProviderPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"computed":false,"property":{"type":"Identifier","name":"provider"}},"computed":false,"property":{"type":"Identifier","name":"logout"},"optional":true},"optional":true,"arguments":[]}}],"directives":[]}}]}}],"directives":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"calculateProgress"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"throttle"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"data"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileInState"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"fileInState"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileInState"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"percentage"}},"operator":"===","right":{"type":"NumericLiteral","value":100}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been already uploaded: ","cooked":"Not setting progress for a file that has been already uploaded: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"canHavePercentage"},"init":{"type":"LogicalExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Number"},"computed":false,"property":{"type":"Identifier","name":"isFinite"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}]},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":">","right":{"type":"NumericLiteral","value":0}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileInState"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"canHavePercentage"},"consequent":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Math"},"computed":false,"property":{"type":"Identifier","name":"round"}},"arguments":[{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}},"operator":"/","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}},"operator":"*","right":{"type":"NumericLiteral","value":100}}]},"alternate":{"type":"NumericLiteral","value":0}}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}}],"directives":[]}},{"type":"NumericLiteral","value":500},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"leading"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"trailing"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"calculateTotalProgress"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgress"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}}],"directives":[]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sizedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":"!=","right":{"type":"NullLiteral"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"unsizedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":"==","right":{"type":"NullLiteral"}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"progressMax"},"init":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"*","right":{"type":"NumericLiteral","value":100}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentProgress"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"unsizedFiles"},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"acc"},{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"Identifier","name":"acc"},"operator":"+","right":{"type":"TSAsExpression","expression":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"percentage"}},"typeAnnotation":{"type":"TSNumberKeyword"}}}}],"directives":[]}},{"type":"NumericLiteral","value":0}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalProgress"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Math"},"computed":false,"property":{"type":"Identifier","name":"round"}},"arguments":[{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"currentProgress"},"operator":"/","right":{"type":"Identifier","name":"progressMax"}},"operator":"*","right":{"type":"NumericLiteral","value":100}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"totalProgress"}}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalSize"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"acc"},{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"TSAsExpression","expression":{"type":"BinaryExpression","left":{"type":"Identifier","name":"acc"},"operator":"+","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":"??","right":{"type":"NumericLiteral","value":0}}},"typeAnnotation":{"type":"TSNumberKeyword"}}}],"directives":[]}},{"type":"NumericLiteral","value":0}]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"averageSize"},"init":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalSize"},"operator":"/","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"totalSize"},"right":{"type":"BinaryExpression","left":{"type":"Identifier","name":"averageSize"},"operator":"*","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"unsizedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadedSize"},"init":{"type":"NumericLiteral","value":0}}],"kind":"let"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"uploadedSize"},"right":{"type":"TSAsExpression","expression":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}},"typeAnnotation":{"type":"TSNumberKeyword"}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"unsizedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"uploadedSize"},"right":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"averageSize"},"operator":"*","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"percentage"}},"operator":"||","right":{"type":"NumericLiteral","value":0}}},"operator":"/","right":{"type":"NumericLiteral","value":100}}}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalProgress"},"init":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalSize"},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"NumericLiteral","value":0},"alternate":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Math"},"computed":false,"property":{"type":"Identifier","name":"round"}},"arguments":[{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"uploadedSize"},"operator":"/","right":{"type":"Identifier","name":"totalSize"}},"operator":"*","right":{"type":"NumericLiteral","value":100}}]}}}],"kind":"let"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalProgress"},"operator":">","right":{"type":"NumericLiteral","value":100}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"totalProgress"},"right":{"type":"NumericLiteral","value":100}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"totalProgress"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"Identifier","name":"totalProgress"}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"addListeners"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorHandler","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"error"}}}}},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"response"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorMsg"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}},"operator":"||","right":{"type":"StringLiteral","value":"Unknown error"}}}],"kind":"let"},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"errorMsg"},"right":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}}],"quasis":[{"type":"TemplateElement","value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"errorMsg"}}]}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"in","right":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"errorMsg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"response"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"response"}}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"errorHandler"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"error"},{"type":"Identifier","name":"response"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"errorHandler"},"arguments":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"response"}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"error"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}},{"type":"StringLiteral","value":"error"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newError"},"init":{"type":"TSAsExpression","expression":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"failedToUpload"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"},"optional":true},"operator":"??","right":{"type":"StringLiteral","value":""}}}]}]}]},"typeAnnotation":{"type":"TSAnyKeyword"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newError"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}},"right":{"type":"BooleanLiteral","value":true}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newError"},"computed":false,"property":{"type":"Identifier","name":"details"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}}}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newError"},"computed":false,"property":{"type":"Identifier","name":"details"}},"right":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}}],"quasis":[{"type":"TemplateElement","value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newError"}]}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"error"}]}]}}],"directives":[]}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ReturnType"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"setTimeout"}}]}},{"type":"TSNullKeyword"}]}}},"init":{"type":"NullLiteral"}}],"kind":"let"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-stalled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"message"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}}]},"init":{"type":"Identifier","name":"error"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"details"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"computed":false,"property":{"type":"Identifier","name":"name"}}}]},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"details"}}]},{"type":"StringLiteral","value":"warning"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted"},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted"},"right":{"type":"NullLiteral"}}}],"directives":[]}},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"message"},{"type":"Identifier","name":"details"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},"computed":false,"property":{"type":"Identifier","name":"trim"}},"arguments":[]},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUploadStarted"},"init":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesFiltered"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"exists"},"init":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"exists"}},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"exists"}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesState"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"fromEntries"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesFiltered"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"ArrayExpression","elements":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Date"},"computed":false,"property":{"type":"Identifier","name":"now"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}}}}]}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"patchFilesState"}},"arguments":[{"type":"Identifier","name":"filesState"}]}}],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-started"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"onUploadStarted"},"arguments":[{"type":"Identifier","name":"files"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"uploadResp"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentProgress"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentProgress"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"indeterminate"}}]},"alternate":{"type":"Identifier","name":"undefined"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentProgress"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"response"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadResp"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadURL"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadResp"},"computed":false,"property":{"type":"Identifier","name":"uploadURL"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadResp"},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentProgress"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}}}]}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"preprocess-progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"progress"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preprocess"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"progress"}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"progress"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"progress"}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restored"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"dashboard:file-edit-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"Identifier","name":"file"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFieldsOnFile"}}},"arguments":[{"type":"Identifier","name":"file"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"window"}},"operator":"!==","right":{"type":"StringLiteral","value":"undefined"}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"addEventListener"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"addEventListener"}},"arguments":[{"type":"StringLiteral","value":"online"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"addEventListener"}},"arguments":[{"type":"StringLiteral","value":"offline"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}},{"type":"NumericLiteral","value":3000}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"updateOnlineStatus"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"online"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}},"operator":"??","right":{"type":"BooleanLiteral","value":true}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"online"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"is-offline"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"noInternetConnection"}]},{"type":"StringLiteral","value":"error"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"wasOffline"}},"right":{"type":"BooleanLiteral","value":true}}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"is-online"}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"wasOffline"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"back-online"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"connectedToInternet"}]},{"type":"StringLiteral","value":"success"},{"type":"NumericLiteral","value":3000}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"wasOffline"}},"right":{"type":"BooleanLiteral","value":false}}}],"directives":[]},"alternate":null}],"directives":[]}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}},"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"computed":false,"property":{"type":"Identifier","name":"bind"}},"arguments":[{"type":"ThisExpression"}]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getID"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"use"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"T","constraint":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"BasePlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"Plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ConstructorParameters"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":1}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"Plugin"}},"operator":"!==","right":{"type":"StringLiteral","value":"function"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"msg"},"init":{"type":"BinaryExpression","left":{"type":"TemplateLiteral","expressions":[{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"Plugin"},"operator":"===","right":{"type":"NullLiteral"}},"consequent":{"type":"StringLiteral","value":"null"},"alternate":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"Plugin"}}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Expected a plugin class, but got ","cooked":"Expected a plugin class, but got "},"tail":false},{"type":"TemplateElement","value":{"raw":".","cooked":"."},"tail":true}]},"operator":"+","right":{"type":"StringLiteral","value":" Please verify that the plugin was imported and spelled correctly."}}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"TypeError"},"arguments":[{"type":"Identifier","name":"msg"}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Plugin"},"arguments":[{"type":"ThisExpression"},{"type":"Identifier","name":"opts"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pluginId"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"id"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"pluginId"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Your plugin must have an id"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Your plugin must have a type"}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"existsPluginAlready"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"Identifier","name":"pluginId"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"existsPluginAlready"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"msg"},"init":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"existsPluginAlready"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Already found a plugin named '","cooked":"Already found a plugin named '"},"tail":false},{"type":"TemplateElement","value":{"raw":"'. ","cooked":"'. "},"tail":true}]},"operator":"+","right":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"pluginId"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Tried to use: '","cooked":"Tried to use: '"},"tail":false},{"type":"TemplateElement","value":{"raw":"'.\\n","cooked":"'.\n"},"tail":true}]}},"operator":"+","right":{"type":"StringLiteral","value":"Uppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id."}}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"Identifier","name":"msg"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"Plugin"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"pluginId"},{"type":"MemberExpression","object":{"type":"Identifier","name":"Plugin"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Using ","cooked":"Using "},"tail":false},{"type":"TemplateElement","value":{"raw":" v","cooked":" v"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}},"operator":"in","right":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"plugin"}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"right":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"plugin"}]}}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"install"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"plugin-added"},{"type":"Identifier","name":"plugin"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getPlugin"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugins"},"init":null}],"kind":"const"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}}]},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"foundPlugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugins"},"computed":false,"property":{"type":"Identifier","name":"find"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"===","right":{"type":"Identifier","name":"id"}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"foundPlugin"},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"ReturnStatement","argument":{"type":"Identifier","name":"foundPlugin"}},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}},{"type":"ClassMethod","accessibility":"private","static":false,"computed":true,"key":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"type","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"Identifier","name":"type"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"iteratePlugins"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"method","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}}]},"computed":false,"property":{"type":"Identifier","name":"flat"}},"arguments":[{"type":"NumericLiteral","value":1}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"Identifier","name":"method"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removePlugin"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"instance","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Removing plugin ","cooked":"Removing plugin "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"plugin-remove"},{"type":"Identifier","name":"instance"}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"arguments":[]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"list"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"type"}}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"index"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"findIndex"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"item"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"item"},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"id"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"index"},"operator":"!==","right":{"type":"UnaryExpression","operator":"-","prefix":true,"argument":{"type":"NumericLiteral","value":1}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"splice"}},"arguments":[{"type":"Identifier","name":"index"},{"type":"NumericLiteral","value":1}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"plugins"}}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"id"}},"shorthand":false,"value":{"type":"Identifier","name":"undefined"}}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"updatedState"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"close"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"AssignmentPattern","left":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"reason"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"reason"}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}]},{"type":"TSUndefinedKeyword"}]}}},"right":{"type":"ObjectExpression","properties":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Closing Uppy instance ","cooked":"Closing Uppy instance "},"tail":false},{"type":"TemplateElement","value":{"raw":": removing all files and uninstalling plugins","cooked":": removing all files and uninstalling plugins"},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"reason"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"storeUnsubscribe"}}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"removePlugin"}},"arguments":[{"type":"Identifier","name":"plugin"}]}}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"window"}},"operator":"!==","right":{"type":"StringLiteral","value":"undefined"}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"removeEventListener"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"removeEventListener"}},"arguments":[{"type":"StringLiteral","value":"online"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"removeEventListener"}},"arguments":[{"type":"StringLiteral","value":"offline"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"hideInfo"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"info"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"info"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"info"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"info"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}}]}}}]}]}}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"type","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"LogLevel"}}}},"right":{"type":"StringLiteral","value":"info"}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"duration"},"right":{"type":"NumericLiteral","value":3000}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isComplexMessage"},"init":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"message"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"type"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"isComplexMessage"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"message"},"computed":false,"property":{"type":"Identifier","name":"message"}},"alternate":{"type":"Identifier","name":"message"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"isComplexMessage"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"message"},"computed":false,"property":{"type":"Identifier","name":"details"}},"alternate":{"type":"NullLiteral"}}}]}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"Identifier","name":"duration"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"info-visible"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"log"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}]}}},{"type":"Identifier","name":"type","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"logger"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"logger"}}]},"init":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}}}],"kind":"const"},{"type":"SwitchStatement","discriminant":{"type":"Identifier","name":"type"},"cases":[{"type":"SwitchCase","consequent":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"logger"},"computed":false,"property":{"type":"Identifier","name":"error"}},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"BreakStatement","label":null}],"test":{"type":"StringLiteral","value":"error"}},{"type":"SwitchCase","consequent":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"logger"},"computed":false,"property":{"type":"Identifier","name":"warn"}},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"BreakStatement","label":null}],"test":{"type":"StringLiteral","value":"warning"}},{"type":"SwitchCase","consequent":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"logger"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"BreakStatement","label":null}],"test":null}]}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"requestClientById"}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Map"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]},"arguments":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"registerRequestClient"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"client","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnknownKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"requestClientById"}}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"Identifier","name":"id"},{"type":"Identifier","name":"client"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getRequestClientForFile"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"Client"}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Client"}}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}}},"consequent":{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Tried to get RequestClient for a non-remote file ","cooked":"Tried to get RequestClient for a non-remote file "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"requestClient"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"requestClientById"}}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"requestClientId"}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"requestClient"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"requestClientId"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"requestClientId \"","cooked":"requestClientId \""},"tail":false},{"type":"TemplateElement","value":{"raw":"\" not registered for file \"","cooked":"\" not registered for file \""},"tail":false},{"type":"TemplateElement","value":{"raw":"\"","cooked":"\""},"tail":true}]}]}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"requestClient"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Client"}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"restore"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"uploadID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Core: attempting to restore upload \"","cooked":"Core: attempting to restore upload \""},"tail":false},{"type":"TemplateElement","value":{"raw":"\"","cooked":"\""},"tail":true}]}]}},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"reject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Nonexistent upload"}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"opts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}}},"right":{"type":"ObjectExpression","properties":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"forceAllowNewUpload"},"right":{"type":"BooleanLiteral","value":false}}}]},"init":{"type":"Identifier","name":"opts"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowNewUpload"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"allowNewUpload"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"forceAllowNewUpload"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Cannot create a new upload: already uploading."}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"nanoid"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadID"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"fileIDs"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploadBatches"}},"operator":"!==","right":{"type":"BooleanLiteral","value":false}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploads"}},"operator":"!==","right":{"type":"BooleanLiteral","value":false}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUploads"}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"uploadID"},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"fileIDs"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}}]}}]}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"uploadID"}}],"directives":[]}},{"type":"ClassMethod","accessibility":"private","static":false,"computed":true,"key":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"RestElement","argument":{"type":"Identifier","name":"args"},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"args"}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"getUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addResultData"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"result"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"getUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"uploadID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting result for an upload that has been removed: ","cooked":"Not setting result for an upload that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUpload"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"result"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUploads"}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"uploadID"},"shorthand":false,"value":{"type":"Identifier","name":"currentUpload"}}]}}]}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUploads"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}},"computed":false,"kind":"method","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"getCurrentUpload"},"init":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}],"directives":[]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUpload"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getCurrentUpload"},"arguments":[]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"steps"},"init":{"type":"ArrayExpression","elements":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}}}},{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}}}},{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}}}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ForStatement","init":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"step"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"step"}},"operator":"||","right":{"type":"NumericLiteral","value":0}}}],"kind":"let"},"test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"step"},"operator":"<","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"steps"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"update":{"type":"UpdateExpression","operator":"++","prefix":false,"argument":{"type":"Identifier","name":"step"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"currentUpload"}},"consequent":{"type":"BlockStatement","body":[{"type":"BreakStatement","label":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fn"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"steps"},"computed":true,"property":{"type":"Identifier","name":"step"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"uploadID"},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUpload"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"step"}}]}}]}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"fileIDs"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"fileIDs"}}]},"init":{"type":"Identifier","name":"currentUpload"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"fn"},"arguments":[{"type":"Identifier","name":"fileIDs"},{"type":"Identifier","name":"uploadID"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"currentUpload"},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"getCurrentUpload"},"arguments":[]}}}],"directives":[]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}},"finalizer":null},{"type":"IfStatement","test":{"type":"Identifier","name":"currentUpload"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"file"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"successful"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"failed"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"successful"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"failed"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadID"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadID"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"currentUpload"},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"getCurrentUpload"},"arguments":[]}}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"result"},"init":null}],"kind":"let"},{"type":"IfStatement","test":{"type":"Identifier","name":"currentUpload"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"result"},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"result"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"complete"},{"type":"Identifier","name":"result"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"result"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"uploadID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting result for an upload that has been removed: ","cooked":"Not setting result for an upload that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"result"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"upload"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"StringLiteral","value":"uploader"}},"computed":false,"property":{"type":"Identifier","name":"length"},"optional":true}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"No uploader type plugins are used"},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeUploadResult"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"onBeforeUpload"}},"arguments":[{"type":"Identifier","name":"files"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"onBeforeUploadResult"},"operator":"===","right":{"type":"BooleanLiteral","value":false}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"reject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Not starting the upload because onBeforeUpload returned false"}]}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"onBeforeUploadResult"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"onBeforeUploadResult"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"files"},"right":{"type":"Identifier","name":"onBeforeUploadResult"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validateMinNumberOfFiles"}},"arguments":[{"type":"Identifier","name":"files"}]}}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"err"}]}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFields"}}},"arguments":[{"type":"Identifier","name":"files"}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"missingRequiredMetaField"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentlyUploadingFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"currentUploads"}]},"computed":false,"property":{"type":"Identifier","name":"flatMap"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"curr"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"curr"},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"waitingFileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentlyUploadingFiles"},"computed":false,"property":{"type":"Identifier","name":"indexOf"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"operator":"===","right":{"type":"UnaryExpression","operator":"-","prefix":true,"argument":{"type":"NumericLiteral","value":1}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"waitingFileIDs"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"Identifier","name":"waitingFileIDs"}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"err"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"err"},{"type":"StringLiteral","value":"error"}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}]}}],"directives":[]}}]}}},{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"Identifier","name":"Uppy"}}],"directives":[]}}},"after":{"packages/@uppy/core/src/Restricter.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"match"}}],"source":{"type":"StringLiteral","value":"mime-match"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Translator"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"I18n"},"importKind":"value","local":{"type":"Identifier","name":"I18n"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"NonNullableUppyOptions"},"importKind":"value","local":{"type":"Identifier","name":"NonNullableUppyOptions"}}],"source":{"type":"StringLiteral","value":"./Uppy"}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Restrictions"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"type"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"extension"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"size"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"name"}}]}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isGhost"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"Error"},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"file"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}},"right":{"type":"LogicalExpression","left":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"},"optional":true},"operator":"??","right":{"type":"BooleanLiteral","value":true}}}},{"type":"IfStatement","test":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"},"optional":true},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"file"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"}}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isRestriction"},"computed":false,"value":{"type":"BooleanLiteral","value":true}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Restricter"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":null,"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"i18n"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Translator"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"translate"}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"getOpts"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"getOpts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}},{"type":"Identifier","name":"i18n","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"right":{"type":"Identifier","name":"i18n"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"right":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"opts"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getOpts"},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"},"optional":true},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Array"},"computed":false,"property":{"type":"Identifier","name":"isArray"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"TypeError"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"opts"}}],"directives":[]}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateAggregateRestrictions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxTotalFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"maxNumberOfFiles"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nonGhostFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"f"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonGhostFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"+","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"operator":">","right":{"type":"Identifier","name":"maxNumberOfFiles"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"Identifier","name":"maxTotalFileSize"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalFilesSize"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"total"},{"type":"Identifier","name":"f"}],"body":{"type":"TSAsExpression","expression":{"type":"BinaryExpression","left":{"type":"Identifier","name":"total"},"operator":"+","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"??","right":{"type":"NumericLiteral","value":0}}},"typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"NumericLiteral","value":0}]}}],"kind":"let"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"addingFile"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"addingFiles"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"totalFilesSize"},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"size"}}}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalFilesSize"},"operator":">","right":{"type":"Identifier","name":"maxTotalFileSize"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxTotalFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null}],"directives":[]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateSingleFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowedFileTypes"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"allowedFileTypes"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isCorrectFileType"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"some"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"type"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"includes"}},"arguments":[{"type":"StringLiteral","value":"/"}]},"consequent":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"consequent":{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"match"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":";.*?$","flags":""},{"type":"StringLiteral","value":""}]},{"type":"Identifier","name":"type"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":true,"property":{"type":"NumericLiteral","value":0}},"operator":"===","right":{"type":"StringLiteral","value":"."}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]},"operator":"===","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]}}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"isCorrectFileType"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"allowedFileTypesString"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadFileTypes"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"types"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"allowedFileTypesString"}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"maxFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":">","right":{"type":"Identifier","name":"maxFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"<","right":{"type":"Identifier","name":"minFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"inferiorSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"minFileSize"}]}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validate"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"addingFile"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateSingleFile"}},"arguments":[{"type":"Identifier","name":"addingFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateAggregateRestrictions"}},"arguments":[{"type":"Identifier","name":"existingFiles"},{"type":"Identifier","name":"addingFiles"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateMinNumberOfFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minNumberOfFiles"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"<","right":{"type":"Identifier","name":"minNumberOfFiles"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"youHaveToAtLeastSelectX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getMissingRequiredMetaFields"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}}]}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"missingFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"missingRequiredMetaFieldOnFile"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileName"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"requiredMetaFields"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"missingFields","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"field"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"requiredMetaFields"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"hasOwn"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},{"type":"Identifier","name":"field"}]}},"operator":"||","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"computed":true,"property":{"type":"Identifier","name":"field"}},"operator":"===","right":{"type":"StringLiteral","value":""}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"missingFields"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"field"}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingFields"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"missingFields"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]}}],"directives":[]}}]}},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[{"type":"ExportSpecifier","local":{"type":"Identifier","name":"Restricter"},"exportKind":"value","exported":{"type":"Identifier","name":"Restricter"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"defaultOptions"},"exportKind":"value","exported":{"type":"Identifier","name":"defaultOptions"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"RestrictionError"},"exportKind":"value","exported":{"type":"Identifier","name":"RestrictionError"}}],"source":null,"declaration":null}],"directives":[]}},"packages/@uppy/core/src/Uppy.test.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"afterEach"},"importKind":"value","local":{"type":"Identifier","name":"afterEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"beforeEach"},"importKind":"value","local":{"type":"Identifier","name":"beforeEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"describe"},"importKind":"value","local":{"type":"Identifier","name":"describe"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"expect"},"importKind":"value","local":{"type":"Identifier","name":"expect"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"it"},"importKind":"value","local":{"type":"Identifier","name":"it"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"vi"},"importKind":"value","local":{"type":"Identifier","name":"vi"}}],"source":{"type":"StringLiteral","value":"vitest"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"assert"}}],"source":{"type":"StringLiteral","value":"node:assert"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"fs"}}],"source":{"type":"StringLiteral","value":"node:fs"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"path"}}],"source":{"type":"StringLiteral","value":"node:path"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Core"}}],"source":{"type":"StringLiteral","value":"./index.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"UIPlugin"}}],"source":{"type":"StringLiteral","value":"./UIPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"DefinePluginOpts"},"local":{"type":"Identifier","name":"DefinePluginOpts"},"importKind":"type"},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PluginOpts"},"local":{"type":"Identifier","name":"PluginOpts"},"importKind":"type"}],"source":{"type":"StringLiteral","value":"./BasePlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"debugLogger"},"importKind":"value","local":{"type":"Identifier","name":"debugLogger"}}],"source":{"type":"StringLiteral","value":"./loggers.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin1"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin1.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin2"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin2.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPlugin"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutId"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutId.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutType"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutType.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"DeepFrozenStore"}}],"source":{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/DeepFrozenStore.mjs"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}}],"source":{"type":"StringLiteral","value":"./Uppy.ts"}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sampleImage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fs"},"computed":false,"property":{"type":"Identifier","name":"readFileSync"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"path"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"Identifier","name":"__dirname"},{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/images/image.jpg"}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"testImage"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"src/Core"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealCreateObjectUrl"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"beforeEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"mockReturnValue"}},"arguments":[{"type":"StringLiteral","value":"newUrl"}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"Identifier","name":"RealCreateObjectUrl"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should expose a class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Uppy"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should have a string `id` option that defaults to \"uppy\""},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"uppy"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"profile"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"profile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a plugin to the plugin stack"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to .use() without passing generics again"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"Identifier","name":"opts"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"StringLiteral","value":"Test"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"foo"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"foo"}},"operator":"??","right":{"type":"StringLiteral","value":"defaultFoo"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"bar"}},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"bar"}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}}],"directives":[]},{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"defaultFoo"}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefinePluginOpts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"defaultOptions"}}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"??","right":{"type":"StringLiteral","value":"Test"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"directives":[]}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should prevent the same plugin from being added more than once"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add an invalid plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPlugin"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutId"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no type"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutType"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return the plugin that matches the specified name"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"foo"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"BinaryExpression","left":{"type":"Identifier","name":"plugin"},"operator":"instanceof","right":{"type":"Identifier","name":"UIPlugin"}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call the specified method on all the plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"run"}},"arguments":[{"type":"StringLiteral","value":"hello"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should uninstall and the remove the specified plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePlugin"}},"arguments":[{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update all the plugins with the new state when the updateAll method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateAll"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"stateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newState"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should cancel all when the `cancelAll` method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":30}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should clear all uploads and files on cancelAll()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove all uploads when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should disallow remove one upload when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"throws"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"RegExpLiteral","pattern":"individualCancellation is disabled","flags":""}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove one upload when individualCancellation is enabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should close, reset and uninstall when the close method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pluginIteration"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"Identifier","name":"pluginIteration"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginIteration"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"upload hooks"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add data returned from upload hooks to the .upload() result"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pre"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"post"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"result"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"Identifier","name":"result"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"pre"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"upload"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"post"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"preprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove preprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the preprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not pass removed file IDs to next step"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"rmd.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"kept.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"kept.jpg"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileID"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"postprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove postprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the postprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should report an error if post-processing a file fails"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]},{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploaders"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove uploader"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"adding a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call onBeforeFileAdded if it was specified in the options when initialising the class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeFileAdded"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"files"}],"body":{"type":"CallExpression","callee":{"type":"Identifier","name":"onBeforeFileAdded"},"arguments":[{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"files"}}]}]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow uploading duplicate file if explicitly allowed in onBeforeFileAdded"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BooleanLiteral","value":true}}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileAddedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"fileAddedEventMock"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isRemote"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preview"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"undefined"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileAddedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file from a File object"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"fileData"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file that does not meet the restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"video/webm"}]}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, video/webm"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.webm"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a dupicate file, a file with the same id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"notARelativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the duplicate file 'foo.jpg', it already exists"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow a duplicate file if its relativePath is different, thus the id is different"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"relativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file if onBeforeFileAdded returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"source"}},"operator":"===","right":{"type":"StringLiteral","value":"vi"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the file because onBeforeFileAdded returned false."}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"with allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload with legacy allowMultipleUploads option"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not allow new files after the removeFile() if some file is still present"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files after the last removeFile()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId2"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not dedupe different files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"data"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"lastModified"}},"right":{"type":"NumericLiteral","value":1562770350937}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo푸.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo//jpg-1l3o-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return a { successful, failed } pair containing file objects"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return files with errors in the { failed } key"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"RegExpLiteral","pattern":"bar","flags":""},"computed":false,"property":{"type":"Identifier","name":"test"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This is bar and I do not like bar"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is bar and I do not like bar"}}]}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only upload files that are not already assigned to another upload id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"state"}},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload1"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file1/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file2/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file3/jpg-1e-image/jpeg"}]}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload2"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file4/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file5/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file6/jpg-1e-image/jpeg"}]}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"r"}],"body":{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":21}}},"consequent":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"r"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadID"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"cjd09qwxb000dlql4tp4doz8h"}}]},"alternate":{"type":"Identifier","name":"r"}}}]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not upload if onBeforeUpload returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"ForInStatement","left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"files"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileId"}},"computed":false,"property":{"type":"Identifier","name":"name"}},"operator":"===","right":{"type":"StringLiteral","value":"123.foo"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"files"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Not starting the upload because onBeforeUpload returned false"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"only allows a single upload() batch when allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"rejects"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot create a new upload: already uploading\\.","flags":""}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files again with allowMultipleUploadBatches: false after cancelAll() was called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"removing a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should remove the file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileRemovedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-removed"},{"type":"Identifier","name":"fileRemovedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":50}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileRemovedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"retries"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should start a new upload with failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onRetryAll"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"retry-all"},{"type":"Identifier","name":"onRetryAll"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"id"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something went wrong"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onRetryAll"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not start a new upload if there are no failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"restoring a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should restore a file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should fail to restore a file if it doesn't exist"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"get a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the specified file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"non existent file"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"getFiles"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return an empty array if there are no files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return all files as an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"empty.dat"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"NumericLiteral","value":1000}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}}]}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]},"computed":false,"property":{"type":"Identifier","name":"sort"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"empty.dat"},{"type":"StringLiteral","value":"foo.jpg"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"setOptions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change options on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lolUppy"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"autoProceed"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"lolUppy"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"autoProceed"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploadBatches"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change locale on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Cancel"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cancel"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Отмена"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Отмена"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"logOut"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Log out"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change meta on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"beep"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change restrictions on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/jpeg"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":2}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/jpeg"}]}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"meta data"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set meta data by calling setMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"boo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo2"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bur"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update meta data for a file by calling updateMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should merge meta data when add file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the progress of a file upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":72}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should work with unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"proceedUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"promise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"proceedUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishPromise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"finishUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"id"}]}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadURL"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lol"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadPromise"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"all"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"Identifier","name":"resolve"}]}}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-started"},{"type":"Identifier","name":"resolve"}]}}]}]}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"proceedUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":36}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":36}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"finishUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3456}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"uploadPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should estimate progress for unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":18}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the total progress of all file uploads"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"resetProgressEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"reset-progress"},{"type":"Identifier","name":"resetProgressEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"resetProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"allowNewUpload"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"recoveredState"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"resetProgressEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"checkRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxNumberOfFiles rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not enforce the maxNumberOfFiles rule for ghost files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileId1"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should enforce the minNumberOfFiles rule"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should throw if allowedFileTypes is not an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/gif"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"hi"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule with file extensions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":".gif"},{"type":"StringLiteral","value":".jpg"},{"type":"StringLiteral","value":".jpeg"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.JPG"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the minFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1073741824}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxTotalFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":34000}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foo1.jpg exceeds maximum allowed size of 33 KB"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should check if a file validateRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":300000}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isFolder"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mimeType"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"modifiedDate"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2016-04-13T15:11:31.204Z"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":270733}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions1"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 293 KB"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions2"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/png"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit `restriction-failed` event when some rule is violated"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"maxFileSize"},"init":{"type":"NumericLiteral","value":100}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"test.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"BinaryExpression","left":{"type":"NumericLiteral","value":2},"operator":"*","right":{"type":"Identifier","name":"maxFileSize"}}]}]}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorMessage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"Identifier","name":"restrictionsViolatedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"file"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":null,"body":{"type":"BlockStatement","body":[],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"errorMessage"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"actions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the upload-error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileId"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"filename"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"fileId"}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"this is the error"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to upload filename"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"this is the error"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"error"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the error state when receiving the upload event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"updateOnlineStatus"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealNavigatorOnline"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"mockNavigatorOnline"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"status","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"defineProperty"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},{"type":"StringLiteral","value":"onLine"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"status"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"writable"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}},"right":{"type":"Identifier","name":"RealNavigatorOnline"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit the correct event based on whether there is a network connection"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"offlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"backOnlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-offline"},{"type":"Identifier","name":"offlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-online"},{"type":"Identifier","name":"onlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"back-online"},{"type":"Identifier","name":"backOnlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"info"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a string based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a object based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]},{"type":"StringLiteral","value":"warning"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"warning"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set an info message to be displayed for a period of time before hiding"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"done"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":100}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"done"},"arguments":[]}}],"directives":[]}},{"type":"NumericLiteral","value":110}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should hide an info message"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should support multiple messages"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"But this is another one"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"createUpload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should assign the specified files to a new upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUploadsState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentUploads"}}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploadsState"},"computed":true,"property":{"type":"Identifier","name":"uploadId"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"currentUploadsState"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"i18n"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"merges in custom locale strings"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"test"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"beep boop"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pluralize"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"NumericLiteral","value":0}}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"%{file} exceeds maximum allowed size of %{size}"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"test"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"default restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be merged with supplied restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"minNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"log"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function, even if debug: true"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log to console when logger: Uppy.debugLogger or debug: true is set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"debugLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only log errors to console when logger is not set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}},"packages/@uppy/core/src/Uppy.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Translator"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"ee"}}],"source":{"type":"StringLiteral","value":"namespace-emitter"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"nanoid"},"importKind":"value","local":{"type":"Identifier","name":"nanoid"}}],"source":{"type":"StringLiteral","value":"nanoid/non-secure"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"throttle"}}],"source":{"type":"StringLiteral","value":"lodash/throttle.js"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"DefaultStore"}}],"source":{"type":"StringLiteral","value":"@uppy/store-default"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"getFileType"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/getFileType"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"getFileNameAndExtension"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/getFileNameAndExtension"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"getSafeFileId"},"importKind":"value","local":{"type":"Identifier","name":"getSafeFileId"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/generateFileID"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"MinimalRequiredUppyFile"},"importKind":"value","local":{"type":"Identifier","name":"MinimalRequiredUppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"CompanionFile"},"importKind":"value","local":{"type":"Identifier","name":"CompanionFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/CompanionFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"CompanionClientProvider"},"importKind":"value","local":{"type":"Identifier","name":"CompanionClientProvider"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"CompanionClientSearchProvider"},"importKind":"value","local":{"type":"Identifier","name":"CompanionClientSearchProvider"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/CompanionClientProvider"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"FileProgressNotStarted"},"importKind":"value","local":{"type":"Identifier","name":"FileProgressNotStarted"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"FileProgressStarted"},"importKind":"value","local":{"type":"Identifier","name":"FileProgressStarted"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/FileProgress"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Locale"},"importKind":"value","local":{"type":"Identifier","name":"Locale"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"I18n"},"importKind":"value","local":{"type":"Identifier","name":"I18n"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"OptionalPluralizeLocale"},"importKind":"value","local":{"type":"Identifier","name":"OptionalPluralizeLocale"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"supportsUploadProgress"}}],"source":{"type":"StringLiteral","value":"./supportsUploadProgress.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"getFileName"}}],"source":{"type":"StringLiteral","value":"./getFileName.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"justErrorsLogger"},"importKind":"value","local":{"type":"Identifier","name":"justErrorsLogger"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"debugLogger"},"importKind":"value","local":{"type":"Identifier","name":"debugLogger"}}],"source":{"type":"StringLiteral","value":"./loggers.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Restricter"},"importKind":"value","local":{"type":"Identifier","name":"Restricter"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"defaultOptions"},"importKind":"value","local":{"type":"Identifier","name":"defaultRestrictionOptions"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"RestrictionError"},"importKind":"value","local":{"type":"Identifier","name":"RestrictionError"}}],"source":{"type":"StringLiteral","value":"./Restricter.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"packageJson"}}],"source":{"type":"StringLiteral","value":"../package.json"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"locale"}}],"source":{"type":"StringLiteral","value":"./locale.ts"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}}],"source":{"type":"StringLiteral","value":"./BasePlugin.ts"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Restrictions"},"importKind":"value","local":{"type":"Identifier","name":"Restrictions"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"ValidateableFile"},"importKind":"value","local":{"type":"Identifier","name":"ValidateableFile"}}],"source":{"type":"StringLiteral","value":"./Restricter.ts"}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Processor"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnknownKeyword"}]}},{"type":"TSVoidKeyword"}]}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FileRemoveReason"},"typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"user"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"cancel-all"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"unmount"}}]}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"LogLevel"},"typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"info"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"warning"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"error"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"success"}}]}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}},{"type":"TSTypeParameter","name":"PluginState","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}},"default":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"BasePlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PluginState"}}]}}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownProviderPluginState"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"authenticated"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSBooleanKeyword"},{"type":"TSUndefinedKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"breadcrumbs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"requestPath"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"didFirstRender"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"currentSelection"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"filterInput"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"loading"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSBooleanKeyword"},{"type":"TSStringKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"folders"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isSearchVisible"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownProviderPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownProviderPluginState"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onFirstRender"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"title"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"icon"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"TSQualifiedName","left":{"type":"Identifier","name":"JSX"},"right":{"type":"Identifier","name":"Element"}}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"provider"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionClientProvider"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"storage"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"getItem"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}]}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"setItem"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"value","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"removeItem"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}}}}}}]}}}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownSearchProviderPluginState"},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isInputMode"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"searchTerm"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownProviderPluginState"}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"loading"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"folders"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentSelection"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"filterInput"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"didFirstRender"}}]}]}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UnknownSearchProviderPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownSearchProviderPluginState"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onFirstRender"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"title"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"icon"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"TSQualifiedName","left":{"type":"Identifier","name":"JSX"},"right":{"type":"Identifier","name":"Element"}}}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"provider"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CompanionClientSearchProvider"}}}}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"successful"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"failed"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadID"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnknownKeyword"}}}]}}},{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fileIDs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"step"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}},{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"Plugins"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}},{"type":"TSUndefinedKeyword"}]}]}}],"body":{"type":"TSInterfaceBody","body":[]}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"capabilities"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isMobileDevice"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"darkMode"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"recoveredState"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNullKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Required"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentUploads"}}]}]}}]}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"info"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Array"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isHidden"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"type"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"LogLevel"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}},{"type":"TSNullKeyword"}]}}}]}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"plugins"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Plugins"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"totalProgress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"companion"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"autoProceed"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowMultipleUploads"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"logger"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"debugLogger"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"debug"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restrictions"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"currentFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSBooleanKeyword"},{"type":"TSUndefinedKeyword"}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},{"type":"TSBooleanKeyword"}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"locale"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"store"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefaultStore"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"infoTimeout"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyOptionsWithOptionalRestrictions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"restrictions"}}]}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restrictions"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}]}}}}]}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"MinimalRequiredOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"locale"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"meta"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"restrictions"}}]}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"locale"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"OptionalPluralizeLocale"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restrictions"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}]}}}}]}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Required"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"GenericEventCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FileAddedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FilesAddedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"FileRemovedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"reason","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fileIDs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ProgressCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PreProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"preprocess"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PostProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"postprocess"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ProcessCompleteCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"preprocess"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadPauseCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"id"}}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"isPaused","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadStartCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadStartedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadProgressCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"progress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadSuccessCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"response","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"response"}}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadCompleteCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ErrorCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"Identifier","name":"file","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"response","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"response"}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadErrorCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"Identifier","name":"response","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"response"}}}]}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"uploadURL"}}]}},{"type":"TSUndefinedKeyword"}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadStalledCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"UploadRetryCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"RetryAllCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"RestrictionFailedCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"StateUpdateCallback"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"prevState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"nextState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"patch","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"CancelAllCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"reason","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PluginCallback"},"typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"_UppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"back-online"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"cancel-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CancelAllCallback"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadCompleteCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ErrorCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"file-added"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileAddedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"file-removed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemovedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"files-added"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FilesAddedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"info-hidden"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"info-visible"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"is-offline"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"is-online"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"pause-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"plugin-added"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PluginCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"plugin-remove"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PluginCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"postprocess-complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ProcessCompleteCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"postprocess-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PostProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"preprocess-complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ProcessCompleteCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"preprocess-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PreProcessProgressCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ProgressCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"reset-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"pluginData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restore-confirmed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restore-canceled"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restriction-failed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionFailedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"resume-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"GenericEventCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"retry-all"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RetryAllCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"state-update"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"StateUpdateCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"upload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadErrorCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-pause"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadPauseCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadProgressCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-retry"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadRetryCallback"}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-stalled"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadStalledCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-success"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadSuccessCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"DeprecatedUppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-start"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadStartCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"upload-started"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadStartedCallback"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"_UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"DeprecatedUppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}],"body":{"type":"TSInterfaceBody","body":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultUploadState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[],"source":null,"declaration":{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Uppy"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":null,"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":true,"key":{"type":"Identifier","name":"VERSION"},"computed":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"packageJson"},"computed":false,"property":{"type":"Identifier","name":"version"}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}}},"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"create"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}},"value":null},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"storeUnsubscribe"}},"value":null},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}},"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"ee"},"arguments":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Set"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}]}}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Set"},"arguments":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Set"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}]}}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Set"},"arguments":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Set"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}]}}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Set"},"arguments":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"defaultLocale"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"opts"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"store"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"store"}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"i18n"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"i18nArray"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Translator"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"translateArray"}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"scheduledAutoProceed"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ReturnType"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"setTimeout"}}]}},{"type":"TSNullKeyword"}]}},"value":{"type":"NullLiteral"}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"wasOffline"},"computed":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptionsWithOptionalRestrictions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"defaultLocale"}},"right":{"type":"TSAsExpression","expression":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"locale"},"typeAnnotation":{"type":"TSAnyKeyword"}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"}}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"uppy"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"autoProceed"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"defaultRestrictionOptions"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"files"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"hasOwn"}},"arguments":[{"type":"Identifier","name":"files"},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"Identifier","name":"files"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"DefaultStore"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"justErrorsLogger"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"infoTimeout"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"merged"},"init":{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"restrictions"}}]}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"merged"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"TSAsExpression","expression":{"type":"MemberExpression","object":{"type":"Identifier","name":"defaultOptions"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}}},{"type":"SpreadElement","argument":{"type":"LogicalExpression","left":{"type":"Identifier","name":"opts"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}}]}}]}}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"opts"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"logger"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"debug"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`."},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]},"alternate":{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"opts"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"debug"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"right":{"type":"Identifier","name":"debugLogger"}}}],"directives":[]},"alternate":null}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"Uppy"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Using Core v","cooked":"Using Core v"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nInit"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"store"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultUploadState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"supportsUploadProgress"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"meta"}}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"Restricter"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}}},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"storeUnsubscribe"}}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"subscribe"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"prevState"},{"type":"Identifier","name":"nextState"},{"type":"Identifier","name":"patch"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"prevState"},{"type":"Identifier","name":"nextState"},{"type":"Identifier","name":"patch"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"updateAll"}},"arguments":[{"type":"Identifier","name":"nextState"}]}}],"directives":[]}}]}}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"window"}},"operator":"!==","right":{"type":"StringLiteral","value":"undefined"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ThisExpression"}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"addListeners"}}},"arguments":[]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"emit"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"T","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}}},{"type":"RestElement","argument":{"type":"Identifier","name":"args"},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Parameters"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"SpreadElement","argument":{"type":"Identifier","name":"args"}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"on"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"K","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}},{"type":"Identifier","name":"callback","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"Identifier","name":"callback"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"once"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"K","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}},{"type":"Identifier","name":"callback","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"Identifier","name":"callback"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"off"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"K","constraint":{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"event","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}},{"type":"Identifier","name":"callback","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"K"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"emitter"}}},"computed":false,"property":{"type":"Identifier","name":"off"}},"arguments":[{"type":"Identifier","name":"event"},{"type":"Identifier","name":"callback"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"updateAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"state","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"update"}},"arguments":[{"type":"Identifier","name":"state"}]}}],"directives":[]}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"patch","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"patch"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"patchFilesState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"filesWithNewState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"existingFilesState"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"existingFilesState"}},{"type":"SpreadElement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"fromEntries"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"entries"}},"arguments":[{"type":"Identifier","name":"filesWithNewState"}]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"fileID"},{"type":"Identifier","name":"newFileState"}]}],"body":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"fileID"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFilesState"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"newFileState"}}]}]}}]}]}}]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setFileState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"state","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"fileID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Can’t set state for ","cooked":"Can’t set state for "},"tail":false},{"type":"TemplateElement","value":{"raw":" (the file could have been removed)","cooked":" (the file could have been removed)"},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"patchFilesState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"fileID"},"shorthand":false,"value":{"type":"Identifier","name":"state"}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"i18nInit"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onMissingKey"},"init":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"key"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Missing i18n string: ","cooked":"Missing i18n string: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"StringLiteral","value":"error"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"translator"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Translator"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"defaultLocale"}},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"locale"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onMissingKey"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"onMissingKey"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"translator"},"computed":false,"property":{"type":"Identifier","name":"translate"}},"computed":false,"property":{"type":"Identifier","name":"bind"}},"arguments":[{"type":"Identifier","name":"translator"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nArray"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"translator"},"computed":false,"property":{"type":"Identifier","name":"translateArray"}},"computed":false,"property":{"type":"Identifier","name":"bind"}},"arguments":[{"type":"Identifier","name":"translator"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"locale"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"translator"},"computed":false,"property":{"type":"Identifier","name":"locale"}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setOptions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"newOpts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"MinimalRequiredOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}}},{"type":"SpreadElement","argument":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"newOpts"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}},{"type":"SpreadElement","argument":{"type":"TSAsExpression","expression":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"},"optional":true},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Restrictions"}}}}]}}]}}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"meta"}}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nInit"}},"arguments":[]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"newOpts"},"computed":false,"property":{"type":"Identifier","name":"locale"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"Identifier","name":"newOpts"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"undefined"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"resetProgress"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultProgress","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressNotStarted"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"bytesTotal"}}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultProgress"}}]}}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultUploadState"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"reset-progress"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"clearUploadedFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultUploadState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addPreProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"add"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removePreProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"delete"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addPostProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"add"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removePostProcessor"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"delete"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addUploader"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}}},"computed":false,"property":{"type":"Identifier","name":"add"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removeUploader"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fn","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Processor"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}}},"computed":false,"property":{"type":"Identifier","name":"delete"}},"arguments":[{"type":"Identifier","name":"fn"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setMeta"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedMeta"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"Adding metadata:"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"data"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedMeta"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"setFileMeta"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"meta"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"Was trying to set metadata for a file that has been removed: "},{"type":"Identifier","name":"fileID"}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newMeta"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"newMeta"}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"Identifier","name":"fileID"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"files"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getFilesByIds"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"ids","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ids"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getObjectOfFilesPerState"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"newFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"startedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadStartedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"pausedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"completeFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"erroredFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"inProgressNotPausedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"processingFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUploadStarted"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isAllComplete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isAllErrored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isAllPaused"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUploadInProgress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isSomeGhost"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"filesObject"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"totalProgress"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"totalProgress"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"error"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"filesObject"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"progress"}}]}],"body":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"progress"},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"progress"},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"startedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadStartedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pausedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isPaused"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"completeFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"erroredFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressNotPausedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isPaused"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"processingFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"newFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"newFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"startedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"startedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStartedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadStartedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pausedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"pausedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"completeFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"completeFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"erroredFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"erroredFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"inProgressFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"inProgressNotPausedFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"inProgressNotPausedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"processingFiles"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"processingFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isUploadStarted"},"computed":false,"shorthand":false,"value":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadStartedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isAllComplete"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalProgress"},"operator":"===","right":{"type":"NumericLiteral","value":100}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"completeFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"processingFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isAllErrored"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"error"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"erroredFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isAllPaused"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"!==","right":{"type":"NumericLiteral","value":0}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"pausedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isUploadInProgress"},"computed":false,"shorthand":false,"value":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isSomeGhost"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"some"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"errors","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isRestriction"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"errors"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"file"}},{"type":"TSAsExpression","expression":{"type":"Identifier","name":"error"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"error"},{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"file"}}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"error"},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"userFacingErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"maxNumToShow"},"init":{"type":"NumericLiteral","value":4}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"firstErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"userFacingErrors"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"Identifier","name":"maxNumToShow"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"additionalErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"userFacingErrors"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"Identifier","name":"maxNumToShow"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"firstErrors"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"details"},"right":{"type":"StringLiteral","value":""}}}]}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"details"}}]},{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"additionalErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"additionalRestrictionsFailed"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"count"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"additionalErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}}}]}]}}]}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateRestrictions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSNullKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validate"}},"arguments":[{"type":"Identifier","name":"files"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSAnyKeyword"}}}],"directives":[]}},"finalizer":null},{"type":"ReturnStatement","argument":{"type":"NullLiteral"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFieldsOnFile"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"missingFields"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"missingFields"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"error"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"getMissingRequiredMetaFields"}},"arguments":[{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"missingFields"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingRequiredMetaFields"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"missingFields"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"error"}]}},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":true}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFields"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"success"},"init":{"type":"BooleanLiteral","value":true}}],"kind":"let"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":null}],"kind":"const"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"files"}]},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFieldsOnFile"}}},"arguments":[{"type":"Identifier","name":"file"}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"success"},"right":{"type":"BooleanLiteral","value":false}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"success"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"assertNewUploadAllowed"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowNewUpload"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"allowNewUpload"},"operator":"===","right":{"type":"BooleanLiteral","value":false}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"noMoreFilesAllowed"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"error"}]}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"error"}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"checkIfFileAlreadyExists"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":true}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"transformFile"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileDescriptorOrFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"File"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"TSAsExpression","expression":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"fileDescriptorOrFile"},"operator":"instanceof","right":{"type":"Identifier","name":"File"}},"consequent":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileDescriptorOrFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileDescriptorOrFile"},"computed":false,"property":{"type":"Identifier","name":"type"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileDescriptorOrFile"},"computed":false,"property":{"type":"Identifier","name":"size"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileDescriptorOrFile"}}]},"alternate":{"type":"Identifier","name":"fileDescriptorOrFile"}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileType"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getFileType"},"arguments":[{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileName"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getFileName"},"arguments":[{"type":"Identifier","name":"fileType"},{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileExtension"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"getFileNameAndExtension"},"arguments":[{"type":"Identifier","name":"fileName"}]},"computed":false,"property":{"type":"Identifier","name":"extension"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSafeFileId"},"arguments":[{"type":"Identifier","name":"file"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"meta"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"operator":"||","right":{"type":"ObjectExpression","properties":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"meta"},"computed":false,"property":{"type":"Identifier","name":"name"}},"right":{"type":"Identifier","name":"fileName"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"meta"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"Identifier","name":"fileType"}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"size"},"init":{"type":"ConditionalExpression","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Number"},"computed":false,"property":{"type":"Identifier","name":"isFinite"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"data"}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"consequent":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"data"}},"computed":false,"property":{"type":"Identifier","name":"size"}},"alternate":{"type":"NullLiteral"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"source"}},"operator":"||","right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"id"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"Identifier","name":"fileExtension"},"operator":"||","right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"meta"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileType"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"data"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"TSSatisfiesExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"size"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressNotStarted"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"size"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isRemote"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"isRemote"}},"operator":"||","right":{"type":"BooleanLiteral","value":false}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"operator":"||","right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preview"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"preview"}}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"startIfAutoProceed"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"autoProceed"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"scheduledAutoProceed"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"scheduledAutoProceed"}},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"scheduledAutoProceed"}},"right":{"type":"NullLiteral"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"stack"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"message"}}},"operator":"||","right":{"type":"Identifier","name":"err"}}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}}],"directives":[]}},{"type":"NumericLiteral","value":4}]}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"checkAndUpdateFileState"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"filesToAdd","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"errors"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"existingFiles"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nextFilesState"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"existingFiles"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validFilesToAdd","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errors","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileToAdd"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"filesToAdd"},"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"transformFile"}}},"arguments":[{"type":"Identifier","name":"fileToAdd"}]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isGhost"},"init":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"isGhost"},"optional":true}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"isGhost"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"existingFileState"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"newFile"},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"existingFileState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileToAdd"},"computed":false,"property":{"type":"Identifier","name":"data"}}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"name"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Replaced the blob in the restored ghost file: ","cooked":"Replaced the blob in the restored ghost file: "},"tail":false},{"type":"TemplateElement","value":{"raw":", ","cooked":", "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeFileAddedResult"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"onBeforeFileAdded"}},"arguments":[{"type":"Identifier","name":"newFile"},{"type":"Identifier","name":"nextFilesState"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"onBeforeFileAddedResult"}},"operator":"&&","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"checkIfFileAlreadyExists"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"noDuplicates"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileName"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileToAdd"}}]}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"onBeforeFileAddedResult"},"operator":"===","right":{"type":"BooleanLiteral","value":false}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"isGhost"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"StringLiteral","value":"Cannot add the file because onBeforeFileAdded returned false."},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileToAdd"}}]}]}}],"directives":[]},"alternate":{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"onBeforeFileAddedResult"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"Identifier","name":"onBeforeFileAddedResult"},"operator":"!==","right":{"type":"NullLiteral"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"newFile"},"right":{"type":"Identifier","name":"onBeforeFileAddedResult"}}}],"directives":[]},"alternate":null}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validateSingleFile"}},"arguments":[{"type":"Identifier","name":"newFile"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nextFilesState"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"Identifier","name":"newFile"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSAnyKeyword"}}]}}],"directives":[]}},"finalizer":null}],"directives":[]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validateAggregateRestrictions"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"existingFiles"}]},{"type":"Identifier","name":"validFilesToAdd"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSAnyKeyword"}}]}},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"existingFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errors"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]}}],"directives":[]}},"finalizer":null},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"nextFilesState"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"validFilesToAdd"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errors"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"File"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"MinimalRequiredUppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"id"}}}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"assertNewUploadAllowed"}}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"file"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"nextFilesState"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"validFilesToAdd"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"errors"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkAndUpdateFileState"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"file"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"Identifier","name":"restrictionErrors"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"ThrowStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":true,"property":{"type":"NumericLiteral","value":0}}},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"nextFilesState"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"firstValidFileToAdd"}]},"init":{"type":"Identifier","name":"validFilesToAdd"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"firstValidFileToAdd"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"files-added"},{"type":"Identifier","name":"validFilesToAdd"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"name"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"type"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Added file: ","cooked":"Added file: "},"tail":false},{"type":"TemplateElement","value":{"raw":", ","cooked":", "},"tail":false},{"type":"TemplateElement","value":{"raw":", mime type: ","cooked":", mime type: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"startIfAutoProceed"}}},"arguments":[]}},{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"firstValidFileToAdd"},"computed":false,"property":{"type":"Identifier","name":"id"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileDescriptors","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"MinimalRequiredUppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"assertNewUploadAllowed"}}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"nextFilesState"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"nextFilesState"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"validFilesToAdd"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"errors"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"errors"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkAndUpdateFileState"}}},"arguments":[{"type":"TSAsExpression","expression":{"type":"Identifier","name":"fileDescriptors"},"typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"Identifier","name":"restrictionErrors"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nonRestrictionErrors"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"errors"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"isRestriction"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonRestrictionErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"message"},"init":{"type":"StringLiteral","value":"Multiple errors occurred while adding files:\n"}}],"kind":"let"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonRestrictionErrors"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"subError"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"message"},"right":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"subError"},"computed":false,"property":{"type":"Identifier","name":"message"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"\\n * ","cooked":"\n * "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"addBulkFilesFailed"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonRestrictionErrors"},"computed":false,"property":{"type":"Identifier","name":"length"}}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"message"}}]},{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"AggregateError"}},"operator":"===","right":{"type":"StringLiteral","value":"function"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"AggregateError"},"arguments":[{"type":"Identifier","name":"nonRestrictionErrors"},{"type":"Identifier","name":"message"}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"err"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"Identifier","name":"message"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"errors"}},"right":{"type":"Identifier","name":"nonRestrictionErrors"}}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"nextFilesState"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"files-added"},{"type":"Identifier","name":"validFilesToAdd"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":5}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"length"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Added batch of ","cooked":"Added batch of "},"tail":false},{"type":"TemplateElement","value":{"raw":" files","cooked":" files"},"tail":true}]}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"validFilesToAdd"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Added file: ","cooked":"Added file: "},"tail":false},{"type":"TemplateElement","value":{"raw":"\\n id: ","cooked":"\n id: "},"tail":false},{"type":"TemplateElement","value":{"raw":"\\n type: ","cooked":"\n type: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]}}]}}],"directives":[]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"validFilesToAdd"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"startIfAutoProceed"}}},"arguments":[]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removeFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"reason","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedUploads"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUploads"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"removedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"create"}},"arguments":[{"type":"NullLiteral"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}}},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}}}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"fileIsNotRemoved"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadFileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFiles"},"computed":true,"property":{"type":"Identifier","name":"uploadFileID"}},"operator":"===","right":{"type":"Identifier","name":"undefined"}}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedUploads"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"Identifier","name":"fileIsNotRemoved"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"!==","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"length"}}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"capabilities"},"computed":false,"property":{"type":"Identifier","name":"individualCancellation"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"individualCancellation is disabled"}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"newFileIDs"}}]}}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stateUpdate","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Partial"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedUploads"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdate"},"computed":false,"property":{"type":"Identifier","name":"allowNewUpload"}},"right":{"type":"BooleanLiteral","value":true}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdate"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"NullLiteral"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdate"},"computed":false,"property":{"type":"Identifier","name":"recoveredState"}},"right":{"type":"NullLiteral"}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"stateUpdate"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"removedFileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"removedFiles"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"file-removed"},{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFiles"},"computed":true,"property":{"type":"Identifier","name":"fileID"}},{"type":"Identifier","name":"reason"}]}}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":">","right":{"type":"NumericLiteral","value":5}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Removed ","cooked":"Removed "},"tail":false},{"type":"TemplateElement","value":{"raw":" files","cooked":" files"},"tail":true}]}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"removedFileIDs"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"Removed files: ","cooked":"Removed files: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removeFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"reason","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"fileID"}]},{"type":"Identifier","name":"reason"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"pauseResume"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSBooleanKeyword"},{"type":"TSUndefinedKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"capabilities"}},"computed":false,"property":{"type":"Identifier","name":"resumableUploads"}}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"wasPaused"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"isPaused"}},"operator":"||","right":{"type":"BooleanLiteral","value":false}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isPaused"},"init":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"wasPaused"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"isPaused"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-pause"},{"type":"Identifier","name":"fileID"},{"type":"Identifier","name":"isPaused"}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"isPaused"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"pauseAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressUpdatedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressUpdatedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"right":{"type":"Identifier","name":"updatedFile"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"pause-all"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"resumeAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgressUpdatedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadComplete"}}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgressUpdatedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"right":{"type":"Identifier","name":"updatedFile"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"resume-all"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"retryAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesToRetry"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"updatedFiles"}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"error"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesToRetry"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"Identifier","name":"file"}},"right":{"type":"Identifier","name":"updatedFile"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"updatedFiles"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"retry-all"},{"type":"Identifier","name":"filesToRetry"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesToRetry"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"Identifier","name":"filesToRetry"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"cancelAll"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"AssignmentPattern","left":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"reason"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"reason"},"right":{"type":"StringLiteral","value":"user"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}]}}},"right":{"type":"ObjectExpression","properties":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"reason"}}]}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"reason"},"operator":"===","right":{"type":"StringLiteral","value":"user"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"Identifier","name":"fileIDs"},{"type":"StringLiteral","value":"cancel-all"}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"defaultUploadState"}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"retryUpload"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-retry"},{"type":"Identifier","name":"fileID"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"fileID"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"logout"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"EmptyStatement"},{"type":"ExpressionStatement","expression":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"plugin"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownProviderPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"computed":false,"property":{"type":"Identifier","name":"provider"}},"computed":false,"property":{"type":"Identifier","name":"logout"},"optional":true},"optional":true,"arguments":[]}}],"directives":[]}}]}}],"directives":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"calculateProgress"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"throttle"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"data"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileInState"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"fileInState"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileInState"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"percentage"}},"operator":"===","right":{"type":"NumericLiteral","value":100}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been already uploaded: ","cooked":"Not setting progress for a file that has been already uploaded: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"canHavePercentage"},"init":{"type":"LogicalExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Number"},"computed":false,"property":{"type":"Identifier","name":"isFinite"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}]},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":">","right":{"type":"NumericLiteral","value":0}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileInState"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"canHavePercentage"},"consequent":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Math"},"computed":false,"property":{"type":"Identifier","name":"round"}},"arguments":[{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}},"operator":"/","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}},"operator":"*","right":{"type":"NumericLiteral","value":100}}]},"alternate":{"type":"NumericLiteral","value":0}}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}}],"directives":[]}},{"type":"NumericLiteral","value":500},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"leading"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"trailing"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"calculateTotalProgress"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"inProgress"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}}],"directives":[]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sizedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":"!=","right":{"type":"NullLiteral"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"unsizedFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":"==","right":{"type":"NullLiteral"}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"progressMax"},"init":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"inProgress"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"*","right":{"type":"NumericLiteral","value":100}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentProgress"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"unsizedFiles"},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"acc"},{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"Identifier","name":"acc"},"operator":"+","right":{"type":"TSAsExpression","expression":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"percentage"}},"typeAnnotation":{"type":"TSNumberKeyword"}}}}],"directives":[]}},{"type":"NumericLiteral","value":0}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalProgress"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Math"},"computed":false,"property":{"type":"Identifier","name":"round"}},"arguments":[{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"currentProgress"},"operator":"/","right":{"type":"Identifier","name":"progressMax"}},"operator":"*","right":{"type":"NumericLiteral","value":100}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"totalProgress"}}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalSize"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"acc"},{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"TSAsExpression","expression":{"type":"BinaryExpression","left":{"type":"Identifier","name":"acc"},"operator":"+","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}},"operator":"??","right":{"type":"NumericLiteral","value":0}}},"typeAnnotation":{"type":"TSNumberKeyword"}}}],"directives":[]}},{"type":"NumericLiteral","value":0}]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"averageSize"},"init":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalSize"},"operator":"/","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"totalSize"},"right":{"type":"BinaryExpression","left":{"type":"Identifier","name":"averageSize"},"operator":"*","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"unsizedFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadedSize"},"init":{"type":"NumericLiteral","value":0}}],"kind":"let"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"sizedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"uploadedSize"},"right":{"type":"TSAsExpression","expression":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}},"typeAnnotation":{"type":"TSNumberKeyword"}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"unsizedFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"uploadedSize"},"right":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"averageSize"},"operator":"*","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"percentage"}},"operator":"||","right":{"type":"NumericLiteral","value":0}}},"operator":"/","right":{"type":"NumericLiteral","value":100}}}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalProgress"},"init":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalSize"},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"NumericLiteral","value":0},"alternate":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Math"},"computed":false,"property":{"type":"Identifier","name":"round"}},"arguments":[{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"uploadedSize"},"operator":"/","right":{"type":"Identifier","name":"totalSize"}},"operator":"*","right":{"type":"NumericLiteral","value":100}}]}}}],"kind":"let"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalProgress"},"operator":">","right":{"type":"NumericLiteral","value":100}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"totalProgress"},"right":{"type":"NumericLiteral","value":100}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"totalProgress"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"Identifier","name":"totalProgress"}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"addListeners"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorHandler","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"error"}}}}},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"response"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorMsg"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}},"operator":"||","right":{"type":"StringLiteral","value":"Unknown error"}}}],"kind":"let"},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"errorMsg"},"right":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}}],"quasis":[{"type":"TemplateElement","value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"errorMsg"}}]}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"in","right":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"errorMsg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"response"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"response"}}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"errorHandler"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"error"},{"type":"Identifier","name":"response"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"errorHandler"},"arguments":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"response"}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"error"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}},{"type":"StringLiteral","value":"error"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newError"},"init":{"type":"TSAsExpression","expression":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"failedToUpload"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"},"optional":true},"operator":"??","right":{"type":"StringLiteral","value":""}}}]}]}]},"typeAnnotation":{"type":"TSAnyKeyword"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newError"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}},"right":{"type":"BooleanLiteral","value":true}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newError"},"computed":false,"property":{"type":"Identifier","name":"details"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"message"}}}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"newError"},"computed":false,"property":{"type":"Identifier","name":"details"}},"right":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"details"}}],"quasis":[{"type":"TemplateElement","value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newError"}]}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"error"}]}]}}],"directives":[]}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ReturnType"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"setTimeout"}}]}},{"type":"TSNullKeyword"}]}}},"init":{"type":"NullLiteral"}}],"kind":"let"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-stalled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"message"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}}]},"init":{"type":"Identifier","name":"error"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"details"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"computed":false,"property":{"type":"Identifier","name":"name"}}}]},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"details"}}]},{"type":"StringLiteral","value":"warning"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted"},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"uploadStalledWarningRecentlyEmitted"},"right":{"type":"NullLiteral"}}}],"directives":[]}},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"infoTimeout"}}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"message"},{"type":"Identifier","name":"details"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},"computed":false,"property":{"type":"Identifier","name":"trim"}},"arguments":[]},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUploadStarted"},"init":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesFiltered"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"exists"},"init":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"exists"}},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"exists"}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesState"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"fromEntries"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesFiltered"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"ArrayExpression","elements":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Date"},"computed":false,"property":{"type":"Identifier","name":"now"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}}}}]}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"patchFilesState"}},"arguments":[{"type":"Identifier","name":"filesState"}]}}],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-started"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"onUploadStarted"},"arguments":[{"type":"Identifier","name":"files"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"uploadResp"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentProgress"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentProgress"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":">","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"indeterminate"}}]},"alternate":{"type":"Identifier","name":"undefined"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentProgress"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileProgressStarted"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"response"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadResp"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadURL"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadResp"},"computed":false,"property":{"type":"Identifier","name":"uploadURL"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isPaused"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadResp"},"computed":false,"property":{"type":"Identifier","name":"bytesUploaded"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentProgress"},"computed":false,"property":{"type":"Identifier","name":"bytesTotal"}}}}]}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"preprocess-progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"progress"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preprocess"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"progress"}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"preprocess"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"progress"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"progress"}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"Identifier","name":"file"},"operator":"==","right":{"type":"NullLiteral"}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"},"optional":true}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting progress for a file that has been removed: ","cooked":"Not setting progress for a file that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restored"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"dashboard:file-edit-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"Identifier","name":"file"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFieldsOnFile"}}},"arguments":[{"type":"Identifier","name":"file"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"window"}},"operator":"!==","right":{"type":"StringLiteral","value":"undefined"}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"addEventListener"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"addEventListener"}},"arguments":[{"type":"StringLiteral","value":"online"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"addEventListener"}},"arguments":[{"type":"StringLiteral","value":"offline"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}},{"type":"NumericLiteral","value":3000}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"updateOnlineStatus"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"online"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}},"operator":"??","right":{"type":"BooleanLiteral","value":true}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"online"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"is-offline"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"noInternetConnection"}]},{"type":"StringLiteral","value":"error"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"wasOffline"}},"right":{"type":"BooleanLiteral","value":true}}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"is-online"}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"wasOffline"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"back-online"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"connectedToInternet"}]},{"type":"StringLiteral","value":"success"},{"type":"NumericLiteral","value":3000}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"wasOffline"}},"right":{"type":"BooleanLiteral","value":false}}}],"directives":[]},"alternate":null}],"directives":[]}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}},"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"computed":false,"property":{"type":"Identifier","name":"bind"}},"arguments":[{"type":"ThisExpression"}]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getID"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"use"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"T","constraint":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"BasePlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"Plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ConstructorParameters"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"T"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":1}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSThisType"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"Plugin"}},"operator":"!==","right":{"type":"StringLiteral","value":"function"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"msg"},"init":{"type":"BinaryExpression","left":{"type":"TemplateLiteral","expressions":[{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"Plugin"},"operator":"===","right":{"type":"NullLiteral"}},"consequent":{"type":"StringLiteral","value":"null"},"alternate":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"Plugin"}}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Expected a plugin class, but got ","cooked":"Expected a plugin class, but got "},"tail":false},{"type":"TemplateElement","value":{"raw":".","cooked":"."},"tail":true}]},"operator":"+","right":{"type":"StringLiteral","value":" Please verify that the plugin was imported and spelled correctly."}}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"TypeError"},"arguments":[{"type":"Identifier","name":"msg"}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Plugin"},"arguments":[{"type":"ThisExpression"},{"type":"Identifier","name":"opts"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pluginId"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"id"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"pluginId"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Your plugin must have an id"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Your plugin must have a type"}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"existsPluginAlready"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"Identifier","name":"pluginId"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"existsPluginAlready"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"msg"},"init":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"existsPluginAlready"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Already found a plugin named '","cooked":"Already found a plugin named '"},"tail":false},{"type":"TemplateElement","value":{"raw":"'. ","cooked":"'. "},"tail":true}]},"operator":"+","right":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"pluginId"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Tried to use: '","cooked":"Tried to use: '"},"tail":false},{"type":"TemplateElement","value":{"raw":"'.\\n","cooked":"'.\n"},"tail":true}]}},"operator":"+","right":{"type":"StringLiteral","value":"Uppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id."}}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"Identifier","name":"msg"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"Plugin"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"pluginId"},{"type":"MemberExpression","object":{"type":"Identifier","name":"Plugin"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Using ","cooked":"Using "},"tail":false},{"type":"TemplateElement","value":{"raw":" v","cooked":" v"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}},"operator":"in","right":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"plugin"}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"right":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"plugin"}]}}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"install"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"plugin-added"},{"type":"Identifier","name":"plugin"}]}},{"type":"ReturnStatement","argument":{"type":"ThisExpression"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getPlugin"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugins"},"init":null}],"kind":"const"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}}]},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"foundPlugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugins"},"computed":false,"property":{"type":"Identifier","name":"find"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"===","right":{"type":"Identifier","name":"id"}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"foundPlugin"},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"ReturnStatement","argument":{"type":"Identifier","name":"foundPlugin"}},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}},{"type":"ClassMethod","accessibility":"private","static":false,"computed":true,"key":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"type","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"Identifier","name":"type"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"iteratePlugins"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"method","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"plugin","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}}]},"computed":false,"property":{"type":"Identifier","name":"flat"}},"arguments":[{"type":"NumericLiteral","value":1}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"Identifier","name":"method"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"removePlugin"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"instance","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UnknownPlugin"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Removing plugin ","cooked":"Removing plugin "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"plugin-remove"},{"type":"Identifier","name":"instance"}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"arguments":[]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"list"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"type"}}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"index"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"findIndex"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"item"}],"body":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"item"},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"id"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"index"},"operator":"!==","right":{"type":"UnaryExpression","operator":"-","prefix":true,"argument":{"type":"NumericLiteral","value":1}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"splice"}},"arguments":[{"type":"Identifier","name":"index"},{"type":"NumericLiteral","value":1}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"plugins"}}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"MemberExpression","object":{"type":"Identifier","name":"instance"},"computed":false,"property":{"type":"Identifier","name":"id"}},"shorthand":false,"value":{"type":"Identifier","name":"undefined"}}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"Identifier","name":"updatedState"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"close"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"AssignmentPattern","left":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"reason"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"reason"}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"FileRemoveReason"}}}}]},{"type":"TSUndefinedKeyword"}]}}},"right":{"type":"ObjectExpression","properties":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Closing Uppy instance ","cooked":"Closing Uppy instance "},"tail":false},{"type":"TemplateElement","value":{"raw":": removing all files and uninstalling plugins","cooked":": removing all files and uninstalling plugins"},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"reason"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"storeUnsubscribe"}}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"removePlugin"}},"arguments":[{"type":"Identifier","name":"plugin"}]}}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"window"}},"operator":"!==","right":{"type":"StringLiteral","value":"undefined"}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"removeEventListener"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"removeEventListener"}},"arguments":[{"type":"StringLiteral","value":"online"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"window"},"computed":false,"property":{"type":"Identifier","name":"removeEventListener"}},"arguments":[{"type":"StringLiteral","value":"offline"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"updateOnlineStatus"}}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"hideInfo"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"info"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"info"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"info"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"info"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}}]}}}]}]}}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"type","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"LogLevel"}}}},"right":{"type":"StringLiteral","value":"info"}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"duration"},"right":{"type":"NumericLiteral","value":3000}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isComplexMessage"},"init":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"message"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"type"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"isComplexMessage"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"message"},"computed":false,"property":{"type":"Identifier","name":"message"}},"alternate":{"type":"Identifier","name":"message"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"isComplexMessage"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"message"},"computed":false,"property":{"type":"Identifier","name":"details"}},"alternate":{"type":"NullLiteral"}}}]}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"Identifier","name":"duration"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"info-visible"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"log"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}]}}},{"type":"Identifier","name":"type","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"logger"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"logger"}}]},"init":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}}}],"kind":"const"},{"type":"SwitchStatement","discriminant":{"type":"Identifier","name":"type"},"cases":[{"type":"SwitchCase","consequent":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"logger"},"computed":false,"property":{"type":"Identifier","name":"error"}},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"BreakStatement","label":null}],"test":{"type":"StringLiteral","value":"error"}},{"type":"SwitchCase","consequent":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"logger"},"computed":false,"property":{"type":"Identifier","name":"warn"}},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"BreakStatement","label":null}],"test":{"type":"StringLiteral","value":"warning"}},{"type":"SwitchCase","consequent":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"logger"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"BreakStatement","label":null}],"test":null}]}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"requestClientById"}},"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Map"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]},"arguments":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"registerRequestClient"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"client","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnknownKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"requestClientById"}}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"Identifier","name":"id"},{"type":"Identifier","name":"client"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getRequestClientForFile"},"computed":false,"kind":"method","typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"Client"}]},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Client"}}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}}},"consequent":{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"Tried to get RequestClient for a non-remote file ","cooked":"Tried to get RequestClient for a non-remote file "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"requestClient"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"requestClientById"}}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"requestClientId"}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"requestClient"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"requestClientId"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"requestClientId \"","cooked":"requestClientId \""},"tail":false},{"type":"TemplateElement","value":{"raw":"\" not registered for file \"","cooked":"\" not registered for file \""},"tail":false},{"type":"TemplateElement","value":{"raw":"\"","cooked":"\""},"tail":true}]}]}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"requestClient"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Client"}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"restore"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"uploadID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Core: attempting to restore upload \"","cooked":"Core: attempting to restore upload \""},"tail":false},{"type":"TemplateElement","value":{"raw":"\"","cooked":"\""},"tail":true}]}]}},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"reject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Nonexistent upload"}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"AssignmentPattern","left":{"type":"Identifier","name":"opts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}}},"right":{"type":"ObjectExpression","properties":[]}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"forceAllowNewUpload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"forceAllowNewUpload"},"right":{"type":"BooleanLiteral","value":false}}}]},"init":{"type":"Identifier","name":"opts"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowNewUpload"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"allowNewUpload"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"forceAllowNewUpload"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Cannot create a new upload: already uploading."}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"nanoid"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadID"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"fileIDs"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploadBatches"}},"operator":"!==","right":{"type":"BooleanLiteral","value":false}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploads"}},"operator":"!==","right":{"type":"BooleanLiteral","value":false}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUploads"}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"uploadID"},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"fileIDs"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}}]}}]}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"uploadID"}}],"directives":[]}},{"type":"ClassMethod","accessibility":"private","static":false,"computed":true,"key":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"RestElement","argument":{"type":"Identifier","name":"args"},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"args"}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"getUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"addResultData"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"result"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"getUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"uploadID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting result for an upload that has been removed: ","cooked":"Not setting result for an upload that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUpload"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"result"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"data"}}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUploads"}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"uploadID"},"shorthand":false,"value":{"type":"Identifier","name":"currentUpload"}}]}}]}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUploads"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}},"computed":false,"kind":"method","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"getCurrentUpload"},"init":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"CurrentUpload"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploads"},"computed":true,"property":{"type":"Identifier","name":"uploadID"}}}],"directives":[]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUpload"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getCurrentUpload"},"arguments":[]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"steps"},"init":{"type":"ArrayExpression","elements":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"preProcessors"}}}},{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"uploaders"}}}},{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"postProcessors"}}}}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ForStatement","init":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"step"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"step"}},"operator":"||","right":{"type":"NumericLiteral","value":0}}}],"kind":"let"},"test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"step"},"operator":"<","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"steps"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"update":{"type":"UpdateExpression","operator":"++","prefix":false,"argument":{"type":"Identifier","name":"step"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"currentUpload"}},"consequent":{"type":"BlockStatement","body":[{"type":"BreakStatement","label":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fn"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"steps"},"computed":true,"property":{"type":"Identifier","name":"step"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"Identifier","name":"uploadID"},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"currentUpload"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"step"}}]}}]}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"fileIDs"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"fileIDs"}}]},"init":{"type":"Identifier","name":"currentUpload"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"fn"},"arguments":[{"type":"Identifier","name":"fileIDs"},{"type":"Identifier","name":"uploadID"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"currentUpload"},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"getCurrentUpload"},"arguments":[]}}}],"directives":[]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}},"finalizer":null},{"type":"IfStatement","test":{"type":"Identifier","name":"currentUpload"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"file"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"postprocess"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"successful"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"failed"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"successful"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"failed"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadID"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadID"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"currentUpload"},"right":{"type":"CallExpression","callee":{"type":"Identifier","name":"getCurrentUpload"},"arguments":[]}}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"result"},"init":null}],"kind":"let"},{"type":"IfStatement","test":{"type":"Identifier","name":"currentUpload"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"result"},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUpload"},"computed":false,"property":{"type":"Identifier","name":"result"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"complete"},{"type":"Identifier","name":"result"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"removeUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"result"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"uploadID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Not setting result for an upload that has been removed: ","cooked":"Not setting result for an upload that has been removed: "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"result"}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"upload"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullable"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UploadResult"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}},{"type":"TSUndefinedKeyword"}]}]}}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"plugins"}}},"computed":true,"property":{"type":"StringLiteral","value":"uploader"}},"computed":false,"property":{"type":"Identifier","name":"length"},"optional":true}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"No uploader type plugins are used"},{"type":"StringLiteral","value":"warning"}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"files"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeUploadResult"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"onBeforeUpload"}},"arguments":[{"type":"Identifier","name":"files"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"onBeforeUploadResult"},"operator":"===","right":{"type":"BooleanLiteral","value":false}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"reject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Not starting the upload because onBeforeUpload returned false"}]}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"onBeforeUploadResult"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"onBeforeUploadResult"}},"operator":"===","right":{"type":"StringLiteral","value":"object"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"files"},"right":{"type":"Identifier","name":"onBeforeUploadResult"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"restricter"}}},"computed":false,"property":{"type":"Identifier","name":"validateMinNumberOfFiles"}},"arguments":[{"type":"Identifier","name":"files"}]}}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"informAndEmit"}}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"err"}]}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"checkRequiredMetaFields"}}},"arguments":[{"type":"Identifier","name":"files"}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"missingRequiredMetaField"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"currentUploads"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"currentUploads"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentlyUploadingFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"values"}},"arguments":[{"type":"Identifier","name":"currentUploads"}]},"computed":false,"property":{"type":"Identifier","name":"flatMap"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"curr"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"curr"},"computed":false,"property":{"type":"Identifier","name":"fileIDs"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"waitingFileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"progress"}},"computed":false,"property":{"type":"Identifier","name":"uploadStarted"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentlyUploadingFiles"},"computed":false,"property":{"type":"Identifier","name":"indexOf"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"operator":"===","right":{"type":"UnaryExpression","operator":"-","prefix":true,"argument":{"type":"NumericLiteral","value":1}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"waitingFileIDs"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createUpload"}}},"arguments":[{"type":"Identifier","name":"waitingFileIDs"}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"runUpload"}}},"arguments":[{"type":"Identifier","name":"uploadID"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"err"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"err"},{"type":"StringLiteral","value":"error"}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}}]}}],"directives":[]}}]}}},{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"Identifier","name":"Uppy"}}],"directives":[]}}}},"renamedFiles":{"mappings":[],"before":{},"after":{}}}