{"addedFiles":{},"deletedFiles":{},"modifiedFiles":{"before":{"packages/@uppy/transloadit/src/index.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"hasProperty"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/hasProperty"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"ErrorWithCause"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/ErrorWithCause"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"RateLimitedQueue"},"importKind":"value","local":{"type":"Identifier","name":"RateLimitedQueue"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/RateLimitedQueue"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}}],"source":{"type":"StringLiteral","value":"@uppy/core/lib/BasePlugin.js"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"DefinePluginOpts"},"importKind":"value","local":{"type":"Identifier","name":"DefinePluginOpts"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PluginOpts"},"importKind":"value","local":{"type":"Identifier","name":"PluginOpts"}}],"source":{"type":"StringLiteral","value":"@uppy/core/lib/BasePlugin.js"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Tus"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"TusDetailedError"},"local":{"type":"Identifier","name":"TusDetailedError"},"importKind":"type"}],"source":{"type":"StringLiteral","value":"@uppy/tus"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Uppy"},"importKind":"value","local":{"type":"Identifier","name":"Uppy"}}],"source":{"type":"StringLiteral","value":"@uppy/core"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Assembly"}}],"source":{"type":"StringLiteral","value":"./Assembly.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Client"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"AssemblyError"},"importKind":"value","local":{"type":"Identifier","name":"AssemblyError"}}],"source":{"type":"StringLiteral","value":"./Client.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AssemblyWatcher"}}],"source":{"type":"StringLiteral","value":"./AssemblyWatcher.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"locale"}}],"source":{"type":"StringLiteral","value":"./locale.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"packageJson"}}],"source":{"type":"StringLiteral","value":"../package.json"}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyFile"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"basename"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"ext"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"size"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"mime"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"type"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"field"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"md5hash"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"is_tus_file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_md5hash"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_basename"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_path"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"ssl_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"tus_upload_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSAnyKeyword"}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyResult"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"AssemblyFile"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"cost"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"execTime"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"queue"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"queueTime"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"localId"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyResponse"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"ok"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"parent_id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"account_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"template_id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"instance"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly_ssl_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uppyserver_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"companion_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"websocket_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"tus_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bytes_received"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bytes_expected"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"upload_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"client_agent"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"client_ip"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"client_referer"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"transloadit_client"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"start_date"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"upload_meta_data_extracted"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"warnings"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"is_infinite"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"has_dupe_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"execution_start"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"execution_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"queue_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"jobs_queue_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_start"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_url"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_status"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_response_code"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_duration"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"last_job_completed"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSAnyKeyword"}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"running_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bytes_usage"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"executing_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"started_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"parent_assembly_status"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"params"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"template"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"merged_params"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploads"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"results"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"build_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stderr"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stdout"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyParameters"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"auth"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"key"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"expires"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"template_id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"steps"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"step","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"name","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSStringKeyword"}]}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_url"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyOptions"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"params"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyParameters"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}]}},{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"signature"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"OptionsWithRestructuredFields"},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"fields"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}]}}}}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"service"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"errorReporting"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"waitForEncoding"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"waitForMetadata"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"importFromUploadURLs"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"alwaysRunAssembly"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"limit"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"clientName"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"retryDelays"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSNumberKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assemblyOptions"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}},{"type":"TSParenthesizedType","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}}]}}}}]}}}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"TSSatisfiesExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"service"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"https://api2.transloadit.com"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errorReporting"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"waitForEncoding"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"waitForMetadata"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"alwaysRunAssembly"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"importFromUploadURLs"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"limit"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":20}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"retryDelays"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"NumericLiteral","value":7000},{"type":"NumericLiteral","value":10000},{"type":"NumericLiteral","value":15000},{"type":"NumericLiteral","value":20000}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"clientName"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}}}}],"kind":"const"},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Opts"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefinePluginOpts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"defaultOptions"}}}]}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"TransloaditState"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}]}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"results"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Array"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stepName"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}]}}}}]}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PersistentState"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assemblyResponse"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}]}},{"type":"TSModuleDeclaration","id":{"type":"StringLiteral","value":"@uppy/core"},"body":{"type":"TSModuleBlock","body":[{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"pluginData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditState"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restore:get-data"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"setData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"arg","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PersistentState"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-created"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}},{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-cancel"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:import-error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}},{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-executing"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-cancelled"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:upload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}},{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"stepName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}},{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:execution-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"details","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"progress_combined"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}]}}}]},"declare":true},{"type":"TSModuleDeclaration","id":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"},"body":{"type":"TSModuleBlock","body":[{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"transloadit"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"tus"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadUrl"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]}}}]}}}]},"declare":true},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sendErrorToConsole"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"originalErr","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"ErrorWithCause"},"arguments":[{"type":"StringLiteral","value":"Failed to send error to the client"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cause"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"err"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"arguments":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"originalErr"}]}}],"directives":[]}}}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"validateParams"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"params","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyParameters"}},{"type":"TSNullKeyword"}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"params"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Transloadit: The `params` option is required."}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"params"}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"consequent":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"params"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"JSON"},"computed":false,"property":{"type":"Identifier","name":"parse"}},"arguments":[{"type":"Identifier","name":"params"}]}}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"ErrorWithCause"},"arguments":[{"type":"StringLiteral","value":"Transloadit: The `params` option is a malformed JSON string."},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cause"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"err"}}]}]}}],"directives":[]}},"finalizer":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"params"}},"computed":false,"property":{"type":"Identifier","name":"auth"}}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"params"}},"computed":false,"property":{"type":"Identifier","name":"auth"}},"computed":false,"property":{"type":"Identifier","name":"key"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"BinaryExpression","left":{"type":"StringLiteral","value":"Transloadit: The `params.auth.key` option is required. "},"operator":"+","right":{"type":"StringLiteral","value":"You can find your Transloadit API key at https://transloadit.com/c/template-credentials"}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"COMPANION_URL"},"init":{"type":"StringLiteral","value":"https://api2.transloadit.com/companion"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"COMPANION_ALLOWED_HOSTS"},"init":{"type":"RegExpLiteral","pattern":"\\.transloadit\\.com$","flags":""}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"TL_COMPANION"},"init":{"type":"RegExpLiteral","pattern":"https?:\\/\\/api2(?:-\\w+)?\\.transloadit\\.com\\/companion","flags":""}}],"kind":"const"},{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Transloadit"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Opts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditState"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":true,"key":{"type":"Identifier","name":"VERSION"},"computed":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"packageJson"},"computed":false,"property":{"type":"Identifier","name":"version"}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RateLimitedQueue"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"client"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Client"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}},"value":null},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"watcher"}},"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyWatcher"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"completedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSBooleanKeyword"}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"restored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}},{"type":"TSNullKeyword"}]}},"value":{"type":"NullLiteral"}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Uppy"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"uploader"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"||","right":{"type":"StringLiteral","value":"Transloadit"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"defaultLocale"}},"right":{"type":"Identifier","name":"locale"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"RateLimitedQueue"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"limit"}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nInit"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"Client"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"service"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"service"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"client"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"getClientVersion"}}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errorReporting"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"errorReporting"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"rateLimitedQueue"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}}]}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"completedFiles"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"create"}},"arguments":[{"type":"NullLiteral"}]}}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"getClientVersion"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"list"},"init":{"type":"ArrayExpression","elements":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"uppy-core:","cooked":"uppy-core:"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"uppy-transloadit:","cooked":"uppy-transloadit:"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"Tus"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"uppy-tus:","cooked":"uppy-tus:"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"addPluginVersion"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"pluginName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"versionName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"Identifier","name":"pluginName"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"plugin"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"versionName"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":":","cooked":":"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"XHRUpload"},{"type":"StringLiteral","value":"uppy-xhr-upload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"AwsS3"},{"type":"StringLiteral","value":"uppy-aws-s3"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"AwsS3Multipart"},{"type":"StringLiteral","value":"uppy-aws-s3-multipart"}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Dropbox"},{"type":"StringLiteral","value":"uppy-dropbox"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Box"},{"type":"StringLiteral","value":"uppy-box"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Facebook"},{"type":"StringLiteral","value":"uppy-facebook"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"GoogleDrive"},{"type":"StringLiteral","value":"uppy-google-drive"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"GooglePhotos"},{"type":"StringLiteral","value":"uppy-google-photos"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Instagram"},{"type":"StringLiteral","value":"uppy-instagram"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"OneDrive"},{"type":"StringLiteral","value":"uppy-onedrive"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Zoom"},{"type":"StringLiteral","value":"uppy-zoom"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Url"},{"type":"StringLiteral","value":"uppy-url"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"clientName"}},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"clientName"}}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":","}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"attachAssemblyMetadata"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"status","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"meta"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly_url"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_url"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"filename"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fieldname"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"tus"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"tus"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"endpoint"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"tus_url"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"addRequestId"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"remote"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"remote"}}]},"init":{"type":"Identifier","name":"file"}}],"kind":"let"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"operator":"&&","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"TL_COMPANION"},"computed":false,"property":{"type":"Identifier","name":"test"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"companionUrl"}}]}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newHost"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"companion_url"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"\\/$","flags":""},{"type":"StringLiteral","value":""}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"path"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"url"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"companionUrl"}},{"type":"StringLiteral","value":""}]},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"^\\/","flags":""},{"type":"StringLiteral","value":""}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"remote"},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"companionUrl"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"newHost"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"url"},"computed":false,"shorthand":false,"value":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"newHost"},{"type":"Identifier","name":"path"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}]}}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"file"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}}]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"assign"}},"arguments":[{"type":"Identifier","name":"newFile"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"meta"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"tus"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"tus"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"remote"}}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"newFile"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssembly"}},"computed":false,"kind":"method","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"assemblyOptions","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"OptionsWithRestructuredFields"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"[Transloadit] Create Assembly"}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newAssembly"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"createAssembly"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"assemblyOptions"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expectedFiles"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}}}]}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"id"}}]}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"includes"}},"arguments":[{"type":"Identifier","name":"id"}]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"cancelAssembly"}},"arguments":[{"type":"Identifier","name":"newAssembly"}]}}},{"type":"ReturnStatement","argument":{"type":"NullLiteral"}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assembly"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Assembly"},"arguments":[{"type":"Identifier","name":"newAssembly"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"status"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"status"}}]},"init":{"type":"Identifier","name":"assembly"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assemblyID"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"attachAssemblyMetadata"}}},"arguments":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"status"}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"updatedFiles"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-created"},{"type":"Identifier","name":"status"},{"type":"Identifier","name":"fileIDs"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"assemblyID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"[Transloadit] Created Assembly ","cooked":"[Transloadit] Created Assembly "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"assembly"}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"wrapped"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"ErrorWithCause"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"creatingAssemblyFailed"}]},{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"message"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":": ","cooked":": "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cause"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"err"}}]}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"StringLiteral","value":"details"},"operator":"in","right":{"type":"Identifier","name":"err"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"wrapped"},"computed":false,"property":{"type":"Identifier","name":"details"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"details"}}}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"StringLiteral","value":"assembly"},"operator":"in","right":{"type":"Identifier","name":"err"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"wrapped"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}}}],"directives":[]},"alternate":null},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"wrapped"}}],"directives":[]}},"finalizer":null}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssemblyWatcher"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"idOrArrayOfIds","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"ids"},"init":{"type":"ConditionalExpression","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Array"},"computed":false,"property":{"type":"Identifier","name":"isArray"}},"arguments":[{"type":"Identifier","name":"idOrArrayOfIds"}]},"consequent":{"type":"Identifier","name":"idOrArrayOfIds"},"alternate":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"idOrArrayOfIds"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"watcher"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"AssemblyWatcher"},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},{"type":"Identifier","name":"ids"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"watcher"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"assembly-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssemblyFiles"}},"arguments":[{"type":"Identifier","name":"id"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"completedFiles"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"BooleanLiteral","value":true}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"watcher"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"assembly-error"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesFromAssembly"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssemblyFiles"}},"arguments":[{"type":"Identifier","name":"id"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesFromAssembly"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesFromAssembly"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"tus"}}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"error"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"watcher"}}},"right":{"type":"Identifier","name":"watcher"}}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"shouldWaitAfterUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForEncoding"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForMetadata"}}}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"reserveFiles"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}}},{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"all"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"reserveFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}]}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadURLAvailable"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"rawFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"rawFile"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"transloadit"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"assembly"},"optional":true}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"status"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"status"}}]},"init":{"type":"TSNonNullExpression","expression":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"status"},{"type":"Identifier","name":"file"}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"err"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:import-error"},{"type":"Identifier","name":"status"},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"Identifier","name":"err"}]}}],"directives":[]}}]}}],"directives":[]}}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"findFile"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadedFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ForStatement","init":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"i"},"init":{"type":"NumericLiteral","value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"i"},"operator":"<","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"update":{"type":"UpdateExpression","operator":"++","prefix":false,"argument":{"type":"Identifier","name":"i"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"i"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"uploadURL"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"tus_upload_url"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"file"}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"tus"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"tus"}},"computed":false,"property":{"type":"Identifier","name":"uploadUrl"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"tus_upload_url"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"file"}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"is_tus_file"}}},"consequent":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"size"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"file"}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadComplete"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assemblyId","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"uploadedFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPluginState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"findFile"}}},"arguments":[{"type":"Identifier","name":"uploadedFile"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"file"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"[Transloadit] Couldnt find the file, it was likely removed in the process"}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"files"}}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"id"}},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"assemblyId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadedFile"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:upload"},{"type":"Identifier","name":"uploadedFile"},{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssembly"}},"arguments":[]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onResult"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assemblyId","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"stepName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPluginState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"original_id"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"localId"}},"right":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"file"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},"alternate":{"type":"NullLiteral"}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"entry"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"result"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"stepName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"stepName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"assemblyId"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"results"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"results"}}},{"type":"Identifier","name":"entry"}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:result"},{"type":"Identifier","name":"stepName"},{"type":"Identifier","name":"result"},{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssembly"}},"arguments":[]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onAssemblyFinished"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"url"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},"computed":false,"property":{"type":"Identifier","name":"assembly_ssl_url"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"getAssemblyStatus"}},"arguments":[{"type":"Identifier","name":"url"}]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"finalStatus"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},"right":{"type":"Identifier","name":"finalStatus"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:complete"},{"type":"Identifier","name":"finalStatus"}]}}],"directives":[]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"cancelAssembly"}},"computed":false,"kind":"method","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"cancelAssembly"}},"arguments":[{"type":"Identifier","name":"assembly"}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-cancelled"},{"type":"Identifier","name":"assembly"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"undefined"}}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onCancelAll"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}},"consequent":{"type":"ReturnStatement","argument":null},"alternate":null},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"cancelAssembly"}}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"}}]}}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"err"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"getPersistentData"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"setData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"arg","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PersistentState"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setData"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assemblyResponse"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"}}}]}}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onRestored"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"pluginData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"savedState"},"init":{"type":"TSAsExpression","expression":{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"pluginData"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginData"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}}}},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginData"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"alternate":{"type":"ObjectExpression","properties":[]}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PersistentState"}}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"previousAssembly"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"savedState"},"computed":false,"property":{"type":"Identifier","name":"assemblyResponse"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"previousAssembly"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restoreState"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}]}]}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"results","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stepName"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"assembly_id"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"id"}}]},"init":{"type":"Identifier","name":"previousAssembly"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"uploads"}},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadedFile"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"findFile"}}},"arguments":[{"type":"Identifier","name":"uploadedFile"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"id"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadedFile"}}]}}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPluginState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"results"}}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"stepName"}],"body":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"result"},"init":null}],"kind":"const"},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"results"}},"computed":true,"property":{"type":"Identifier","name":"stepName"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"original_id"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"localId"}},"right":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"file"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},"alternate":{"type":"NullLiteral"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"results"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"result"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"stepName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"stepName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"id"}}]}]}}],"directives":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"Assembly"},"arguments":[{"type":"Identifier","name":"previousAssembly"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"}},"right":{"type":"Identifier","name":"previousAssembly"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"results"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"results"}}]}]}}],"directives":[]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restoreAssemblies"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssemblyWatcher"}}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"connectAssembly"}}},"arguments":[{"type":"TSNonNullExpression","expression":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}}]}}],"directives":[]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updateAssembly"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"update"},"optional":true},"optional":false,"arguments":[]}}],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}},"right":{"type":"CallExpression","callee":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"restoreState"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"restoreAssemblies"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"updateAssembly"},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}},"right":{"type":"NullLiteral"}}}],"directives":[]}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"Failed to restore"},{"type":"Identifier","name":"err"}]}}],"directives":[]}}]}}],"directives":[]}}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"connectAssembly"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"status"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"status"}}]},"init":{"type":"Identifier","name":"assembly"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"assembly"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadComplete"}}},"arguments":[{"type":"Identifier","name":"id"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyError"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-error"},{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},{"type":"Identifier","name":"error"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"executing"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-executing"},{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"execution-progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"details","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"progress_combined"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:execution-progress"},{"type":"Identifier","name":"details"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"details"},"computed":false,"property":{"type":"Identifier","name":"progress_combined"}},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":null}],"kind":"const"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"details"},"computed":false,"property":{"type":"Identifier","name":"progress_combined"}},"operator":"/","right":{"type":"NumericLiteral","value":100}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"encoding"}]}}]}]}}],"directives":[]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForEncoding"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"result"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"stepName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onResult"}}},"arguments":[{"type":"Identifier","name":"id"},{"type":"Identifier","name":"stepName"},{"type":"Identifier","name":"result"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForEncoding"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"finished"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onAssemblyFinished"}}},"arguments":[{"type":"Identifier","name":"assembly"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForMetadata"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"metadata"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onAssemblyFinished"}}},"arguments":[{"type":"Identifier","name":"assembly"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":null}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"ok"}},"operator":"===","right":{"type":"StringLiteral","value":"ASSEMBLY_COMPLETE"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"assembly"}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"connect"}},"arguments":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"assembly"}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"prepareUpload"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assemblyOptions"},"init":{"type":"TSAsExpression","expression":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"assemblyOptions"}}},"operator":"===","right":{"type":"StringLiteral","value":"function"}},"consequent":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"assemblyOptions"}},"arguments":[]}},"alternate":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"assemblyOptions"}}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"OptionsWithRestructuredFields"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"??=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"assemblyOptions"},"computed":false,"property":{"type":"Identifier","name":"fields"}},"right":{"type":"ObjectExpression","properties":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"validateParams"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"assemblyOptions"},"computed":false,"property":{"type":"Identifier","name":"params"}}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assembly"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"operator":"??","right":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssembly"}}},"arguments":[{"type":"Identifier","name":"fileIDs"},{"type":"Identifier","name":"assemblyOptions"}]}}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"assembly"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"All files were canceled after assembly was created"}]}},"alternate":null},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"reserveFiles"}}},"arguments":[{"type":"Identifier","name":"assembly"},{"type":"Identifier","name":"fileIDs"}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssemblyWatcher"}}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"connectAssembly"}}},"arguments":[{"type":"Identifier","name":"assembly"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"err"}]}}],"directives":[]}}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}},"finalizer":null}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"afterUpload"}},"value":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}}},"id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assemblyID"},"init":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"assembly_id"},"optional":false}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"closeSocketConnections"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"close"},"optional":true},"optional":false,"arguments":[]}}],"directives":[]}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"shouldWaitAfterUpload"}}},"arguments":[]}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"closeSocketConnections"},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"status"},"init":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"status"},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"status"}]}}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"assemblyID"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"incompleteFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hasProperty"},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"completedFiles"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"incompleteFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"indeterminate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"encoding"}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"watcher"}}},"computed":false,"property":{"type":"Identifier","name":"promise"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"closeSocketConnections"},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"status"},"init":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"status"},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"status"}]}}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"handler":null,"finalizer":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"undefined"}}}],"directives":[]}}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"closeAssemblyIfExists"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"close"},"optional":true},"optional":false,"arguments":[]}}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onError"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"closeAssemblyIfExists"}}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"undefined"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"submitError"}},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"CallExpression","callee":{"type":"Identifier","name":"sendErrorToConsole"},"arguments":[{"type":"Identifier","name":"err"}]}]}}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onTusError"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"err","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"closeAssemblyIfExists"}}},"arguments":[]}},{"type":"IfStatement","test":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"message"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"startsWith"},"optional":true},"optional":false,"arguments":[{"type":"StringLiteral","value":"tus: "}]},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"endpoint"},"init":{"type":"TSAsExpression","expression":{"type":"OptionalMemberExpression","object":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TusDetailedError"}}},"computed":false,"property":{"type":"Identifier","name":"originalRequest"}},"computed":false,"property":{"type":"Identifier","name":"getUnderlyingObject"},"optional":true},"optional":false,"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"responseURL"},"optional":true},"typeAnnotation":{"type":"TSStringKeyword"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"submitError"}},"arguments":[{"type":"Identifier","name":"err"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"endpoint"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"endpoint"}}]}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"CallExpression","callee":{"type":"Identifier","name":"sendErrorToConsole"},"arguments":[{"type":"Identifier","name":"err"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"install"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"prepareUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"afterUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onError"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onCancelAll"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onTusError"}}}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadURLAvailable"}}}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"Tus"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"storeFingerprintForResuming"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedMetaFields"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"limit"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"limit"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"rateLimitedQueue"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"retryDelays"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"retryDelays"}}}]}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restore:get-data"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"getPersistentData"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restored"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onRestored"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"results"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"uninstall"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"prepareUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"afterUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"off"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onError"}}}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"off"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadURLAvailable"}}}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getAssembly"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}},{"type":"TSUndefinedKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getAssemblyFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assemblyID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"transloadit"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"assembly"},"optional":true},"operator":"===","right":{"type":"Identifier","name":"assemblyID"}}}],"directives":[]}}]}}],"directives":[]}}]}}},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[{"type":"ExportSpecifier","local":{"type":"Identifier","name":"COMPANION_URL"},"exportKind":"value","exported":{"type":"Identifier","name":"COMPANION_URL"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"COMPANION_ALLOWED_HOSTS"},"exportKind":"value","exported":{"type":"Identifier","name":"COMPANION_ALLOWED_HOSTS"}}],"source":null,"declaration":null}],"directives":[]}}},"after":{"packages/@uppy/transloadit/src/index.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"hasProperty"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/hasProperty"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"ErrorWithCause"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/ErrorWithCause"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"RateLimitedQueue"},"importKind":"value","local":{"type":"Identifier","name":"RateLimitedQueue"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/RateLimitedQueue"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}}],"source":{"type":"StringLiteral","value":"@uppy/core/lib/BasePlugin.js"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"DefinePluginOpts"},"importKind":"value","local":{"type":"Identifier","name":"DefinePluginOpts"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PluginOpts"},"importKind":"value","local":{"type":"Identifier","name":"PluginOpts"}}],"source":{"type":"StringLiteral","value":"@uppy/core/lib/BasePlugin.js"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Tus"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"TusDetailedError"},"local":{"type":"Identifier","name":"TusDetailedError"},"importKind":"type"}],"source":{"type":"StringLiteral","value":"@uppy/tus"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Uppy"},"importKind":"value","local":{"type":"Identifier","name":"Uppy"}}],"source":{"type":"StringLiteral","value":"@uppy/core"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Assembly"}}],"source":{"type":"StringLiteral","value":"./Assembly.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Client"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"AssemblyError"},"importKind":"value","local":{"type":"Identifier","name":"AssemblyError"}}],"source":{"type":"StringLiteral","value":"./Client.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AssemblyWatcher"}}],"source":{"type":"StringLiteral","value":"./AssemblyWatcher.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"locale"}}],"source":{"type":"StringLiteral","value":"./locale.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"packageJson"}}],"source":{"type":"StringLiteral","value":"../package.json"}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyFile"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"basename"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"ext"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"size"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"mime"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"type"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"field"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"md5hash"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"is_tus_file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_md5hash"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_basename"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"original_path"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"ssl_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"tus_upload_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSAnyKeyword"}]}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyResult"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"AssemblyFile"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"cost"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"execTime"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"queue"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"queueTime"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"localId"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyResponse"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"ok"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"parent_id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"account_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"template_id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"instance"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly_ssl_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uppyserver_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"companion_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"websocket_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"tus_url"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bytes_received"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bytes_expected"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"upload_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"client_agent"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"client_ip"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"client_referer"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"transloadit_client"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"start_date"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"upload_meta_data_extracted"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"warnings"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"is_infinite"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"has_dupe_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"execution_start"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"execution_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"queue_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"jobs_queue_duration"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_start"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_url"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_status"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_response_code"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_duration"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"last_job_completed"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSAnyKeyword"}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"running_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bytes_usage"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"executing_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSAnyKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"started_jobs"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"parent_assembly_status"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"params"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"template"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSAnyKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"merged_params"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploads"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"results"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"build_id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stderr"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stdout"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"reason"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyParameters"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"auth"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"key"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"expires"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"template_id"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"steps"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"step","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSIndexSignature","parameters":[{"type":"Identifier","name":"name","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSStringKeyword"}]}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"notify_url"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"AssemblyOptions"},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"params"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyParameters"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}]}},{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"signature"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"OptionsWithRestructuredFields"},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Omit"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"fields"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"fields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}]}}}}]}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"service"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"errorReporting"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"waitForEncoding"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"waitForMetadata"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"importFromUploadURLs"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"alwaysRunAssembly"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"limit"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"clientName"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"retryDelays"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSNumberKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assemblyOptions"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}},{"type":"TSParenthesizedType","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyOptions"}}]}}}}]}}}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"TSSatisfiesExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"service"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"https://api2.transloadit.com"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errorReporting"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"waitForEncoding"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"waitForMetadata"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"alwaysRunAssembly"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"importFromUploadURLs"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"limit"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":20}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"retryDelays"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"NumericLiteral","value":7000},{"type":"NumericLiteral","value":10000},{"type":"NumericLiteral","value":15000},{"type":"NumericLiteral","value":20000}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"clientName"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}}}}],"kind":"const"},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Opts"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefinePluginOpts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"defaultOptions"}}}]}}}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"TransloaditState"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"files"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}]}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"results"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Array"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stepName"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}]}}}}]}},{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"PersistentState"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assemblyResponse"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}]}},{"type":"TSModuleDeclaration","id":{"type":"StringLiteral","value":"@uppy/core"},"body":{"type":"TSModuleBlock","body":[{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyEventMap"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"restored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"pluginData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditState"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"restore:get-data"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"setData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"arg","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PersistentState"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-created"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}},{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-cancel"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:import-error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}},{"type":"Identifier","name":"fileID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-executing"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:assembly-cancelled"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:upload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}},{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"stepName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}},{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:complete"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}},{"type":"TSPropertySignature","key":{"type":"StringLiteral","value":"transloadit:execution-progress"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"details","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"progress_combined"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}]}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}]}}}]},"declare":true},{"type":"TSModuleDeclaration","id":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"},"body":{"type":"TSModuleBlock","body":[{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"transloadit"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"tus"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadUrl"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNullKeyword"}]}}}]}}}]}}}]},"declare":true},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sendErrorToConsole"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"originalErr","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"ErrorWithCause"},"arguments":[{"type":"StringLiteral","value":"Failed to send error to the client"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cause"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"err"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"arguments":[{"type":"Identifier","name":"error"},{"type":"Identifier","name":"originalErr"}]}}],"directives":[]}}}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"validateParams"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"params","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyParameters"}},{"type":"TSNullKeyword"}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"params"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Transloadit: The `params` option is required."}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"params"}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"consequent":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"params"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"JSON"},"computed":false,"property":{"type":"Identifier","name":"parse"}},"arguments":[{"type":"Identifier","name":"params"}]}}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"ErrorWithCause"},"arguments":[{"type":"StringLiteral","value":"Transloadit: The `params` option is a malformed JSON string."},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cause"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"err"}}]}]}}],"directives":[]}},"finalizer":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"params"}},"computed":false,"property":{"type":"Identifier","name":"auth"}}},"operator":"||","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"params"}},"computed":false,"property":{"type":"Identifier","name":"auth"}},"computed":false,"property":{"type":"Identifier","name":"key"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"BinaryExpression","left":{"type":"StringLiteral","value":"Transloadit: The `params.auth.key` option is required. "},"operator":"+","right":{"type":"StringLiteral","value":"You can find your Transloadit API key at https://transloadit.com/c/template-credentials"}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"COMPANION_URL"},"init":{"type":"StringLiteral","value":"https://api2.transloadit.com/companion"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"COMPANION_ALLOWED_HOSTS"},"init":{"type":"RegExpLiteral","pattern":"\\.transloadit\\.com$","flags":""}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"TL_COMPANION"},"init":{"type":"RegExpLiteral","pattern":"https?:\\/\\/api2(?:-\\w+)?\\.transloadit\\.com\\/companion","flags":""}}],"kind":"const"},{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Transloadit"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Opts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditState"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":true,"key":{"type":"Identifier","name":"VERSION"},"computed":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"packageJson"},"computed":false,"property":{"type":"Identifier","name":"version"}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}},"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RateLimitedQueue"}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"client"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Client"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}},"value":null},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"watcher"}},"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyWatcher"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"completedFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSBooleanKeyword"}]}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"restored"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}},{"type":"TSNullKeyword"}]}},"value":{"type":"NullLiteral"}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Uppy"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TransloaditOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"uploader"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"||","right":{"type":"StringLiteral","value":"Transloadit"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"defaultLocale"}},"right":{"type":"Identifier","name":"locale"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"RateLimitedQueue"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"limit"}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18nInit"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"Client"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"service"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"service"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"client"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"getClientVersion"}}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"errorReporting"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"errorReporting"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"rateLimitedQueue"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}}]}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"completedFiles"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"create"}},"arguments":[{"type":"NullLiteral"}]}}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"getClientVersion"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"list"},"init":{"type":"ArrayExpression","elements":[{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"uppy-core:","cooked":"uppy-core:"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"uppy-transloadit:","cooked":"uppy-transloadit:"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"TemplateLiteral","expressions":[{"type":"MemberExpression","object":{"type":"Identifier","name":"Tus"},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"uppy-tus:","cooked":"uppy-tus:"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"addPluginVersion"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"pluginName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"versionName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"Identifier","name":"pluginName"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"plugin"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"versionName"},{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"VERSION"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":":","cooked":":"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"XHRUpload"},{"type":"StringLiteral","value":"uppy-xhr-upload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"AwsS3"},{"type":"StringLiteral","value":"uppy-aws-s3"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"AwsS3Multipart"},{"type":"StringLiteral","value":"uppy-aws-s3-multipart"}]}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Dropbox"},{"type":"StringLiteral","value":"uppy-dropbox"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Box"},{"type":"StringLiteral","value":"uppy-box"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Facebook"},{"type":"StringLiteral","value":"uppy-facebook"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"GoogleDrive"},{"type":"StringLiteral","value":"uppy-google-drive"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"GooglePhotos"},{"type":"StringLiteral","value":"uppy-google-photos"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Instagram"},{"type":"StringLiteral","value":"uppy-instagram"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"OneDrive"},{"type":"StringLiteral","value":"uppy-onedrive"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Zoom"},{"type":"StringLiteral","value":"uppy-zoom"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"addPluginVersion"},"arguments":[{"type":"StringLiteral","value":"Url"},{"type":"StringLiteral","value":"uppy-url"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"clientName"}},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"clientName"}}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"list"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":","}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"attachAssemblyMetadata"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"status","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"meta"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly_url"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_url"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"filename"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fieldname"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"tus"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"tus"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"endpoint"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"tus_url"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"addRequestId"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"remote"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"remote"}}]},"init":{"type":"Identifier","name":"file"}}],"kind":"let"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"operator":"&&","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"TL_COMPANION"},"computed":false,"property":{"type":"Identifier","name":"test"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"companionUrl"}}]}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newHost"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"companion_url"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"\\/$","flags":""},{"type":"StringLiteral","value":""}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"path"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"url"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}},"computed":false,"property":{"type":"Identifier","name":"companionUrl"}},{"type":"StringLiteral","value":""}]},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"^\\/","flags":""},{"type":"StringLiteral","value":""}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"remote"},"right":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"remote"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"companionUrl"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"newHost"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"url"},"computed":false,"shorthand":false,"value":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"newHost"},{"type":"Identifier","name":"path"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}]}}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"file"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}}]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"assign"}},"arguments":[{"type":"Identifier","name":"newFile"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"meta"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"tus"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"tus"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"remote"}}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"newFile"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssembly"}},"computed":false,"kind":"method","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"assemblyOptions","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"OptionsWithRestructuredFields"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"[Transloadit] Create Assembly"}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newAssembly"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"createAssembly"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"assemblyOptions"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expectedFiles"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}}}]}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"id"}}]}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"includes"}},"arguments":[{"type":"Identifier","name":"id"}]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":0}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"!==","right":{"type":"NumericLiteral","value":0}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"cancelAssembly"}},"arguments":[{"type":"Identifier","name":"newAssembly"}]}}},{"type":"ReturnStatement","argument":{"type":"NullLiteral"}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assembly"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Assembly"},"arguments":[{"type":"Identifier","name":"newAssembly"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"status"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"status"}}]},"init":{"type":"Identifier","name":"assembly"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assemblyID"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updatedFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}]}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"updatedFiles"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"attachAssemblyMetadata"}}},"arguments":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"status"}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"updatedFiles"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-created"},{"type":"Identifier","name":"status"},{"type":"Identifier","name":"fileIDs"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"assemblyID"}],"quasis":[{"type":"TemplateElement","value":{"raw":"[Transloadit] Created Assembly ","cooked":"[Transloadit] Created Assembly "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"assembly"}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"wrapped"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"ErrorWithCause"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"creatingAssemblyFailed"}]},{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"message"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":": ","cooked":": "},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cause"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"err"}}]}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"StringLiteral","value":"details"},"operator":"in","right":{"type":"Identifier","name":"err"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"wrapped"},"computed":false,"property":{"type":"Identifier","name":"details"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"details"}}}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"StringLiteral","value":"assembly"},"operator":"in","right":{"type":"Identifier","name":"err"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"wrapped"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}}}],"directives":[]},"alternate":null},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"wrapped"}}],"directives":[]}},"finalizer":null}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssemblyWatcher"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"idOrArrayOfIds","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"ids"},"init":{"type":"ConditionalExpression","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Array"},"computed":false,"property":{"type":"Identifier","name":"isArray"}},"arguments":[{"type":"Identifier","name":"idOrArrayOfIds"}]},"consequent":{"type":"Identifier","name":"idOrArrayOfIds"},"alternate":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"idOrArrayOfIds"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"watcher"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"AssemblyWatcher"},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},{"type":"Identifier","name":"ids"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"watcher"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"assembly-complete"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssemblyFiles"}},"arguments":[{"type":"Identifier","name":"id"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"completedFiles"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"BooleanLiteral","value":true}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"watcher"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"assembly-error"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"id","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"filesFromAssembly"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssemblyFiles"}},"arguments":[{"type":"Identifier","name":"id"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesFromAssembly"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"filesFromAssembly"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"delete","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"computed":false,"property":{"type":"Identifier","name":"tus"}}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"Identifier","name":"error"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"watcher"}}},"right":{"type":"Identifier","name":"watcher"}}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"shouldWaitAfterUpload"}},"kind":"method","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForEncoding"}},"operator":"||","right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForMetadata"}}}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"reserveFiles"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}}},{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"all"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"reserveFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}]}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadURLAvailable"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"rawFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"rawFile"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"transloadit"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"assembly"},"optional":true}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"status"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"status"}}]},"init":{"type":"TSNonNullExpression","expression":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"status"},{"type":"Identifier","name":"file"}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"err"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:import-error"},{"type":"Identifier","name":"status"},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"Identifier","name":"err"}]}}],"directives":[]}}]}}],"directives":[]}}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"findFile"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadedFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ForStatement","init":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"i"},"init":{"type":"NumericLiteral","value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"i"},"operator":"<","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"update":{"type":"UpdateExpression","operator":"++","prefix":false,"argument":{"type":"Identifier","name":"i"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"i"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"uploadURL"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"tus_upload_url"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"file"}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"tus"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"tus"}},"computed":false,"property":{"type":"Identifier","name":"uploadUrl"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"tus_upload_url"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"file"}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"is_tus_file"}}},"consequent":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"===","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"size"}}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"file"}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadComplete"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assemblyId","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"uploadedFile","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPluginState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"findFile"}}},"arguments":[{"type":"Identifier","name":"uploadedFile"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"file"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"[Transloadit] Couldnt find the file, it was likely removed in the process"}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"files"}}},{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"id"}},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"assemblyId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadedFile"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:upload"},{"type":"Identifier","name":"uploadedFile"},{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssembly"}},"arguments":[]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onResult"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assemblyId","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"stepName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPluginState"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"original_id"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"localId"}},"right":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"file"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},"alternate":{"type":"NullLiteral"}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"entry"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"result"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"stepName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"stepName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"assemblyId"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"results"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"results"}}},{"type":"Identifier","name":"entry"}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:result"},{"type":"Identifier","name":"stepName"},{"type":"Identifier","name":"result"},{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getAssembly"}},"arguments":[]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onAssemblyFinished"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"url"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},"computed":false,"property":{"type":"Identifier","name":"assembly_ssl_url"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"getAssemblyStatus"}},"arguments":[{"type":"Identifier","name":"url"}]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"finalStatus"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},"right":{"type":"Identifier","name":"finalStatus"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:complete"},{"type":"Identifier","name":"finalStatus"}]}}],"directives":[]}}]}}],"directives":[]}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"cancelAssembly"}},"computed":false,"kind":"method","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"cancelAssembly"}},"arguments":[{"type":"Identifier","name":"assembly"}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-cancelled"},{"type":"Identifier","name":"assembly"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"undefined"}}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onCancelAll"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}},"consequent":{"type":"ReturnStatement","argument":null},"alternate":null},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"cancelAssembly"}}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"}}]}}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"Identifier","name":"err"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"getPersistentData"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"setData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[{"type":"Identifier","name":"arg","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PersistentState"}}]}}}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}}}}}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setData"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"computed":true,"key":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assemblyResponse"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"}}}]}}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onRestored"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"pluginData","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSUnknownKeyword"}]}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"savedState"},"init":{"type":"TSAsExpression","expression":{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"pluginData"},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginData"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}}}},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginData"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"alternate":{"type":"ObjectExpression","properties":[]}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"PersistentState"}}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"previousAssembly"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"savedState"},"computed":false,"property":{"type":"Identifier","name":"assemblyResponse"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"previousAssembly"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restoreState"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}]}]}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"results","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"result"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"stepName"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"id"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"assembly"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"assembly_id"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"id"}}]},"init":{"type":"Identifier","name":"previousAssembly"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"uploads"}},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uploadedFile"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"findFile"}}},"arguments":[{"type":"Identifier","name":"uploadedFile"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploadedFile"},"computed":false,"property":{"type":"Identifier","name":"id"}}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"file"}},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"id"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadedFile"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadedFile"}}]}}}],"directives":[]}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"state"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getPluginState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"results"}}]},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"stepName"}],"body":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"result"},"init":null}],"kind":"const"},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"results"}},"computed":true,"property":{"type":"Identifier","name":"stepName"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"state"},"computed":false,"property":{"type":"Identifier","name":"files"}},"computed":true,"property":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"original_id"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"localId"}},"right":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"file"},"consequent":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}},"alternate":{"type":"NullLiteral"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"results"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"id"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"result"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"stepName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"stepName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"assembly"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"id"}}]}]}}],"directives":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"NewExpression","callee":{"type":"Identifier","name":"Assembly"},"arguments":[{"type":"Identifier","name":"previousAssembly"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"}},"right":{"type":"Identifier","name":"previousAssembly"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"results"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"results"}}]}]}}],"directives":[]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restoreAssemblies"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssemblyWatcher"}}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"previousAssembly"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"connectAssembly"}}},"arguments":[{"type":"TSNonNullExpression","expression":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}}}]}}],"directives":[]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"updateAssembly"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"update"},"optional":true},"optional":false,"arguments":[]}}],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}},"right":{"type":"CallExpression","callee":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"restoreState"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"restoreAssemblies"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"updateAssembly"},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}},"right":{"type":"NullLiteral"}}}],"directives":[]}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"Failed to restore"},{"type":"Identifier","name":"err"}]}}],"directives":[]}}]}}],"directives":[]}}},{"type":"ClassPrivateMethod","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"connectAssembly"}},"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assembly","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Assembly"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"status"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"status"}}]},"init":{"type":"Identifier","name":"assembly"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"status"},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"assembly"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyFile"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadComplete"}}},"arguments":[{"type":"Identifier","name":"id"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"error","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyError"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"error"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-error"},{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},{"type":"Identifier","name":"error"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"executing"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:assembly-executing"},{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"execution-progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"details","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"progress_combined"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSNumberKeyword"}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"transloadit:execution-progress"},{"type":"Identifier","name":"details"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"details"},"computed":false,"property":{"type":"Identifier","name":"progress_combined"}},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":null}],"kind":"const"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"details"},"computed":false,"property":{"type":"Identifier","name":"progress_combined"}},"operator":"/","right":{"type":"NumericLiteral","value":100}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"encoding"}]}}]}]}}],"directives":[]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForEncoding"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"result"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"stepName","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"result","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResult"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onResult"}}},"arguments":[{"type":"Identifier","name":"id"},{"type":"Identifier","name":"stepName"},{"type":"Identifier","name":"result"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForEncoding"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"finished"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onAssemblyFinished"}}},"arguments":[{"type":"Identifier","name":"assembly"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"waitForMetadata"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"metadata"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onAssemblyFinished"}}},"arguments":[{"type":"Identifier","name":"assembly"}]}}],"directives":[]}}]}}],"directives":[]},"alternate":null}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"ok"}},"operator":"===","right":{"type":"StringLiteral","value":"ASSEMBLY_COMPLETE"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"assembly"}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"connect"}},"arguments":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"assembly"}}],"directives":[]}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"prepareUpload"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assemblyOptions"},"init":{"type":"TSAsExpression","expression":{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"assemblyOptions"}}},"operator":"===","right":{"type":"StringLiteral","value":"function"}},"consequent":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"assemblyOptions"}},"arguments":[]}},"alternate":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"assemblyOptions"}}},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"OptionsWithRestructuredFields"}}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"??=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"assemblyOptions"},"computed":false,"property":{"type":"Identifier","name":"fields"}},"right":{"type":"ObjectExpression","properties":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"validateParams"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"assemblyOptions"},"computed":false,"property":{"type":"Identifier","name":"params"}}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assembly"},"init":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"operator":"??","right":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssembly"}}},"arguments":[{"type":"Identifier","name":"fileIDs"},{"type":"Identifier","name":"assemblyOptions"}]}}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"assembly"},"operator":"==","right":{"type":"NullLiteral"}},"consequent":{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"All files were canceled after assembly was created"}]}},"alternate":null},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"reserveFiles"}}},"arguments":[{"type":"Identifier","name":"assembly"},{"type":"Identifier","name":"fileIDs"}]}}}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"createAssemblyWatcher"}}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"assembly"},"computed":false,"property":{"type":"Identifier","name":"status"}},"computed":false,"property":{"type":"Identifier","name":"assembly_id"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"connectAssembly"}}},"arguments":[{"type":"Identifier","name":"assembly"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"Identifier","name":"err"}]}}],"directives":[]}}]}},{"type":"ThrowStatement","argument":{"type":"Identifier","name":"err"}}],"directives":[]}},"finalizer":null}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"afterUpload"}},"value":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSVoidKeyword"}]}}},"id":null,"generator":false,"async":true,"params":[{"type":"Identifier","name":"fileIDs","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"Identifier","name":"uploadID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"restored"}}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"files"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"error"}}}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"assemblyID"},"init":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"assembly_id"},"optional":false}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"closeSocketConnections"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"close"},"optional":true},"optional":false,"arguments":[]}}],"directives":[]}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"shouldWaitAfterUpload"}}},"arguments":[]}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"closeSocketConnections"},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"status"},"init":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"status"},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"status"}]}}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"assemblyID"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}},{"type":"ReturnStatement","argument":null}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"incompleteFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hasProperty"},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"completedFiles"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"id"}}]}}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"incompleteFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"indeterminate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"encoding"}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"watcher"}}},"computed":false,"property":{"type":"Identifier","name":"promise"}}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"closeSocketConnections"},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"status"},"init":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"status"},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"transloadit"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"status"}]}}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"handler":null,"finalizer":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"undefined"}}}],"directives":[]}}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"closeAssemblyIfExists"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"close"},"optional":true},"optional":false,"arguments":[]}}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onError"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"name"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"message"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"details"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"closeAssemblyIfExists"}}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"right":{"type":"Identifier","name":"undefined"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"submitError"}},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"CallExpression","callee":{"type":"Identifier","name":"sendErrorToConsole"},"arguments":[{"type":"Identifier","name":"err"}]}]}}],"directives":[]}}},{"type":"ClassPrivateProperty","static":false,"key":{"type":"PrivateName","id":{"type":"Identifier","name":"onTusError"}},"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUndefinedKeyword"}]}}},{"type":"Identifier","name":"err","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Error"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"closeAssemblyIfExists"}}},"arguments":[]}},{"type":"IfStatement","test":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"err"},"computed":false,"property":{"type":"Identifier","name":"message"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"startsWith"},"optional":true},"optional":false,"arguments":[{"type":"StringLiteral","value":"tus: "}]},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"endpoint"},"init":{"type":"TSAsExpression","expression":{"type":"OptionalMemberExpression","object":{"type":"OptionalCallExpression","callee":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"TSAsExpression","expression":{"type":"Identifier","name":"err"},"typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TusDetailedError"}}},"computed":false,"property":{"type":"Identifier","name":"originalRequest"}},"computed":false,"property":{"type":"Identifier","name":"getUnderlyingObject"},"optional":true},"optional":false,"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"responseURL"},"optional":true},"typeAnnotation":{"type":"TSStringKeyword"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"client"}},"computed":false,"property":{"type":"Identifier","name":"submitError"}},"arguments":[{"type":"Identifier","name":"err"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"endpoint"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"endpoint"}}]}]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"CallExpression","callee":{"type":"Identifier","name":"sendErrorToConsole"},"arguments":[{"type":"Identifier","name":"err"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"install"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"prepareUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"afterUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onError"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onCancelAll"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onTusError"}}}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadURLAvailable"}}}]}}],"directives":[]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"Tus"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"storeFingerprintForResuming"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedMetaFields"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"limit"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"limit"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"rateLimitedQueue"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"rateLimitedQueue"}}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"retryDelays"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"retryDelays"}}}]}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restore:get-data"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"getPersistentData"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restored"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onRestored"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"setPluginState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"results"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"uninstall"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"prepareUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"afterUpload"}}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"off"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onError"}}}]}},{"type":"IfStatement","test":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"importFromUploadURLs"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"off"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"PrivateName","id":{"type":"Identifier","name":"onFileUploadURLAvailable"}}}]}}],"directives":[]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}]}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getAssembly"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"AssemblyResponse"}},{"type":"TSUndefinedKeyword"}]}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"assembly"}},"computed":false,"property":{"type":"Identifier","name":"status"},"optional":true}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getAssemblyFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"assemblyID","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"uppy"}},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"OptionalMemberExpression","object":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"transloadit"},"optional":true},"computed":false,"property":{"type":"Identifier","name":"assembly"},"optional":true},"operator":"===","right":{"type":"Identifier","name":"assemblyID"}}}],"directives":[]}}]}}],"directives":[]}}]}}},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[{"type":"ExportSpecifier","local":{"type":"Identifier","name":"COMPANION_URL"},"exportKind":"value","exported":{"type":"Identifier","name":"COMPANION_URL"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"COMPANION_ALLOWED_HOSTS"},"exportKind":"value","exported":{"type":"Identifier","name":"COMPANION_ALLOWED_HOSTS"}}],"source":null,"declaration":null}],"directives":[]}}}},"renamedFiles":{"mappings":[],"before":{},"after":{}}}