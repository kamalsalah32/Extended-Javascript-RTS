{"addedFiles":{},"deletedFiles":{},"modifiedFiles":{"before":{"packages/@uppy/core/src/Restricter.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"match"}}],"source":{"type":"StringLiteral","value":"mime-match"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"I18n"},"importKind":"value","local":{"type":"Identifier","name":"I18n"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"NonNullableUppyOptions"},"importKind":"value","local":{"type":"Identifier","name":"NonNullableUppyOptions"}}],"source":{"type":"StringLiteral","value":"./Uppy.js"}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Restrictions"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"type"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"extension"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"size"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"name"}}]}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isGhost"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"Error"},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"file"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}},"right":{"type":"LogicalExpression","left":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"},"optional":true},"operator":"??","right":{"type":"BooleanLiteral","value":true}}}},{"type":"IfStatement","test":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"},"optional":true},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"file"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"}}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isRestriction"},"computed":false,"value":{"type":"BooleanLiteral","value":true}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Restricter"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":null,"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"getI18n"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"getOpts"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"getOpts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}},{"type":"Identifier","name":"getI18n","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"right":{"type":"Identifier","name":"getI18n"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"right":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"opts"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getOpts"},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"},"optional":true},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Array"},"computed":false,"property":{"type":"Identifier","name":"isArray"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"TypeError"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"opts"}}],"directives":[]}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateAggregateRestrictions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxTotalFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"maxNumberOfFiles"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nonGhostFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"f"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonGhostFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"+","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"operator":">","right":{"type":"Identifier","name":"maxNumberOfFiles"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"Identifier","name":"maxTotalFileSize"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalFilesSize"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"total"},{"type":"Identifier","name":"f"}],"body":{"type":"TSAsExpression","expression":{"type":"BinaryExpression","left":{"type":"Identifier","name":"total"},"operator":"+","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"??","right":{"type":"NumericLiteral","value":0}}},"typeAnnotation":{"type":"TSNumberKeyword"}}},{"type":"NumericLiteral","value":0}]}}],"kind":"let"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"addingFile"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"addingFiles"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"totalFilesSize"},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"size"}}}},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalFilesSize"},"operator":">","right":{"type":"Identifier","name":"maxTotalFileSize"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxTotalFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFile"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null}],"directives":[]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateSingleFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowedFileTypes"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"allowedFileTypes"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isCorrectFileType"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"some"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"type"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"includes"}},"arguments":[{"type":"StringLiteral","value":"/"}]},"consequent":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"consequent":{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"match"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":";.*?$","flags":""},{"type":"StringLiteral","value":""}]},{"type":"Identifier","name":"type"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":true,"property":{"type":"NumericLiteral","value":0}},"operator":"===","right":{"type":"StringLiteral","value":"."}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]},"operator":"===","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]}}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"isCorrectFileType"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"allowedFileTypesString"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadFileTypes"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"types"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"allowedFileTypesString"}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"maxFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":">","right":{"type":"Identifier","name":"maxFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"<","right":{"type":"Identifier","name":"minFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"inferiorSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"minFileSize"}]}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validate"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"addingFile"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateSingleFile"}},"arguments":[{"type":"Identifier","name":"addingFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateAggregateRestrictions"}},"arguments":[{"type":"Identifier","name":"existingFiles"},{"type":"Identifier","name":"addingFiles"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateMinNumberOfFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minNumberOfFiles"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"<","right":{"type":"Identifier","name":"minNumberOfFiles"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youHaveToAtLeastSelectX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getMissingRequiredMetaFields"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}}]}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"missingFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"missingRequiredMetaFieldOnFile"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileName"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"requiredMetaFields"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"missingFields","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"field"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"requiredMetaFields"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"hasOwn"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},{"type":"Identifier","name":"field"}]}},"operator":"||","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"computed":true,"property":{"type":"Identifier","name":"field"}},"operator":"===","right":{"type":"StringLiteral","value":""}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"missingFields"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"field"}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingFields"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"missingFields"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]}}],"directives":[]}}]}},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[{"type":"ExportSpecifier","local":{"type":"Identifier","name":"Restricter"},"exportKind":"value","exported":{"type":"Identifier","name":"Restricter"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"defaultOptions"},"exportKind":"value","exported":{"type":"Identifier","name":"defaultOptions"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"RestrictionError"},"exportKind":"value","exported":{"type":"Identifier","name":"RestrictionError"}}],"source":null,"declaration":null}],"directives":[]}},"packages/@uppy/core/src/Uppy.test.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"afterEach"},"importKind":"value","local":{"type":"Identifier","name":"afterEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"beforeEach"},"importKind":"value","local":{"type":"Identifier","name":"beforeEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"describe"},"importKind":"value","local":{"type":"Identifier","name":"describe"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"expect"},"importKind":"value","local":{"type":"Identifier","name":"expect"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"it"},"importKind":"value","local":{"type":"Identifier","name":"it"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"vi"},"importKind":"value","local":{"type":"Identifier","name":"vi"}}],"source":{"type":"StringLiteral","value":"vitest"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"assert"}}],"source":{"type":"StringLiteral","value":"node:assert"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"fs"}}],"source":{"type":"StringLiteral","value":"node:fs"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"path"}}],"source":{"type":"StringLiteral","value":"node:path"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Locale"},"importKind":"value","local":{"type":"Identifier","name":"Locale"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Core"}}],"source":{"type":"StringLiteral","value":"./index.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"UIPlugin"}}],"source":{"type":"StringLiteral","value":"./UIPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"DefinePluginOpts"},"local":{"type":"Identifier","name":"DefinePluginOpts"},"importKind":"type"},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PluginOpts"},"local":{"type":"Identifier","name":"PluginOpts"},"importKind":"type"}],"source":{"type":"StringLiteral","value":"./BasePlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"debugLogger"},"importKind":"value","local":{"type":"Identifier","name":"debugLogger"}}],"source":{"type":"StringLiteral","value":"./loggers.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin1"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin1.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin2"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin2.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPlugin"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutId"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutId.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutType"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutType.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"DeepFrozenStore"}}],"source":{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/DeepFrozenStore.mjs"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}}],"source":{"type":"StringLiteral","value":"./Uppy.ts"}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sampleImage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fs"},"computed":false,"property":{"type":"Identifier","name":"readFileSync"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"path"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"Identifier","name":"__dirname"},{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/images/image.jpg"}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"testImage"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"src/Core"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealCreateObjectUrl"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"beforeEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"mockReturnValue"}},"arguments":[{"type":"StringLiteral","value":"newUrl"}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"Identifier","name":"RealCreateObjectUrl"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should expose a class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Uppy"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should have a string `id` option that defaults to \"uppy\""},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"uppy"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"profile"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"profile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a plugin to the plugin stack"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to .use() without passing generics again"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"Identifier","name":"opts"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"StringLiteral","value":"Test"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"foo"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"foo"}},"operator":"??","right":{"type":"StringLiteral","value":"defaultFoo"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"bar"}},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"bar"}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}}],"directives":[]},{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"defaultFoo"}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefinePluginOpts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"defaultOptions"}}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"??","right":{"type":"StringLiteral","value":"Test"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"directives":[]}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should prevent the same plugin from being added more than once"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add an invalid plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPlugin"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutId"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no type"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutType"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return the plugin that matches the specified name"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"foo"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"BinaryExpression","left":{"type":"Identifier","name":"plugin"},"operator":"instanceof","right":{"type":"Identifier","name":"UIPlugin"}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call the specified method on all the plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"run"}},"arguments":[{"type":"StringLiteral","value":"hello"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should uninstall and the remove the specified plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePlugin"}},"arguments":[{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update all the plugins with the new state when the updateAll method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateAll"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"stateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newState"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should cancel all when the `cancelAll` method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":30}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should clear all uploads and files on cancelAll()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove all uploads when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should disallow remove one upload when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"throws"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"RegExpLiteral","pattern":"individualCancellation is disabled","flags":""}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove one upload when individualCancellation is enabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should close, reset and uninstall when the close method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pluginIteration"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"Identifier","name":"pluginIteration"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginIteration"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"upload hooks"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add data returned from upload hooks to the .upload() result"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pre"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"post"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"result"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"Identifier","name":"result"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"pre"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"upload"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"post"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"preprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove preprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the preprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not pass removed file IDs to next step"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"rmd.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"kept.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"kept.jpg"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileID"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"postprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove postprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the postprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should report an error if post-processing a file fails"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]},{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploaders"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove uploader"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"adding a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call onBeforeFileAdded if it was specified in the options when initialising the class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeFileAdded"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"files"}],"body":{"type":"CallExpression","callee":{"type":"Identifier","name":"onBeforeFileAdded"},"arguments":[{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"files"}}]}]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow uploading duplicate file if explicitly allowed in onBeforeFileAdded"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BooleanLiteral","value":true}}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileAddedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"fileAddedEventMock"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isRemote"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preview"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"undefined"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileAddedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file from a File object"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"fileData"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file that does not meet the restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"video/webm"}]}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, video/webm"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.webm"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a dupicate file, a file with the same id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"notARelativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the duplicate file 'foo.jpg', it already exists"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow a duplicate file if its relativePath is different, thus the id is different"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"relativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file if onBeforeFileAdded returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"source"}},"operator":"===","right":{"type":"StringLiteral","value":"vi"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the file because onBeforeFileAdded returned false."}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"with allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload with legacy allowMultipleUploads option"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not allow new files after the removeFile() if some file is still present"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files after the last removeFile()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId2"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not dedupe different files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"data"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"lastModified"}},"right":{"type":"NumericLiteral","value":1562770350937}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo푸.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo//jpg-1l3o-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return a { successful, failed } pair containing file objects"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return files with errors in the { failed } key"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"RegExpLiteral","pattern":"bar","flags":""},"computed":false,"property":{"type":"Identifier","name":"test"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This is bar and I do not like bar"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is bar and I do not like bar"}}]}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only upload files that are not already assigned to another upload id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"state"}},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload1"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file1/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file2/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file3/jpg-1e-image/jpeg"}]}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload2"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file4/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file5/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file6/jpg-1e-image/jpeg"}]}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"r"}],"body":{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":21}}},"consequent":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"r"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadID"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"cjd09qwxb000dlql4tp4doz8h"}}]},"alternate":{"type":"Identifier","name":"r"}}}]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not upload if onBeforeUpload returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"ForInStatement","left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"files"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileId"}},"computed":false,"property":{"type":"Identifier","name":"name"}},"operator":"===","right":{"type":"StringLiteral","value":"123.foo"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"files"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Not starting the upload because onBeforeUpload returned false"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"only allows a single upload() batch when allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"rejects"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot create a new upload: already uploading\\.","flags":""}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files again with allowMultipleUploadBatches: false after cancelAll() was called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"removing a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should remove the file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileRemovedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-removed"},{"type":"Identifier","name":"fileRemovedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":50}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileRemovedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"retries"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should start a new upload with failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onRetryAll"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"retry-all"},{"type":"Identifier","name":"onRetryAll"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"id"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something went wrong"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onRetryAll"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not start a new upload if there are no failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"restoring a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should restore a file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should fail to restore a file if it doesn't exist"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"get a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the specified file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"non existent file"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"getFiles"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return an empty array if there are no files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return all files as an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"empty.dat"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"NumericLiteral","value":1000}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}}]}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]},"computed":false,"property":{"type":"Identifier","name":"sort"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"empty.dat"},{"type":"StringLiteral","value":"foo.jpg"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"setOptions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change options on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lolUppy"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"autoProceed"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"lolUppy"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"autoProceed"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploadBatches"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change locale on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Cancel"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cancel"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Отмена"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Отмена"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"logOut"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Log out"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change meta on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"beep"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change restrictions on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fr_FR","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":0}},{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":1}}]}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youCanOnlyUploadFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Vous pouvez seulement téléverser: %{types}"}}]}},{"type":"ObjectMethod","method":true,"key":{"type":"Identifier","name":"pluralize"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"n"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"n"},"operator":"<=","right":{"type":"NumericLiteral","value":1}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"NumericLiteral","value":0}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"NumericLiteral","value":1}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/jpeg"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":2}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/jpeg"}]}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fr_FR"}}]}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Vous pouvez seulement téléverser: image/jpeg"}]}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fr_FR"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"meta data"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set meta data by calling setMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"boo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo2"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bur"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update meta data for a file by calling updateMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should merge meta data when add file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the progress of a file upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":72}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should work with unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"proceedUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"promise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"proceedUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishPromise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"finishUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"id"}]}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadURL"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lol"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadPromise"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"all"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"Identifier","name":"resolve"}]}}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-started"},{"type":"Identifier","name":"resolve"}]}}]}]}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"proceedUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":36}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":36}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"finishUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3456}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"uploadPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should estimate progress for unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":18}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the total progress of all file uploads"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"resetProgressEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"reset-progress"},{"type":"Identifier","name":"resetProgressEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"resetProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"allowNewUpload"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"recoveredState"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"resetProgressEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"checkRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxNumberOfFiles rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not enforce the maxNumberOfFiles rule for ghost files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileId1"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should enforce the minNumberOfFiles rule"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should throw if allowedFileTypes is not an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/gif"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"hi"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule with file extensions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":".gif"},{"type":"StringLiteral","value":".jpg"},{"type":"StringLiteral","value":".jpeg"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.JPG"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the minFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1073741824}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxTotalFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":34000}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foo1.jpg exceeds maximum allowed size of 33 KB"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should check if a file validateRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":300000}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isFolder"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mimeType"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"modifiedDate"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2016-04-13T15:11:31.204Z"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":270733}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions1"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 293 KB"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions2"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/png"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit `restriction-failed` event when some rule is violated"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"maxFileSize"},"init":{"type":"NumericLiteral","value":100}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"test.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"BinaryExpression","left":{"type":"NumericLiteral","value":2},"operator":"*","right":{"type":"Identifier","name":"maxFileSize"}}]}]}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorMessage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"Identifier","name":"restrictionsViolatedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"file"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":null,"body":{"type":"BlockStatement","body":[],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"errorMessage"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"actions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the upload-error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileId"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"filename"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"fileId"}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"this is the error"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to upload filename"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"this is the error"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"error"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the error state when receiving the upload event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"updateOnlineStatus"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealNavigatorOnline"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"mockNavigatorOnline"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"status","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"defineProperty"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},{"type":"StringLiteral","value":"onLine"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"status"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"writable"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}},"right":{"type":"Identifier","name":"RealNavigatorOnline"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit the correct event based on whether there is a network connection"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"offlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"backOnlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-offline"},{"type":"Identifier","name":"offlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-online"},{"type":"Identifier","name":"onlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"back-online"},{"type":"Identifier","name":"backOnlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"info"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a string based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a object based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]},{"type":"StringLiteral","value":"warning"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"warning"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set an info message to be displayed for a period of time before hiding"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"done"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":100}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"done"},"arguments":[]}}],"directives":[]}},{"type":"NumericLiteral","value":110}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should hide an info message"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should support multiple messages"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"But this is another one"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"createUpload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should assign the specified files to a new upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUploadsState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentUploads"}}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploadsState"},"computed":true,"property":{"type":"Identifier","name":"uploadId"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"currentUploadsState"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"i18n"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"merges in custom locale strings"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"test"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"beep boop"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pluralize"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"NumericLiteral","value":0}}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"%{file} exceeds maximum allowed size of %{size}"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"test"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"default restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be merged with supplied restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"minNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"log"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function, even if debug: true"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log to console when logger: Uppy.debugLogger or debug: true is set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"debugLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only log errors to console when logger is not set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}},"packages/@uppy/core/src/locale.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"addBulkFilesFailed"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to add %{smart_count} file due to an internal error"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to add %{smart_count} files due to internal errors"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youCanOnlyUploadX"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You can only upload %{smart_count} file"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You can only upload %{smart_count} files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youHaveToAtLeastSelectX"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You have to select at least %{smart_count} file"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You have to select at least %{smart_count} files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"exceedsSize"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"%{file} exceeds maximum allowed size of %{size}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingRequiredMetaField"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Missing required meta fields"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingRequiredMetaFieldOnFile"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Missing required meta fields in %{fileName}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"inferiorSize"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This file is smaller than the allowed size of %{size}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youCanOnlyUploadFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You can only upload: %{types}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noMoreFilesAllowed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Cannot add more files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noDuplicates"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Cannot add the duplicate file '%{fileName}', it already exists"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"companionError"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Connection with Companion failed"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"authAborted"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Authentication aborted"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"companionUnauthorizeHint"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"To unauthorize to your %{provider} account, please go to %{url}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failedToUpload"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to upload %{file}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noInternetConnection"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"No Internet connection"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"connectedToInternet"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Connected to the Internet"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noFilesFound"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You have no files or folders here"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noSearchResults"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Unfortunately, there are no results for this search"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"selectX"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Select %{smart_count}"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Select %{smart_count}"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allFilesFromFolderNamed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"All files from folder %{name}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"openFolderNamed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Open folder %{name}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cancel"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Cancel"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logOut"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Log out"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"filter"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Filter"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resetFilter"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Reset filter"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"loading"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Loading..."}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"loadedXFiles"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Loaded %{numFiles} files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"authenticateWithTitle"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Please authenticate with %{pluginName} to select files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"authenticateWith"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Connect to %{pluginName}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"signInWithGoogle"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Sign in with Google"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"searchImages"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Search for images"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"enterTextToSearch"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Enter text to search for images"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"search"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Search"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resetSearch"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Reset search"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"emptyFolderAdded"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"No files were added from empty folder"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"addedNumFiles"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Added %{numFiles} file(s)"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"folderAlreadyAdded"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"The folder \"%{folder}\" was already added"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"folderAdded"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Added %{smart_count} file from %{folder}"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Added %{smart_count} files from %{folder}"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"additionalRestrictionsFailed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"%{count} additional restrictions were not fulfilled"}}]}}]}}],"directives":[]}}},"after":{"packages/@uppy/core/src/Restricter.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"match"}}],"source":{"type":"StringLiteral","value":"mime-match"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UppyFile"},"importKind":"value","local":{"type":"Identifier","name":"UppyFile"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"I18n"},"importKind":"value","local":{"type":"Identifier","name":"I18n"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"NonNullableUppyOptions"},"importKind":"value","local":{"type":"Identifier","name":"NonNullableUppyOptions"}}],"source":{"type":"StringLiteral","value":"./Uppy.js"}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"Restrictions"},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSNumberKeyword"},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}},{"type":"TSNullKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}}]}}},{"type":"ExportNamedDeclaration","exportKind":"type","specifiers":[],"source":null,"declaration":{"type":"TSTypeAliasDeclaration","id":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Pick"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"type"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"extension"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"size"}},{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"name"}}]}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isGhost"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}]}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"Error"},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"file"},"computed":false,"definite":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"message","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"isUserFacing"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"message"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"}},"right":{"type":"LogicalExpression","left":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"isUserFacing"},"optional":true},"operator":"??","right":{"type":"BooleanLiteral","value":true}}}},{"type":"IfStatement","test":{"type":"OptionalMemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"},"optional":true},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"file"}},"right":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"file"}}}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"isRestriction"},"computed":false,"value":{"type":"BooleanLiteral","value":true}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"Restricter"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":null,"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"getI18n"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}}}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"getOpts"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"getOpts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}},{"type":"Identifier","name":"getI18n","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSFunctionType","parameters":[],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"I18n"}}}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"right":{"type":"Identifier","name":"getI18n"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"right":{"type":"ArrowFunctionExpression","returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"NonNullableUppyOptions"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}},"id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"opts"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"getOpts"},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"OptionalMemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"},"optional":true},"operator":"!=","right":{"type":"NullLiteral"}},"operator":"&&","right":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Array"},"computed":false,"property":{"type":"Identifier","name":"isArray"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"opts"},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"TypeError"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"opts"}}],"directives":[]}}}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateAggregateRestrictions"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxTotalFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"maxNumberOfFiles"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"nonGhostFiles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"existingFiles"},"computed":false,"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"f"}],"body":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"isGhost"}}}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"nonGhostFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"+","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"operator":">","right":{"type":"Identifier","name":"maxNumberOfFiles"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"maxNumberOfFiles"}}]}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"Identifier","name":"maxTotalFileSize"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"totalFilesSize"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ArrayExpression","elements":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"existingFiles"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"addingFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"reduce"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"total"},{"type":"Identifier","name":"f"}],"body":{"type":"BinaryExpression","left":{"type":"Identifier","name":"total"},"operator":"+","right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"f"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"??","right":{"type":"NumericLiteral","value":0}}}},{"type":"NumericLiteral","value":0}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"totalFilesSize"},"operator":">","right":{"type":"Identifier","name":"maxTotalFileSize"}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"aggregateExceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sizeAllowed"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxTotalFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"totalFilesSize"}]}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateSingleFile"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"minFileSize"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minFileSize"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"allowedFileTypes"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"Identifier","name":"allowedFileTypes"},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"isCorrectFileType"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"some"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"type"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"includes"}},"arguments":[{"type":"StringLiteral","value":"/"}]},"consequent":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}}},"consequent":{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"match"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"type"}},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":";.*?$","flags":""},{"type":"StringLiteral","value":""}]},{"type":"Identifier","name":"type"}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":true,"property":{"type":"NumericLiteral","value":0}},"operator":"===","right":{"type":"StringLiteral","value":"."}},"operator":"&&","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","left":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"extension"}},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]},"operator":"===","right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"type"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]}}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]}}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"Identifier","name":"isCorrectFileType"}},"consequent":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"allowedFileTypesString"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":", "}]}}],"kind":"const"},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youCanOnlyUploadFileTypes"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"types"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"allowedFileTypesString"}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"maxFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":">","right":{"type":"Identifier","name":"maxFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minFileSize"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"!=","right":{"type":"NullLiteral"}}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"size"}},"operator":"<","right":{"type":"Identifier","name":"minFileSize"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"inferiorSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"minFileSize"}]}}]}]},{"type":"TSAsExpression","expression":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"file"}}]},"typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"file"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"UppyFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validate"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"existingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}},{"type":"Identifier","name":"addingFiles","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"addingFiles"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"addingFile"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateSingleFile"}},"arguments":[{"type":"Identifier","name":"addingFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"validateAggregateRestrictions"}},"arguments":[{"type":"Identifier","name":"existingFiles"},{"type":"Identifier","name":"addingFiles"}]}}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"validateMinNumberOfFiles"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"files"}}}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSVoidKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"minNumberOfFiles"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"minNumberOfFiles"},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"files"}]},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"<","right":{"type":"Identifier","name":"minNumberOfFiles"}}},"consequent":{"type":"BlockStatement","body":[{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"youHaveToAtLeastSelectX"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"smart_count"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"minNumberOfFiles"}}]}]}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"getMissingRequiredMetaFields"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIntersectionType","types":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ValidateableFile"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}},{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"meta"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}}}}]}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"missingFields"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"error"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}}]}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"error"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"RestrictionError"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"arguments":[{"type":"CallExpression","callee":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getI18n"}},"arguments":[]},"arguments":[{"type":"StringLiteral","value":"missingRequiredMetaFieldOnFile"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileName"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"requiredMetaFields"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"requiredMetaFields"}}]},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"getOpts"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"restrictions"}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"missingFields","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSArrayType","elementType":{"type":"TSStringKeyword"}}}},"init":{"type":"ArrayExpression","elements":[]}}],"kind":"const"},{"type":"ForOfStatement","await":false,"left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"field"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"requiredMetaFields"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"LogicalExpression","left":{"type":"UnaryExpression","operator":"!","prefix":true,"argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"hasOwn"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},{"type":"Identifier","name":"field"}]}},"operator":"||","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"meta"}},"computed":true,"property":{"type":"Identifier","name":"field"}},"operator":"===","right":{"type":"StringLiteral","value":""}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"missingFields"},"computed":false,"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"field"}]}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingFields"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"missingFields"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"error"}}]}}],"directives":[]}}]}},{"type":"ExportNamedDeclaration","exportKind":"value","specifiers":[{"type":"ExportSpecifier","local":{"type":"Identifier","name":"Restricter"},"exportKind":"value","exported":{"type":"Identifier","name":"Restricter"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"defaultOptions"},"exportKind":"value","exported":{"type":"Identifier","name":"defaultOptions"}},{"type":"ExportSpecifier","local":{"type":"Identifier","name":"RestrictionError"},"exportKind":"value","exported":{"type":"Identifier","name":"RestrictionError"}}],"source":null,"declaration":null}],"directives":[]}},"packages/@uppy/core/src/Uppy.test.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"afterEach"},"importKind":"value","local":{"type":"Identifier","name":"afterEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"beforeEach"},"importKind":"value","local":{"type":"Identifier","name":"beforeEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"describe"},"importKind":"value","local":{"type":"Identifier","name":"describe"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"expect"},"importKind":"value","local":{"type":"Identifier","name":"expect"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"it"},"importKind":"value","local":{"type":"Identifier","name":"it"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"vi"},"importKind":"value","local":{"type":"Identifier","name":"vi"}}],"source":{"type":"StringLiteral","value":"vitest"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"assert"}}],"source":{"type":"StringLiteral","value":"node:assert"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"fs"}}],"source":{"type":"StringLiteral","value":"node:fs"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"path"}}],"source":{"type":"StringLiteral","value":"node:path"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"prettierBytes"}}],"source":{"type":"StringLiteral","value":"@transloadit/prettier-bytes"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Body"},"importKind":"value","local":{"type":"Identifier","name":"Body"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Meta"},"importKind":"value","local":{"type":"Identifier","name":"Meta"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/UppyFile"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"Locale"},"importKind":"value","local":{"type":"Identifier","name":"Locale"}}],"source":{"type":"StringLiteral","value":"@uppy/utils/lib/Translator"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"Core"}}],"source":{"type":"StringLiteral","value":"./index.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"UIPlugin"}}],"source":{"type":"StringLiteral","value":"./UIPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"BasePlugin"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"DefinePluginOpts"},"local":{"type":"Identifier","name":"DefinePluginOpts"},"importKind":"type"},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PluginOpts"},"local":{"type":"Identifier","name":"PluginOpts"},"importKind":"type"}],"source":{"type":"StringLiteral","value":"./BasePlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"debugLogger"},"importKind":"value","local":{"type":"Identifier","name":"debugLogger"}}],"source":{"type":"StringLiteral","value":"./loggers.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin1"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin1.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"AcquirerPlugin2"}}],"source":{"type":"StringLiteral","value":"./mocks/acquirerPlugin2.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPlugin"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPlugin.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutId"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutId.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"InvalidPluginWithoutType"}}],"source":{"type":"StringLiteral","value":"./mocks/invalidPluginWithoutType.ts"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"DeepFrozenStore"}}],"source":{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/DeepFrozenStore.mjs"}},{"type":"ImportDeclaration","importKind":"type","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"State"},"importKind":"value","local":{"type":"Identifier","name":"State"}}],"source":{"type":"StringLiteral","value":"./Uppy.ts"}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sampleImage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fs"},"computed":false,"property":{"type":"Identifier","name":"readFileSync"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"path"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"Identifier","name":"__dirname"},{"type":"StringLiteral","value":"../../../../e2e/cypress/fixtures/images/image.jpg"}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"testImage"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"src/Core"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealCreateObjectUrl"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"beforeEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"mockReturnValue"}},"arguments":[{"type":"StringLiteral","value":"newUrl"}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"URL"}},"computed":false,"property":{"type":"Identifier","name":"createObjectURL"}},"right":{"type":"Identifier","name":"RealCreateObjectUrl"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should expose a class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"constructor"}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Uppy"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should have a string `id` option that defaults to \"uppy\""},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"uppy"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"profile"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"getID"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"profile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a plugin to the plugin stack"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to .use() without passing generics again"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassProperty","static":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"value":null},{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"Identifier","name":"opts"}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"StringLiteral","value":"Test"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"foo"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"foo"}},"operator":"??","right":{"type":"StringLiteral","value":"defaultFoo"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"bar"}},"right":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"bar"}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}}],"directives":[]},{"type":"BlockStatement","body":[{"type":"TSInterfaceDeclaration","id":{"type":"Identifier","name":"TestOpts"},"extends":[{"type":"TSExpressionWithTypeArguments","expression":{"type":"Identifier","name":"PluginOpts"}}],"body":{"type":"TSInterfaceBody","body":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bar"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"defaultOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"defaultFoo"}}]}}],"kind":"const"},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"TestPlugin"},"typeParameters":{"type":"TSTypeParameterDeclaration","params":[{"type":"TSTypeParameter","name":"M","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Meta"}}},{"type":"TSTypeParameter","name":"B","constraint":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Body"}}}]},"superClass":{"type":"Identifier","name":"BasePlugin"},"superTypeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"DefinePluginOpts"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}},{"type":"TSTypeOperator","operator":"keyof","typeAnnotation":{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"defaultOptions"}}}]}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]},"body":{"type":"ClassBody","body":[{"type":"ClassMethod","static":false,"key":{"type":"Identifier","name":"constructor"},"computed":false,"kind":"constructor","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"uppy","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"M"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"B"}}]}}}},{"type":"Identifier","name":"opts","optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"TestOpts"}}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Super"},"arguments":[{"type":"Identifier","name":"uppy"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"defaultOptions"}},{"type":"SpreadElement","argument":{"type":"Identifier","name":"opts"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"id"}},"right":{"type":"LogicalExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}},"operator":"??","right":{"type":"StringLiteral","value":"Test"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"ThisExpression"},"computed":false,"property":{"type":"Identifier","name":"type"}},"right":{"type":"StringLiteral","value":"acquirer"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bar"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"TestPlugin"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"directives":[]}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should prevent the same plugin from being added more than once"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add an invalid plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPlugin"}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutId"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not be able to add a plugin that has no type"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"InvalidPluginWithoutType"}]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowErrorMatchingSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return the plugin that matches the specified name"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"foo"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"BinaryExpression","left":{"type":"Identifier","name":"plugin"},"operator":"instanceof","right":{"type":"Identifier","name":"UIPlugin"}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call the specified method on all the plugins"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"plugin"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"run"}},"arguments":[{"type":"StringLiteral","value":"hello"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"hello"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should uninstall and the remove the specified plugin"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getPlugin"}},"arguments":[{"type":"StringLiteral","value":"TestSelector1"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePlugin"}},"arguments":[{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"plugin"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"run"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update all the plugins with the new state when the updateAll method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateAll"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"stateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newState"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newState"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"update"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"newState"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"stateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bee"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"baar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the state"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should cancel all when the `cancelAll` method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":30}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should clear all uploads and files on cancelAll()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove all uploads when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFiles"}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeUndefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should disallow remove one upload when individualCancellation is disabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"throws"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"RegExpLiteral","pattern":"individualCancellation is disabled","flags":""}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow remove one upload when individualCancellation is enabled"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"capabilities"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"capabilities"}}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"capabilities"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileIDs"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"Identifier","name":"fileIDs"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"computed":true,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should close, reset and uninstall when the close method is called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"use"}},"arguments":[{"type":"Identifier","name":"AcquirerPlugin1"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreCancelEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"coreStateUpdateEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"plugin"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: getPlugins"}]}},"arguments":[{"type":"StringLiteral","value":"acquirer"}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"cancel-all"},{"type":"Identifier","name":"coreCancelEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"state-update"},{"type":"Identifier","name":"coreStateUpdateEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"coreCancelEventMock"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalledWith"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"reason"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"user"}}]},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"},{"type":"Identifier","name":"undefined"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"coreStateUpdateEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"capabilities"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"individualCancellation"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadProgress"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resumableUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"currentUploads"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowNewUpload"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"info"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"plugins"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"recoveredState"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"plugin"},"computed":false,"property":{"type":"Identifier","name":"mocks"}},"computed":false,"property":{"type":"Identifier","name":"uninstall"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"pluginIteration"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"iteratePlugins"}},"arguments":[{"type":"Identifier","name":"pluginIteration"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"pluginIteration"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"upload hooks"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add data returned from upload hooks to the .upload() result"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pre"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"post"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"_"},{"type":"Identifier","name":"uploadID"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addResultData"}},"arguments":[{"type":"Identifier","name":"uploadID"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"ok"}}]}]}}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"result"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"Identifier","name":"result"},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"pre"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"upload"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"result"},"computed":false,"property":{"type":"Identifier","name":"post"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"ok"}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"preprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove preprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the preprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"preprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"Identifier","name":"preprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"preprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not pass removed file IDs to next step"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPreProcessor"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":true,"property":{"type":"NumericLiteral","value":0}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"rmd.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"kept.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"uploader"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"kept.jpg"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when preprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileID"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"preprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"postprocessors"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove postprocessor"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removePostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should execute all the postprocessors when uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"postprocessor2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addPostProcessor"}},"arguments":[{"type":"Identifier","name":"postprocessor2"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor1"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"postprocessor2"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileId"},"computed":false,"property":{"type":"Identifier","name":"substring"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":17}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-progress event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"postprocess"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the file progress state when postprocess-complete event is fired"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"postprocess-complete"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mode"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"determinate"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should report an error if post-processing a file fails"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]},{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploaders"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add and remove uploader"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploader"},"init":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[],"directives":[]}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeUploader"}},"arguments":[{"type":"Identifier","name":"uploader"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"BooleanLiteral","value":false}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"adding a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should call onBeforeFileAdded if it was specified in the options when initialising the class"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onBeforeFileAdded"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"},{"type":"Identifier","name":"files"}],"body":{"type":"CallExpression","callee":{"type":"Identifier","name":"onBeforeFileAdded"},"arguments":[{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"files"}}]}]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow uploading duplicate file if explicitly allowed in onBeforeFileAdded"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BooleanLiteral","value":true}}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileAddedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"Identifier","name":"fileAddedEventMock"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isRemote"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"preview"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"undefined"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fileData"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"remote"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileAddedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should add a file from a File object"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileData"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"fileData"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file that does not meet the restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"video/webm"}]}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, video/webm"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.webm"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"video/webm; codecs=\"vp8, opus\""}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a dupicate file, a file with the same id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sameFileBlob"},"init":{"type":"Identifier","name":"testImage"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"sameFileBlob"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"notARelativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the duplicate file 'foo.jpg', it already exists"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should allow a duplicate file if its relativePath is different, thus the id is different"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"relativePath"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"folder/a"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not allow a file if onBeforeFileAdded returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeFileAdded"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"source"}},"operator":"===","right":{"type":"StringLiteral","value":"vi"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"undefined"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"StringLiteral","value":"Cannot add the file because onBeforeFileAdded returned false."}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"with allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows no new files after upload with legacy allowMultipleUploads option"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploads"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot add more files","flags":""}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not allow new files after the removeFile() if some file is still present"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files after the last removeFile()"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId1"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId2"}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"does not dedupe different files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"data"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"data"},"computed":false,"property":{"type":"Identifier","name":"lastModified"}},"right":{"type":"NumericLiteral","value":1562770350937}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo푸.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"data"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo/jpg-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"uppy-foo//jpg-1l3o-1e-image/jpeg-17175-1562770350937"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"uploading a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return a { successful, failed } pair containing file objects"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return files with errors in the { failed } key"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileIDs"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileIDs"},"computed":false,"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"fileID"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileID"}]}}],"kind":"const"},{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"RegExpLiteral","pattern":"bar","flags":""},"computed":false,"property":{"type":"Identifier","name":"test"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"Identifier","name":"file"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This is bar and I do not like bar"}]}]}}],"directives":[]},"alternate":null}],"directives":[]}}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"successful"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}}]}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failed"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is bar and I do not like bar"}}]}]}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only upload files that are not already assigned to another upload id"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"store"}},"computed":false,"property":{"type":"Identifier","name":"state"}},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload1"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file1/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file2/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file3/jpg-1e-image/jpeg"}]}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"upload2"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"uppy-file4/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file5/jpg-1e-image/jpeg"},{"type":"StringLiteral","value":"uppy-file6/jpg-1e-image/jpeg"}]}}]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"resolve"}},"arguments":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"file3.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[]}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"then"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"r"}],"body":{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"operator":"&&","right":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"r"}},"computed":false,"property":{"type":"Identifier","name":"uploadID"}},"computed":false,"property":{"type":"Identifier","name":"length"}},"operator":"===","right":{"type":"NumericLiteral","value":21}}},"consequent":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"Identifier","name":"r"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadID"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"cjd09qwxb000dlql4tp4doz8h"}}]},"alternate":{"type":"Identifier","name":"r"}}}]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toMatchSnapshot"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not upload if onBeforeUpload returned false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"onBeforeUpload"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"files"}],"body":{"type":"BlockStatement","body":[{"type":"ForInStatement","left":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":null}],"kind":"const"},"right":{"type":"Identifier","name":"files"},"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"files"},"computed":true,"property":{"type":"Identifier","name":"fileId"}},"computed":false,"property":{"type":"Identifier","name":"name"}},"operator":"===","right":{"type":"StringLiteral","value":"123.foo"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BooleanLiteral","value":false}}],"directives":[]},"alternate":null}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"files"}}],"directives":[]}}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"err"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Not starting the upload because onBeforeUpload returned false"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"only allows a single upload() batch when allowMultipleUploadBatches: false"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"rejects"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[{"type":"RegExpLiteral","pattern":"Cannot create a new upload: already uploading\\.","flags":""}]}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"allows new files again with allowMultipleUploadBatches: false after cancelAll() was called"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"cancelAll"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"123.foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"resolves"}},"computed":false,"property":{"type":"Identifier","name":"toBeDefined"}},"arguments":[]}}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"removing a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should remove the file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileRemovedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"file-removed"},{"type":"Identifier","name":"fileRemovedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"totalProgress"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":50}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"removeFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"fileRemovedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"retries"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should start a new upload with failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onRetryAll"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"retry-all"},{"type":"Identifier","name":"onRetryAll"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"id"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"id"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"something went wrong"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onRetryAll"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not start a new upload if there are no failed files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onUpload"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"upload"},{"type":"Identifier","name":"onUpload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"retryAll"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"onUpload"}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toHaveBeenCalled"}},"arguments":[]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"restoring a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should restore a file"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should fail to restore a file if it doesn't exist"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"get a file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should get the specified file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"non existent file"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"undefined"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"getFiles"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return an empty array if there are no files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should return all files as an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"empty.dat"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"NumericLiteral","value":1000}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"application/octet-stream"}}]}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toHaveLength"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}}]},"computed":false,"property":{"type":"Identifier","name":"sort"}},"arguments":[]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"empty.dat"},{"type":"StringLiteral","value":"foo.jpg"}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"setOptions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change options on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lolUppy"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"autoProceed"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowMultipleUploadBatches"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"lolUppy"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"autoProceed"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"allowMultipleUploadBatches"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change locale on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Cancel"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cancel"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Отмена"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"cancel"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Отмена"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"logOut"}]}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"Log out"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change meta on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"beep"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"beep"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"boop"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should change restrictions on the fly"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fr_FR","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Locale"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSUnionType","types":[{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":0}},{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":1}}]}]}}}},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youCanOnlyUploadFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Vous pouvez seulement téléverser: %{types}"}}]}},{"type":"ObjectMethod","method":true,"key":{"type":"Identifier","name":"pluralize"},"computed":false,"kind":"method","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"n"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"n"},"operator":"<=","right":{"type":"NumericLiteral","value":1}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"NumericLiteral","value":0}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"NumericLiteral","value":1}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/jpeg"}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":2}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/jpeg"}]}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fr_FR"}}]}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"Vous pouvez seulement téléverser: image/jpeg"}]}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setOptions"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"fr_FR"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"allowedFileTypes"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"File"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"sampleImage"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/png"}}]}]}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"meta data"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set meta data by calling setMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"boo"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"foo2"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bur"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]},{"type":"TSAnyKeyword"}]},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setMeta"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update meta data for a file by calling updateMeta"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"mur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileMeta"}},"arguments":[{"type":"Identifier","name":"fileId"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bur"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fur"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"boo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"moo"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should merge meta data when add file"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"meta"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"meta"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo2"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar2"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":5000}}]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the progress of a file upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":72}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"fileId"}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should work with unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"proceedUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishUpload"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"promise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"proceedUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"finishPromise"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"finishUpload"},"right":{"type":"Identifier","name":"resolve"}}}],"directives":[]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addUploader"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"id"}]}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-success"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"Identifier","name":"id"}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadURL"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"lol"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadPromise"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"upload"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Promise"},"computed":false,"property":{"type":"Identifier","name":"all"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"Identifier","name":"resolve"}]}}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"resolve"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"upload-started"},{"type":"Identifier","name":"resolve"}]}}]}]}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"proceedUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"promise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBeNull"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":36}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":36}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"finishUpload"},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"finishPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"size"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3456}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":100}}]}]}},{"type":"ExpressionStatement","expression":{"type":"AwaitExpression","argument":{"type":"Identifier","name":"uploadPromise"}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should estimate progress for unsized files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3456}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"once"}},"arguments":[{"type":"StringLiteral","value":"file-added"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"file"}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-start"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"Identifier","name":"file"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"instagram"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":18}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"close"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should calculate the total progress of all file uploads"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"store"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"DeepFrozenStore"},"arguments":[]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the progress"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"resetProgressEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"reset-progress"},{"type":"Identifier","name":"resetProgressEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ArrayPattern","elements":[{"type":"Identifier","name":"file1"},{"type":"Identifier","name":"file2"}]},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFiles"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"progress"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"SpreadElement","argument":{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"progress"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":12345}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-progress"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":10201}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateTotalProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"calculateProgress"}},"computed":false,"property":{"type":"Identifier","name":"flush"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":66}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"resetProgress"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file1"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file2"},"computed":false,"property":{"type":"Identifier","name":"id"}}]},"computed":false,"property":{"type":"Identifier","name":"progress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"percentage"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesUploaded"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bytesTotal"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":17175}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadComplete"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadStarted"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"totalProgress"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"allowNewUpload"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"recoveredState"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"resetProgressEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"checkRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxNumberOfFiles rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload 1 file"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should not enforce the maxNumberOfFiles rule for ghost files"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"fileId1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setFileState"}},"arguments":[{"type":"Identifier","name":"fileId1"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isGhost"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"it"},"computed":false,"property":{"type":"Identifier","name":"skip"}},"arguments":[{"type":"StringLiteral","value":"should enforce the minNumberOfFiles rule"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/gif"},{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/gif, image/png"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should throw if allowedFileTypes is not an array"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/gif"}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"hi"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"`restrictions.allowedFileTypes` must be an array"}]}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the allowedFileTypes rule with file extensions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":".gif"},{"type":"StringLiteral","value":".jpg"},{"type":"StringLiteral","value":".jpeg"}]}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.png"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: .gif, .jpg, .jpeg"}]}}],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo2.JPG"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":""}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"not"}},"computed":false,"property":{"type":"Identifier","name":"toThrow"}},"arguments":[]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1234}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foo.jpg exceeds maximum allowed size of 1.2 KB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the minFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":1073741824}}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ThrowStatement","argument":{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"should have thrown"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":{"type":"Identifier","name":"err"},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"Identifier","name":"err"}]},"computed":false,"property":{"type":"Identifier","name":"toMatchObject"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 1 GB"}]}}],"directives":[]}},"finalizer":null}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should enforce the maxTotalFileSize rule"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxTotalFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":20000}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}}],"directives":[]}}]},"computed":false,"property":{"type":"Identifier","name":"toThrowError"}},"arguments":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"You selected 34 KB of files, but maximum allowed size is 20 KB"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should check if a file validateRestrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"minFileSize"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":300000}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allowedFileTypes"},"computed":false,"shorthand":false,"value":{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"image/png"}]}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"newFile"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo1.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"extension"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"isFolder"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":false}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"mimeType"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"modifiedDate"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"2016-04-13T15:11:31.204Z"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":270733}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions1"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"validateRestrictions2"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"validateRestrictions"}},"arguments":[{"type":"Identifier","name":"newFile"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions1"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"This file is smaller than the allowed size of 293 KB"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"Identifier","name":"validateRestrictions2"}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"You can only upload: image/png"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit `restriction-failed` event when some rule is violated"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"maxFileSize"},"init":{"type":"NumericLiteral","value":100}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxFileSize"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"maxFileSize"}}]}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"file"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"test.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"NewExpression","callee":{"type":"Identifier","name":"Blob"},"arguments":[{"type":"ArrayExpression","elements":[{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"BinaryExpression","left":{"type":"NumericLiteral","value":2},"operator":"*","right":{"type":"Identifier","name":"maxFileSize"}}]}]}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"errorMessage"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"file"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"size"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"Identifier","name":"prettierBytes"},"arguments":[{"type":"Identifier","name":"maxFileSize"}]}}]}]}}],"kind":"const"},{"type":"TryStatement","block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"restriction-failed"},{"type":"Identifier","name":"restrictionsViolatedEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"Identifier","name":"file"}]}}],"directives":[]},"handler":{"type":"CatchClause","param":null,"body":{"type":"BlockStatement","body":[],"directives":[]}},"finalizer":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":false,"property":{"type":"Identifier","name":"name"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"file"},"computed":false,"property":{"type":"Identifier","name":"name"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"restrictionsViolatedEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":true,"property":{"type":"NumericLiteral","value":0}},"computed":true,"property":{"type":"NumericLiteral","value":1}},"computed":false,"property":{"type":"Identifier","name":"message"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"errorMessage"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"actions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"StringLiteral","value":"foooooo"}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should update the state when receiving the upload-error event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"setState"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"files"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileId"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"id"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"fileId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"filename"}}]}}]}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload-error"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getFile"}},"arguments":[{"type":"StringLiteral","value":"fileId"}]},{"type":"NewExpression","callee":{"type":"Identifier","name":"Error"},"arguments":[{"type":"StringLiteral","value":"this is the error"}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to upload filename"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"this is the error"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"error"}}]}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should reset the error state when receiving the upload event"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"error"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"emit"}},"arguments":[{"type":"StringLiteral","value":"upload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"error"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"updateOnlineStatus"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"RealNavigatorOnline"},"init":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"mockNavigatorOnline"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"status","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSBooleanKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"defineProperty"}},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},{"type":"StringLiteral","value":"onLine"},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"value"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"status"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"writable"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"directives":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"window"}},"computed":false,"property":{"type":"Identifier","name":"navigator"}},"computed":false,"property":{"type":"Identifier","name":"onLine"}},"right":{"type":"Identifier","name":"RealNavigatorOnline"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should emit the correct event based on whether there is a network connection"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"onlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"offlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"backOnlineEventMock"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-offline"},{"type":"Identifier","name":"offlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"is-online"},{"type":"Identifier","name":"onlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"back-online"},{"type":"Identifier","name":"backOnlineEventMock"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":false}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"mockNavigatorOnline"},"arguments":[{"type":"BooleanLiteral","value":true}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"updateOnlineStatus"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"onlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"offlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"backOnlineEventMock"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"info"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a string based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set a object based message to be displayed infinitely"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]},{"type":"StringLiteral","value":"warning"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"warning"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"foo"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}}]}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoVisibleEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should set an info message to be displayed for a period of time before hiding"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"done"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":100}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"done"},"arguments":[]}}],"directives":[]}},{"type":"NumericLiteral","value":110}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should hide an info message"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should support multiple messages"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoVisibleEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"infoHiddenEvent"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-visible"},{"type":"Identifier","name":"infoVisibleEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"on"}},"arguments":[{"type":"StringLiteral","value":"info-hidden"},{"type":"Identifier","name":"infoHiddenEvent"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"This is the message"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"StringLiteral","value":"But this is another one"},{"type":"StringLiteral","value":"info"},{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This is the message"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"info"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"message"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"But this is another one"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"details"},"computed":false,"shorthand":false,"value":{"type":"NullLiteral"}}]}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"hideInfo"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"infoHiddenEvent"},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"info"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"ArrayExpression","elements":[]}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"createUpload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should assign the specified files to a new upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"addFile"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"source"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"vi"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo.jpg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"type"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"image/jpeg"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"data"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"testImage"}}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":true,"property":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Symbol"},"computed":false,"property":{"type":"Identifier","name":"for"}},"arguments":[{"type":"StringLiteral","value":"uppy test: createUpload"}]}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":true,"property":{"type":"NumericLiteral","value":0}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"currentUploadsState","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"State"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSAnyKeyword"},{"type":"TSAnyKeyword"}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"currentUploads"}}}}},"init":{"type":"ObjectExpression","properties":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"currentUploadsState"},"computed":true,"property":{"type":"Identifier","name":"uploadId"}},"right":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"fileIDs"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"step"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":0}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"result"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[]}}]}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"getState"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"currentUploads"}}]},"computed":false,"property":{"type":"Identifier","name":"toEqual"}},"arguments":[{"type":"Identifier","name":"currentUploadsState"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"i18n"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"merges in custom locale strings"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"locale"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"test"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"beep boop"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"pluralize"},"computed":false,"shorthand":false,"value":{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"NumericLiteral","value":0}}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"exceedsSize"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"%{file} exceeds maximum allowed size of %{size}"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"i18n"}},"arguments":[{"type":"StringLiteral","value":"test"}]}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"default restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be merged with supplied restrictions"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"restrictions"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"maxNumberOfFiles"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":3}}]}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"maxNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"restrictions"}},"computed":false,"property":{"type":"Identifier","name":"minNumberOfFiles"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NullLiteral"}]}}],"directives":[]}}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"log"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log via provided logger function, even if debug: true"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"myTestLogger"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"warn"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"error"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"myTestLogger"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"},{"type":"StringLiteral","value":"warning"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"opts"}},"computed":false,"property":{"type":"Identifier","name":"logger"}},"computed":false,"property":{"type":"Identifier","name":"warn"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":2}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should log to console when logger: Uppy.debugLogger or debug: true is set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logger"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"debugLogger"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mockClear"}},"arguments":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core2"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"debug"},"computed":false,"shorthand":false,"value":{"type":"BooleanLiteral","value":true}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core2"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":3}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should only log errors to console when logger is not set"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"vi"},"computed":false,"property":{"type":"Identifier","name":"fn"}},"arguments":[]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"core"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Core"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"test test"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep boop"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"core"},"computed":false,"property":{"type":"Identifier","name":"log"}},"arguments":[{"type":"StringLiteral","value":"beep beep"},{"type":"StringLiteral","value":"error"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"debug"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":0}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"expect"},"arguments":[{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"console"},"computed":false,"property":{"type":"Identifier","name":"error"}},"computed":false,"property":{"type":"Identifier","name":"mock"}},"computed":false,"property":{"type":"Identifier","name":"calls"}},"computed":false,"property":{"type":"Identifier","name":"length"}}]},"computed":false,"property":{"type":"Identifier","name":"toBe"}},"arguments":[{"type":"NumericLiteral","value":1}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}},"packages/@uppy/core/src/locale.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"strings"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"addBulkFilesFailed"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to add %{smart_count} file due to an internal error"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to add %{smart_count} files due to internal errors"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youCanOnlyUploadX"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You can only upload %{smart_count} file"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You can only upload %{smart_count} files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youHaveToAtLeastSelectX"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You have to select at least %{smart_count} file"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You have to select at least %{smart_count} files"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"aggregateExceedsSize"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"exceedsSize"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"%{file} exceeds maximum allowed size of %{size}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingRequiredMetaField"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Missing required meta fields"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"missingRequiredMetaFieldOnFile"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Missing required meta fields in %{fileName}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"inferiorSize"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"This file is smaller than the allowed size of %{size}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"youCanOnlyUploadFileTypes"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You can only upload: %{types}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noMoreFilesAllowed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Cannot add more files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noDuplicates"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Cannot add the duplicate file '%{fileName}', it already exists"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"companionError"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Connection with Companion failed"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"authAborted"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Authentication aborted"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"companionUnauthorizeHint"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"To unauthorize to your %{provider} account, please go to %{url}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"failedToUpload"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Failed to upload %{file}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noInternetConnection"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"No Internet connection"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"connectedToInternet"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Connected to the Internet"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noFilesFound"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"You have no files or folders here"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"noSearchResults"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Unfortunately, there are no results for this search"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"selectX"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Select %{smart_count}"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Select %{smart_count}"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"allFilesFromFolderNamed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"All files from folder %{name}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"openFolderNamed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Open folder %{name}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"cancel"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Cancel"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"logOut"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Log out"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"filter"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Filter"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resetFilter"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Reset filter"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"loading"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Loading..."}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"loadedXFiles"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Loaded %{numFiles} files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"authenticateWithTitle"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Please authenticate with %{pluginName} to select files"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"authenticateWith"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Connect to %{pluginName}"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"signInWithGoogle"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Sign in with Google"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"searchImages"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Search for images"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"enterTextToSearch"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Enter text to search for images"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"search"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Search"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"resetSearch"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Reset search"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"emptyFolderAdded"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"No files were added from empty folder"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"addedNumFiles"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Added %{numFiles} file(s)"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"folderAlreadyAdded"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"The folder \"%{folder}\" was already added"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"folderAdded"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":0},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Added %{smart_count} file from %{folder}"}},{"type":"ObjectProperty","method":false,"key":{"type":"NumericLiteral","value":1},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"Added %{smart_count} files from %{folder}"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"additionalRestrictionsFailed"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"%{count} additional restrictions were not fulfilled"}}]}}]}}],"directives":[]}}}},"renamedFiles":{"mappings":[],"before":{},"after":{}}}