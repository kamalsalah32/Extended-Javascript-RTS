{"addedFiles":{},"deletedFiles":{},"modifiedFiles":{"before":{"packages/@uppy/aws-s3-multipart/src/createSignedURL.test.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"describe"},"importKind":"value","local":{"type":"Identifier","name":"describe"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"it"},"importKind":"value","local":{"type":"Identifier","name":"it"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"beforeEach"},"importKind":"value","local":{"type":"Identifier","name":"beforeEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"afterEach"},"importKind":"value","local":{"type":"Identifier","name":"afterEach"}}],"source":{"type":"StringLiteral","value":"vitest"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"assert"}}],"source":{"type":"StringLiteral","value":"node:assert"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"S3Client"},"importKind":"value","local":{"type":"Identifier","name":"S3Client"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UploadPartCommand"},"importKind":"value","local":{"type":"Identifier","name":"UploadPartCommand"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PutObjectCommand"},"importKind":"value","local":{"type":"Identifier","name":"PutObjectCommand"}}],"source":{"type":"StringLiteral","value":"@aws-sdk/client-s3"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"getSignedUrl"},"importKind":"value","local":{"type":"Identifier","name":"getSignedUrl"}}],"source":{"type":"StringLiteral","value":"@aws-sdk/s3-request-presigner"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"createSignedURL"}}],"source":{"type":"StringLiteral","value":"./createSignedURL.ts"}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"bucketName"},"init":{"type":"StringLiteral","value":"some-bucket"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"s3ClientOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"region"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"us-bar-1"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"credentials"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accessKeyId"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"secretAccessKey"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foobar"}}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"Date"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"OriginalDate"}}]},"init":{"type":"Identifier","name":"globalThis"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"createSignedURL"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"beforeEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"now_ms"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"OriginalDate"},"computed":false,"property":{"type":"Identifier","name":"now"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"Date"}},"right":{"type":"FunctionExpression","id":{"type":"Identifier","name":"Date"},"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MetaProperty","meta":{"type":"Identifier","name":"new"},"property":{"type":"Identifier","name":"target"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Reflect"},"computed":false,"property":{"type":"Identifier","name":"construct"}},"arguments":[{"type":"Identifier","name":"OriginalDate"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"now_ms"}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Reflect"},"computed":false,"property":{"type":"Identifier","name":"apply"}},"arguments":[{"type":"Identifier","name":"OriginalDate"},{"type":"ThisExpression"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"now_ms"}]}]}}],"directives":[]}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"Date"}},"computed":false,"property":{"type":"Identifier","name":"now"}},"right":{"type":"FunctionExpression","id":{"type":"Identifier","name":"now"},"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"now_ms"}}],"directives":[]}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"Date"}},"right":{"type":"Identifier","name":"OriginalDate"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to sign non-multipart upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"client"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"S3Client"},"arguments":[{"type":"Identifier","name":"s3ClientOptions"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"createSignedURL"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountKey"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"accessKeyId"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountSecret"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"secretAccessKey"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"sessionToken"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bucketName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Region"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"region"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expires"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSignedUrl"},"arguments":[{"type":"Identifier","name":"client"},{"type":"NewExpression","callee":{"type":"Identifier","name":"PutObjectCommand"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expiresIn"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to sign multipart upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"client"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"S3Client"},"arguments":[{"type":"Identifier","name":"s3ClientOptions"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"partNumber"},"init":{"type":"NumericLiteral","value":99}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"StringLiteral","value":"dummyUploadId"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"createSignedURL"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountKey"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"accessKeyId"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountSecret"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"secretAccessKey"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"sessionToken"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadId"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"partNumber"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bucketName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Region"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"region"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expires"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSignedUrl"},"arguments":[{"type":"Identifier","name":"client"},{"type":"NewExpression","callee":{"type":"Identifier","name":"UploadPartCommand"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"UploadId"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"PartNumber"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expiresIn"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should escape path and query as restricted to RFC 3986"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"client"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"S3Client"},"arguments":[{"type":"Identifier","name":"s3ClientOptions"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"partNumber"},"init":{"type":"NumericLiteral","value":99}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"specialChars"},"init":{"type":"StringLiteral","value":";?:@&=+$,#!'()"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"specialChars"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Upload","cooked":"Upload"},"tail":false},{"type":"TemplateElement","value":{"raw":"Id","cooked":"Id"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"Key"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"specialChars"},{"type":"Identifier","name":"specialChars"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":".*/","cooked":".*/"},"tail":false},{"type":"TemplateElement","value":{"raw":".*.ext","cooked":".*.ext"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"implResult"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"createSignedURL"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountKey"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"accessKeyId"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountSecret"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"secretAccessKey"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"sessionToken"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadId"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"partNumber"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bucketName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"Key"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Region"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"region"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expires"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sdkResult"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSignedUrl"},"arguments":[{"type":"Identifier","name":"client"},{"type":"NewExpression","callee":{"type":"Identifier","name":"UploadPartCommand"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"UploadId"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"PartNumber"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"Key"}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expiresIn"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"implResult"},"computed":false,"property":{"type":"Identifier","name":"pathname"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"sdkResult"},"computed":false,"property":{"type":"Identifier","name":"pathname"}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"extractUploadId"},"init":{"type":"RegExpLiteral","pattern":"([?&])uploadId=([^&]+?)(&|$)","flags":""}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"extractSignature"},"init":{"type":"RegExpLiteral","pattern":"([?&])X-Amz-Signature=([^&]+?)(&|$)","flags":""}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"implResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractUploadId"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}},{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"sdkResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractUploadId"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"implResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractSignature"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}},{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"sdkResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractSignature"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}},"packages/@uppy/aws-s3-multipart/src/createSignedURL.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"createCanonicalRequest"},"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"method"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"method"},"right":{"type":"StringLiteral","value":"PUT"}}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"CanonicalUri"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"CanonicalUri"},"right":{"type":"StringLiteral","value":"/"}}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"CanonicalQueryString"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"CanonicalQueryString"},"right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"SignedHeaders"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"SignedHeaders"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"HashedPayload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"HashedPayload"}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"method"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"CanonicalUri"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"CanonicalQueryString"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"SignedHeaders"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"HashedPayload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"headerKeys"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"SignedHeaders"}]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"k"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"k"},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]}}]},"computed":false,"property":{"type":"Identifier","name":"sort"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"method"},{"type":"Identifier","name":"CanonicalUri"},{"type":"Identifier","name":"CanonicalQueryString"},{"type":"SpreadElement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"headerKeys"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"k"}],"body":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"k"},{"type":"MemberExpression","object":{"type":"Identifier","name":"SignedHeaders"},"computed":true,"property":{"type":"Identifier","name":"k"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":":","cooked":":"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}]}},{"type":"StringLiteral","value":""},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"headerKeys"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":";"}]},{"type":"Identifier","name":"HashedPayload"}]},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":"\n"}]}}],"directives":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"ec"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"TextEncoder"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"algorithm"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"HMAC"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"hash"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"SHA-256"}}]}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"digest"},"generator":false,"async":true,"params":[{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ReturnType"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"SubtleCrypto"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"digest"}}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"subtle"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"subtle"}}]},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"crypto"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"subtle"},"computed":false,"property":{"type":"Identifier","name":"digest"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"algorithm"},"computed":false,"property":{"type":"Identifier","name":"hash"}},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ec"},"computed":false,"property":{"type":"Identifier","name":"encode"}},"arguments":[{"type":"Identifier","name":"data"}]}]}}],"directives":[]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"generateHmacKey"},"generator":false,"async":true,"params":[{"type":"Identifier","name":"secret","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Uint8Array"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ArrayBuffer"}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"subtle"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"subtle"}}]},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"crypto"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"subtle"},"computed":false,"property":{"type":"Identifier","name":"importKey"}},"arguments":[{"type":"StringLiteral","value":"raw"},{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"secret"}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"consequent":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ec"},"computed":false,"property":{"type":"Identifier","name":"encode"}},"arguments":[{"type":"Identifier","name":"secret"}]},"alternate":{"type":"Identifier","name":"secret"}},{"type":"Identifier","name":"algorithm"},{"type":"BooleanLiteral","value":false},{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"sign"}]}]}}],"directives":[]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"arrayBufferToHexString"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"arrayBuffer","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ArrayBuffer"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"byteArray"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"Identifier","name":"arrayBuffer"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"hexString"},"init":{"type":"StringLiteral","value":""}}],"kind":"let"},{"type":"ForStatement","init":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"i"},"init":{"type":"NumericLiteral","value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"i"},"operator":"<","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"byteArray"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"update":{"type":"UpdateExpression","operator":"++","prefix":false,"argument":{"type":"Identifier","name":"i"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"hexString"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"byteArray"},"computed":true,"property":{"type":"Identifier","name":"i"}},"computed":false,"property":{"type":"Identifier","name":"toString"}},"arguments":[{"type":"NumericLiteral","value":16}]},"computed":false,"property":{"type":"Identifier","name":"padStart"}},"arguments":[{"type":"NumericLiteral","value":2},{"type":"StringLiteral","value":"0"}]}}}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"hexString"}}],"directives":[]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"hash"},"generator":false,"async":true,"params":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Parameters"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"generateHmacKey"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":0}}}}},{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"subtle"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"subtle"}}]},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"crypto"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"subtle"},"computed":false,"property":{"type":"Identifier","name":"sign"}},"arguments":[{"type":"Identifier","name":"algorithm"},{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"generateHmacKey"},"arguments":[{"type":"Identifier","name":"key"}]}},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ec"},"computed":false,"property":{"type":"Identifier","name":"encode"}},"arguments":[{"type":"Identifier","name":"data"}]}]}}],"directives":[]}},{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"createSignedURL"},"generator":false,"async":true,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"accountKey"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"accountKey"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"accountSecret"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"accountSecret"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"sessionToken"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"sessionToken"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"bucketName"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"Key"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"Key"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"Region"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"Region"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"expires"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"expires"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"uploadId"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"partNumber"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"partNumber"}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"accountKey"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"accountSecret"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"sessionToken"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bucketName"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"Key"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"Region"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"expires"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadId"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"partNumber"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"URL"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"Service"},"init":{"type":"StringLiteral","value":"s3"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"host"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"bucketName"},{"type":"Identifier","name":"Service"},{"type":"Identifier","name":"Region"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":".","cooked":"."},"tail":false},{"type":"TemplateElement","value":{"raw":".","cooked":"."},"tail":false},{"type":"TemplateElement","value":{"raw":".amazonaws.com","cooked":".amazonaws.com"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"CanonicalUri"},"init":{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"encodeURI"},"arguments":[{"type":"Identifier","name":"Key"}]},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"[;?:@&=+$,#!'()*]","flags":"g"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"c"}],"body":{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"c"},"computed":false,"property":{"type":"Identifier","name":"charCodeAt"}},"arguments":[{"type":"NumericLiteral","value":0}]},"computed":false,"property":{"type":"Identifier","name":"toString"}},"arguments":[{"type":"NumericLiteral","value":16}]},"computed":false,"property":{"type":"Identifier","name":"toUpperCase"}},"arguments":[]}],"quasis":[{"type":"TemplateElement","value":{"raw":"%","cooked":"%"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"payload"},"init":{"type":"StringLiteral","value":"UNSIGNED-PAYLOAD"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"requestDateTime"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"toISOString"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"[-:]|\\.\\d+","flags":"g"},{"type":"StringLiteral","value":""}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"date"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"requestDateTime"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":8}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"scope"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"date"},{"type":"Identifier","name":"Region"},{"type":"Identifier","name":"Service"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"/aws4_request","cooked":"/aws4_request"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"url"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"host"},{"type":"Identifier","name":"CanonicalUri"}],"quasis":[{"type":"TemplateElement","value":{"raw":"https://","cooked":"https://"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Algorithm"},{"type":"StringLiteral","value":"AWS4-HMAC-SHA256"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Content-Sha256"},{"type":"Identifier","name":"payload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Credential"},{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"accountKey"},{"type":"Identifier","name":"scope"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Date"},{"type":"Identifier","name":"requestDateTime"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Expires"},{"type":"TSAsExpression","expression":{"type":"Identifier","name":"expires"},"typeAnnotation":{"type":"TSStringKeyword"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Security-Token"},{"type":"Identifier","name":"sessionToken"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-SignedHeaders"},{"type":"StringLiteral","value":"host"}]}},{"type":"IfStatement","test":{"type":"Identifier","name":"partNumber"},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"partNumber"},{"type":"TSAsExpression","expression":{"type":"Identifier","name":"partNumber"},"typeAnnotation":{"type":"TSStringKeyword"}}]}},"alternate":null},{"type":"IfStatement","test":{"type":"Identifier","name":"uploadId"},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"uploadId"},{"type":"Identifier","name":"uploadId"}]}},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"x-id"},{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"partNumber"},"operator":"&&","right":{"type":"Identifier","name":"uploadId"}},"consequent":{"type":"StringLiteral","value":"UploadPart"},"alternate":{"type":"StringLiteral","value":"PutObject"}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"canonical"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"createCanonicalRequest"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"CanonicalUri"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"CanonicalUri"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"CanonicalQueryString"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"SignedHeaders"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"host"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"host"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"HashedPayload"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"payload"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"hashedCanonical"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"arrayBufferToHexString"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"digest"},"arguments":[{"type":"Identifier","name":"canonical"}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stringToSign"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ArrayExpression","elements":[{"type":"TemplateLiteral","expressions":[],"quasis":[{"type":"TemplateElement","value":{"raw":"AWS4-HMAC-SHA256","cooked":"AWS4-HMAC-SHA256"},"tail":true}]},{"type":"Identifier","name":"requestDateTime"},{"type":"Identifier","name":"scope"},{"type":"Identifier","name":"hashedCanonical"}]},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":"\n"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kDate"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"accountSecret"}],"quasis":[{"type":"TemplateElement","value":{"raw":"AWS4","cooked":"AWS4"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"Identifier","name":"date"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kRegion"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kDate"},{"type":"Identifier","name":"Region"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kService"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kRegion"},{"type":"Identifier","name":"Service"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kSigning"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kService"},{"type":"StringLiteral","value":"aws4_request"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"signature"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"arrayBufferToHexString"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kSigning"},{"type":"Identifier","name":"stringToSign"}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"},{"type":"Identifier","name":"signature"}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"url"}}],"directives":[]}}}],"directives":[]}}},"after":{"packages/@uppy/aws-s3-multipart/src/createSignedURL.test.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"describe"},"importKind":"value","local":{"type":"Identifier","name":"describe"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"it"},"importKind":"value","local":{"type":"Identifier","name":"it"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"beforeEach"},"importKind":"value","local":{"type":"Identifier","name":"beforeEach"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"afterEach"},"importKind":"value","local":{"type":"Identifier","name":"afterEach"}}],"source":{"type":"StringLiteral","value":"vitest"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"assert"}}],"source":{"type":"StringLiteral","value":"node:assert"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"S3Client"},"importKind":"value","local":{"type":"Identifier","name":"S3Client"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"UploadPartCommand"},"importKind":"value","local":{"type":"Identifier","name":"UploadPartCommand"}},{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"PutObjectCommand"},"importKind":"value","local":{"type":"Identifier","name":"PutObjectCommand"}}],"source":{"type":"StringLiteral","value":"@aws-sdk/client-s3"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportSpecifier","imported":{"type":"Identifier","name":"getSignedUrl"},"importKind":"value","local":{"type":"Identifier","name":"getSignedUrl"}}],"source":{"type":"StringLiteral","value":"@aws-sdk/s3-request-presigner"}},{"type":"ImportDeclaration","importKind":"value","specifiers":[{"type":"ImportDefaultSpecifier","local":{"type":"Identifier","name":"createSignedURL"}}],"source":{"type":"StringLiteral","value":"./createSignedURL.ts"}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"bucketName"},"init":{"type":"StringLiteral","value":"some-bucket.with.dots"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"s3ClientOptions"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"region"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"us-bar-1"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"credentials"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accessKeyId"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foo"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"secretAccessKey"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"bar"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"foobar"}}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"Date"},"computed":false,"method":false,"shorthand":false,"value":{"type":"Identifier","name":"OriginalDate"}}]},"init":{"type":"Identifier","name":"globalThis"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"describe"},"arguments":[{"type":"StringLiteral","value":"createSignedURL"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"beforeEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"now_ms"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"OriginalDate"},"computed":false,"property":{"type":"Identifier","name":"now"}},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"Date"}},"right":{"type":"FunctionExpression","id":{"type":"Identifier","name":"Date"},"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"MetaProperty","meta":{"type":"Identifier","name":"new"},"property":{"type":"Identifier","name":"target"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Reflect"},"computed":false,"property":{"type":"Identifier","name":"construct"}},"arguments":[{"type":"Identifier","name":"OriginalDate"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"now_ms"}]}]}}],"directives":[]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Reflect"},"computed":false,"property":{"type":"Identifier","name":"apply"}},"arguments":[{"type":"Identifier","name":"OriginalDate"},{"type":"ThisExpression"},{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"now_ms"}]}]}}],"directives":[]}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"Date"}},"computed":false,"property":{"type":"Identifier","name":"now"}},"right":{"type":"FunctionExpression","id":{"type":"Identifier","name":"now"},"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"now_ms"}}],"directives":[]}}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"afterEach"},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"Date"}},"right":{"type":"Identifier","name":"OriginalDate"}}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to sign non-multipart upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"client"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"S3Client"},"arguments":[{"type":"Identifier","name":"s3ClientOptions"}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"createSignedURL"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountKey"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"accessKeyId"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountSecret"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"secretAccessKey"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"sessionToken"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bucketName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Region"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"region"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expires"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSignedUrl"},"arguments":[{"type":"Identifier","name":"client"},{"type":"NewExpression","callee":{"type":"Identifier","name":"PutObjectCommand"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expiresIn"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should be able to sign multipart upload"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"client"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"S3Client"},"arguments":[{"type":"Identifier","name":"s3ClientOptions"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"partNumber"},"init":{"type":"NumericLiteral","value":99}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"StringLiteral","value":"dummyUploadId"}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"createSignedURL"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountKey"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"accessKeyId"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountSecret"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"secretAccessKey"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"sessionToken"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadId"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"partNumber"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bucketName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Region"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"region"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expires"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSignedUrl"},"arguments":[{"type":"Identifier","name":"client"},{"type":"NewExpression","callee":{"type":"Identifier","name":"UploadPartCommand"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"UploadId"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"PartNumber"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"some/key"}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expiresIn"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}]},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"}]}]}}],"directives":[]}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"Identifier","name":"it"},"arguments":[{"type":"StringLiteral","value":"should escape path and query as restricted to RFC 3986"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"client"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"S3Client"},"arguments":[{"type":"Identifier","name":"s3ClientOptions"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"partNumber"},"init":{"type":"NumericLiteral","value":99}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"specialChars"},"init":{"type":"StringLiteral","value":";?:@&=+$,#!'()"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"uploadId"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"specialChars"}],"quasis":[{"type":"TemplateElement","value":{"raw":"Upload","cooked":"Upload"},"tail":false},{"type":"TemplateElement","value":{"raw":"Id","cooked":"Id"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"Key"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"specialChars"},{"type":"Identifier","name":"specialChars"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":".*/","cooked":".*/"},"tail":false},{"type":"TemplateElement","value":{"raw":".*.ext","cooked":".*.ext"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"implResult"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"createSignedURL"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountKey"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"accessKeyId"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"accountSecret"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"secretAccessKey"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"sessionToken"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"credentials"}},"computed":false,"property":{"type":"Identifier","name":"sessionToken"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"uploadId"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"partNumber"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"bucketName"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"Key"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Region"},"computed":false,"shorthand":false,"value":{"type":"MemberExpression","object":{"type":"Identifier","name":"s3ClientOptions"},"computed":false,"property":{"type":"Identifier","name":"region"}}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expires"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"sdkResult"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"getSignedUrl"},"arguments":[{"type":"Identifier","name":"client"},{"type":"NewExpression","callee":{"type":"Identifier","name":"UploadPartCommand"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"UploadId"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"PartNumber"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"partNumber"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"Key"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"Key"}}]}]},{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"expiresIn"},"computed":false,"shorthand":false,"value":{"type":"NumericLiteral","value":900}}]}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"implResult"},"computed":false,"property":{"type":"Identifier","name":"pathname"}},{"type":"MemberExpression","object":{"type":"Identifier","name":"sdkResult"},"computed":false,"property":{"type":"Identifier","name":"pathname"}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"extractUploadId"},"init":{"type":"RegExpLiteral","pattern":"([?&])uploadId=([^&]+?)(&|$)","flags":""}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"extractSignature"},"init":{"type":"RegExpLiteral","pattern":"([?&])X-Amz-Signature=([^&]+?)(&|$)","flags":""}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"implResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractUploadId"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}},{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"sdkResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractUploadId"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"assert"},"computed":false,"property":{"type":"Identifier","name":"strictEqual"}},"arguments":[{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"implResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractSignature"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}},{"type":"MemberExpression","object":{"type":"TSNonNullExpression","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"sdkResult"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"match"}},"arguments":[{"type":"Identifier","name":"extractSignature"}]}},"computed":true,"property":{"type":"NumericLiteral","value":2}}]}}],"directives":[]}}]}}],"directives":[]}}]}}],"directives":[]}},"packages/@uppy/aws-s3-multipart/src/createSignedURL.ts":{"type":"File","errors":[],"program":{"type":"Program","sourceType":"module","interpreter":null,"body":[{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"createCanonicalRequest"},"generator":false,"async":false,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"method"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"method"},"right":{"type":"StringLiteral","value":"PUT"}}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"CanonicalUri"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"CanonicalUri"},"right":{"type":"StringLiteral","value":"/"}}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"CanonicalQueryString"},"computed":false,"method":false,"shorthand":true,"value":{"type":"AssignmentPattern","left":{"type":"Identifier","name":"CanonicalQueryString"},"right":{"type":"StringLiteral","value":""}}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"SignedHeaders"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"SignedHeaders"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"HashedPayload"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"HashedPayload"}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"method"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"CanonicalUri"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"CanonicalQueryString"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"SignedHeaders"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Record"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSStringKeyword"},{"type":"TSStringKeyword"}]}}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"HashedPayload"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"headerKeys"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"Object"},"computed":false,"property":{"type":"Identifier","name":"keys"}},"arguments":[{"type":"Identifier","name":"SignedHeaders"}]},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"k"}],"body":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"k"},"computed":false,"property":{"type":"Identifier","name":"toLowerCase"}},"arguments":[]}}]},"computed":false,"property":{"type":"Identifier","name":"sort"}},"arguments":[]}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ArrayExpression","elements":[{"type":"Identifier","name":"method"},{"type":"Identifier","name":"CanonicalUri"},{"type":"Identifier","name":"CanonicalQueryString"},{"type":"SpreadElement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"headerKeys"},"computed":false,"property":{"type":"Identifier","name":"map"}},"arguments":[{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"k"}],"body":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"k"},{"type":"MemberExpression","object":{"type":"Identifier","name":"SignedHeaders"},"computed":true,"property":{"type":"Identifier","name":"k"}}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":":","cooked":":"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}]}},{"type":"StringLiteral","value":""},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"headerKeys"},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":";"}]},{"type":"Identifier","name":"HashedPayload"}]},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":"\n"}]}}],"directives":[]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"ec"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"TextEncoder"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"algorithm"},"init":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"name"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"HMAC"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"hash"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","value":"SHA-256"}}]}}],"kind":"const"},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"digest"},"generator":false,"async":true,"params":[{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ReturnType"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"SubtleCrypto"}},"indexType":{"type":"TSLiteralType","literal":{"type":"StringLiteral","value":"digest"}}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"subtle"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"subtle"}}]},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"crypto"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"subtle"},"computed":false,"property":{"type":"Identifier","name":"digest"}},"arguments":[{"type":"MemberExpression","object":{"type":"Identifier","name":"algorithm"},"computed":false,"property":{"type":"Identifier","name":"hash"}},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ec"},"computed":false,"property":{"type":"Identifier","name":"encode"}},"arguments":[{"type":"Identifier","name":"data"}]}]}}],"directives":[]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"generateHmacKey"},"generator":false,"async":true,"params":[{"type":"Identifier","name":"secret","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Uint8Array"}},{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ArrayBuffer"}}]}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"subtle"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"subtle"}}]},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"crypto"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"subtle"},"computed":false,"property":{"type":"Identifier","name":"importKey"}},"arguments":[{"type":"StringLiteral","value":"raw"},{"type":"ConditionalExpression","test":{"type":"BinaryExpression","left":{"type":"UnaryExpression","operator":"typeof","prefix":true,"argument":{"type":"Identifier","name":"secret"}},"operator":"===","right":{"type":"StringLiteral","value":"string"}},"consequent":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ec"},"computed":false,"property":{"type":"Identifier","name":"encode"}},"arguments":[{"type":"Identifier","name":"secret"}]},"alternate":{"type":"Identifier","name":"secret"}},{"type":"Identifier","name":"algorithm"},{"type":"BooleanLiteral","value":false},{"type":"ArrayExpression","elements":[{"type":"StringLiteral","value":"sign"}]}]}}],"directives":[]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"arrayBufferToHexString"},"generator":false,"async":false,"params":[{"type":"Identifier","name":"arrayBuffer","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"ArrayBuffer"}}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"byteArray"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"Uint8Array"},"arguments":[{"type":"Identifier","name":"arrayBuffer"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"hexString"},"init":{"type":"StringLiteral","value":""}}],"kind":"let"},{"type":"ForStatement","init":{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"i"},"init":{"type":"NumericLiteral","value":0}}],"kind":"let"},"test":{"type":"BinaryExpression","left":{"type":"Identifier","name":"i"},"operator":"<","right":{"type":"MemberExpression","object":{"type":"Identifier","name":"byteArray"},"computed":false,"property":{"type":"Identifier","name":"length"}}},"update":{"type":"UpdateExpression","operator":"++","prefix":false,"argument":{"type":"Identifier","name":"i"}},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"+=","left":{"type":"Identifier","name":"hexString"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"byteArray"},"computed":true,"property":{"type":"Identifier","name":"i"}},"computed":false,"property":{"type":"Identifier","name":"toString"}},"arguments":[{"type":"NumericLiteral","value":16}]},"computed":false,"property":{"type":"Identifier","name":"padStart"}},"arguments":[{"type":"NumericLiteral","value":2},{"type":"StringLiteral","value":"0"}]}}}],"directives":[]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"hexString"}}],"directives":[]}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"hash"},"generator":false,"async":true,"params":[{"type":"Identifier","name":"key","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSIndexedAccessType","objectType":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Parameters"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeQuery","exprName":{"type":"Identifier","name":"generateHmacKey"}}]}},"indexType":{"type":"TSLiteralType","literal":{"type":"NumericLiteral","value":0}}}}},{"type":"Identifier","name":"data","typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"subtle"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"subtle"}}]},"init":{"type":"MemberExpression","object":{"type":"Identifier","name":"globalThis"},"computed":false,"property":{"type":"Identifier","name":"crypto"}}}],"kind":"const"},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"subtle"},"computed":false,"property":{"type":"Identifier","name":"sign"}},"arguments":[{"type":"Identifier","name":"algorithm"},{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"generateHmacKey"},"arguments":[{"type":"Identifier","name":"key"}]}},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"ec"},"computed":false,"property":{"type":"Identifier","name":"encode"}},"arguments":[{"type":"Identifier","name":"data"}]}]}}],"directives":[]}},{"type":"ExportDefaultDeclaration","exportKind":"value","declaration":{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"createSignedURL"},"generator":false,"async":true,"params":[{"type":"ObjectPattern","properties":[{"type":"ObjectProperty","key":{"type":"Identifier","name":"accountKey"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"accountKey"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"accountSecret"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"accountSecret"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"sessionToken"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"sessionToken"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"bucketName"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"bucketName"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"Key"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"Key"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"Region"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"Region"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"expires"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"expires"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"uploadId"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"uploadId"}},{"type":"ObjectProperty","key":{"type":"Identifier","name":"partNumber"},"computed":false,"method":false,"shorthand":true,"value":{"type":"Identifier","name":"partNumber"}}],"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeLiteral","members":[{"type":"TSPropertySignature","key":{"type":"Identifier","name":"accountKey"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"accountSecret"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"sessionToken"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"bucketName"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"Key"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"Region"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"expires"},"computed":false,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"uploadId"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSStringKeyword"}}},{"type":"TSPropertySignature","key":{"type":"Identifier","name":"partNumber"},"computed":false,"optional":true,"typeAnnotation":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSUnionType","types":[{"type":"TSStringKeyword"},{"type":"TSNumberKeyword"}]}}}]}}}],"returnType":{"type":"TSTypeAnnotation","typeAnnotation":{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"Promise"},"typeParameters":{"type":"TSTypeParameterInstantiation","params":[{"type":"TSTypeReference","typeName":{"type":"Identifier","name":"URL"}}]}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"Service"},"init":{"type":"StringLiteral","value":"s3"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"host"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"Service"},{"type":"Identifier","name":"Region"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":".","cooked":"."},"tail":false},{"type":"TemplateElement","value":{"raw":".amazonaws.com","cooked":".amazonaws.com"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"CanonicalUri"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"bucketName"},{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"Identifier","name":"encodeURI"},"arguments":[{"type":"Identifier","name":"Key"}]},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"[;?:@&=+$,#!'()*]","flags":"g"},{"type":"ArrowFunctionExpression","id":null,"generator":false,"async":false,"params":[{"type":"Identifier","name":"c"}],"body":{"type":"TemplateLiteral","expressions":[{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"c"},"computed":false,"property":{"type":"Identifier","name":"charCodeAt"}},"arguments":[{"type":"NumericLiteral","value":0}]},"computed":false,"property":{"type":"Identifier","name":"toString"}},"arguments":[{"type":"NumericLiteral","value":16}]},"computed":false,"property":{"type":"Identifier","name":"toUpperCase"}},"arguments":[]}],"quasis":[{"type":"TemplateElement","value":{"raw":"%","cooked":"%"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}]}],"quasis":[{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"payload"},"init":{"type":"StringLiteral","value":"UNSIGNED-PAYLOAD"}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"requestDateTime"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"NewExpression","callee":{"type":"Identifier","name":"Date"},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"toISOString"}},"arguments":[]},"computed":false,"property":{"type":"Identifier","name":"replace"}},"arguments":[{"type":"RegExpLiteral","pattern":"[-:]|\\.\\d+","flags":"g"},{"type":"StringLiteral","value":""}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"date"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"requestDateTime"},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":0},{"type":"NumericLiteral","value":8}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"scope"},"init":{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"date"},{"type":"Identifier","name":"Region"},{"type":"Identifier","name":"Service"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"/aws4_request","cooked":"/aws4_request"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"url"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"URL"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"host"},{"type":"Identifier","name":"CanonicalUri"}],"quasis":[{"type":"TemplateElement","value":{"raw":"https://","cooked":"https://"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Algorithm"},{"type":"StringLiteral","value":"AWS4-HMAC-SHA256"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Content-Sha256"},{"type":"Identifier","name":"payload"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Credential"},{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"accountKey"},{"type":"Identifier","name":"scope"}],"quasis":[{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Date"},{"type":"Identifier","name":"requestDateTime"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Expires"},{"type":"TSAsExpression","expression":{"type":"Identifier","name":"expires"},"typeAnnotation":{"type":"TSStringKeyword"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Security-Token"},{"type":"Identifier","name":"sessionToken"}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-SignedHeaders"},{"type":"StringLiteral","value":"host"}]}},{"type":"IfStatement","test":{"type":"Identifier","name":"partNumber"},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"partNumber"},{"type":"TSAsExpression","expression":{"type":"Identifier","name":"partNumber"},"typeAnnotation":{"type":"TSStringKeyword"}}]}},"alternate":null},{"type":"IfStatement","test":{"type":"Identifier","name":"uploadId"},"consequent":{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"uploadId"},{"type":"Identifier","name":"uploadId"}]}},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"x-id"},{"type":"ConditionalExpression","test":{"type":"LogicalExpression","left":{"type":"Identifier","name":"partNumber"},"operator":"&&","right":{"type":"Identifier","name":"uploadId"}},"consequent":{"type":"StringLiteral","value":"UploadPart"},"alternate":{"type":"StringLiteral","value":"PutObject"}}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"canonical"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"createCanonicalRequest"},"arguments":[{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"CanonicalUri"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"CanonicalUri"}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"CanonicalQueryString"},"computed":false,"shorthand":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"search"}},"computed":false,"property":{"type":"Identifier","name":"slice"}},"arguments":[{"type":"NumericLiteral","value":1}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"SignedHeaders"},"computed":false,"shorthand":false,"value":{"type":"ObjectExpression","properties":[{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"host"},"computed":false,"shorthand":true,"value":{"type":"Identifier","name":"host"}}]}},{"type":"ObjectProperty","method":false,"key":{"type":"Identifier","name":"HashedPayload"},"computed":false,"shorthand":false,"value":{"type":"Identifier","name":"payload"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"hashedCanonical"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"arrayBufferToHexString"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"digest"},"arguments":[{"type":"Identifier","name":"canonical"}]}}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"stringToSign"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"ArrayExpression","elements":[{"type":"TemplateLiteral","expressions":[],"quasis":[{"type":"TemplateElement","value":{"raw":"AWS4-HMAC-SHA256","cooked":"AWS4-HMAC-SHA256"},"tail":true}]},{"type":"Identifier","name":"requestDateTime"},{"type":"Identifier","name":"scope"},{"type":"Identifier","name":"hashedCanonical"}]},"computed":false,"property":{"type":"Identifier","name":"join"}},"arguments":[{"type":"StringLiteral","value":"\n"}]}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kDate"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"TemplateLiteral","expressions":[{"type":"Identifier","name":"accountSecret"}],"quasis":[{"type":"TemplateElement","value":{"raw":"AWS4","cooked":"AWS4"},"tail":false},{"type":"TemplateElement","value":{"raw":"","cooked":""},"tail":true}]},{"type":"Identifier","name":"date"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kRegion"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kDate"},{"type":"Identifier","name":"Region"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kService"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kRegion"},{"type":"Identifier","name":"Service"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"kSigning"},"init":{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kService"},{"type":"StringLiteral","value":"aws4_request"}]}}}],"kind":"const"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"signature"},"init":{"type":"CallExpression","callee":{"type":"Identifier","name":"arrayBufferToHexString"},"arguments":[{"type":"AwaitExpression","argument":{"type":"CallExpression","callee":{"type":"Identifier","name":"hash"},"arguments":[{"type":"Identifier","name":"kSigning"},{"type":"Identifier","name":"stringToSign"}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"url"},"computed":false,"property":{"type":"Identifier","name":"searchParams"}},"computed":false,"property":{"type":"Identifier","name":"set"}},"arguments":[{"type":"StringLiteral","value":"X-Amz-Signature"},{"type":"Identifier","name":"signature"}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"url"}}],"directives":[]}}}],"directives":[]}}}},"renamedFiles":{"mappings":[],"before":{},"after":{}}}